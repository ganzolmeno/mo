(self.webpackChunkng_rpgmo_website=self.webpackChunkng_rpgmo_website||[]).push([[578],{6578:(ki,w,F)=>{"use strict";F.r(w),F.d(w,{MediaModule:()=>Js});var ci=F(6762),R=F(6895),r=F(1571),ce=F(7579),Ve=F(1135),Tt=F(9646),at=F(515),ue=F(727),He=F(4968),Ye=F(9751),lt=F(8421);const{isArray:zt}=Array;var We=F(5403),hi=F(3269);var ze=F(9300),Xe=F(3900),di=F(1005),Ee=F(8505),Se=F(4004),Oe=F(4986),qe=F(4482);function kt(n,t=Oe.z){return(0,qe.e)((e,o)=>{let c=null,u=null,g=null;const y=()=>{if(c){c.unsubscribe(),c=null;const S=u;u=null,o.next(S)}};function C(){const S=g+n,D=t.now();if(D<S)return c=this.schedule(void 0,S-D),void o.add(c);y()}e.subscribe((0,We.x)(o,S=>{u=S,g=t.now(),c||(c=t.schedule(C,n),o.add(c))},()=>{y(),o.complete()},void 0,()=>{u=c=null}))})}var Ae=F(1481),ae=F(7340);function Gt(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"i",2),r.NdJ("tapClick",function(){r.CHM(e);const c=r.oxw();return r.KtG(c.action.emit("prev"))}),r.qZA()}if(2&n){const e=r.oxw();r.Q6J("innerHtml",e.navIcon,r.oJD)}}function jt(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"i",3),r.NdJ("tapClick",function(){r.CHM(e);const c=r.oxw();return r.KtG(c.action.emit("next"))}),r.qZA()}if(2&n){const e=r.oxw();r.Q6J("innerHtml",e.navIcon,r.oJD)}}function $t(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",1),r.NdJ("tapClick",function(){const u=r.CHM(e).index,g=r.oxw();return r.KtG(g.action.emit(u))}),r._UZ(1,"div",2),r.qZA()}if(2&n){const e=t.index,o=r.oxw();r.Udp("width",null==o.config?null:o.config.dotsSize,"px")("height",null==o.config?null:o.config.dotsSize,"px"),r.ekj("g-dot-active",e===o.state.currIndex)}}function Ge(n,t){if(1&n&&r._UZ(0,"img",4),2&n){const e=r.oxw();r.Q6J("@fadeIn",void 0)("src",e.imageUrl,r.LSH),r.uIk("alt",e.alt)}}function ve(n,t){if(1&n&&r._UZ(0,"div",8),2&n){const e=r.oxw(2);r.Q6J("innerHTML",e.errorTemplate,r.oJD)}}function X(n,t){1&n&&(r.ynx(0),r.TgZ(1,"h4"),r._uU(2,"\u26a0"),r.qZA(),r.BQk())}function K(n,t){1&n&&(r.TgZ(0,"h2"),r._uU(1,"\u26a0"),r.qZA(),r.TgZ(2,"p"),r._uU(3,"Unable to load the image!"),r.qZA())}function de(n,t){if(1&n&&(r.YNc(0,X,3,0,"ng-container",9),r.YNc(1,K,4,0,"ng-template",null,10,r.W1O)),2&n){const e=r.MAs(2),o=r.oxw(2);r.Q6J("ngIf",o.isThumbnail)("ngIfElse",e)}}function W(n,t){if(1&n&&(r.TgZ(0,"div",5),r.YNc(1,ve,1,1,"div",6),r.YNc(2,de,3,2,"ng-template",null,7,r.W1O),r.qZA()),2&n){const e=r.MAs(3),o=r.oxw();r.xp6(1),r.Q6J("ngIf",o.errorTemplate)("ngIfElse",e)}}function q(n,t){if(1&n&&r._UZ(0,"div",13),2&n){const e=r.oxw(2);r.Q6J("innerHTML",e.loaderTemplate,r.oJD)}}function Ke(n,t){1&n&&r._UZ(0,"div",15)}function T(n,t){if(1&n&&r.YNc(0,Ke,1,0,"div",14),2&n){const e=r.oxw(2);r.Q6J("ngIf",e.isThumbnail)}}function Me(n,t){if(1&n&&(r.ynx(0),r.YNc(1,q,1,1,"div",11),r.YNc(2,T,1,1,"ng-template",null,12,r.W1O),r.BQk()),2&n){const e=r.MAs(3),o=r.oxw();r.xp6(1),r.Q6J("ngIf",o.loaderTemplate)("ngIfElse",e)}}const je=["video"];function Ut(n,t){if(1&n&&r._UZ(0,"source",3),2&n){const e=t.$implicit;r.Q6J("src",null==e?null:e.url,r.LSH)("type",null==e?null:e.type)}}const ui=["iframe"];function Qe(n,t){1&n&&r.GkF(0)}const I=function(n,t,e,o){return{index:n,currIndex:t,type:e,data:o}};function xt(n,t){if(1&n){const e=r.EpF();r.ynx(0),r.TgZ(1,"gallery-image",7),r.NdJ("error",function(c){r.CHM(e);const u=r.oxw(2);return r.KtG(u.error.emit(c))}),r.qZA(),r.TgZ(2,"div",8),r.YNc(3,Qe,1,0,"ng-container",9),r.qZA(),r.BQk()}if(2&n){const e=r.oxw(2);r.xp6(1),r.Q6J("src",e.data.src)("alt",e.data.alt)("loadingIcon",e.config.loadingIcon)("loadingError",e.config.loadingError),r.xp6(2),r.Q6J("ngTemplateOutlet",e.config.itemTemplate)("ngTemplateOutletContext",r.l5B(6,I,e.index,e.currIndex,e.type,e.data))}}function Yt(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"gallery-video",10),r.NdJ("error",function(c){r.CHM(e);const u=r.oxw(2);return r.KtG(u.error.emit(c))}),r.qZA()}if(2&n){const e=r.oxw(2);r.Q6J("src",e.data.src)("poster",e.data.poster)("controls",e.data.controls)("play",e.isAutoPlay)("pause",e.currIndex!==e.index)}}function le(n,t){if(1&n&&r._UZ(0,"gallery-iframe",11),2&n){const e=r.oxw(2);r.Q6J("src",e.youtubeSrc)("autoplay",e.isAutoPlay)("pause",e.currIndex!==e.index)}}function Wt(n,t){if(1&n&&r._UZ(0,"gallery-iframe",12),2&n){const e=r.oxw(2);r.Q6J("src",e.data.src)}}function Q(n,t){1&n&&r.GkF(0)}function Zt(n,t){if(1&n&&(r.ynx(0),r.TgZ(1,"div",8),r.YNc(2,Q,1,0,"ng-container",9),r.qZA(),r.BQk()),2&n){const e=r.oxw(2);r.xp6(2),r.Q6J("ngTemplateOutlet",e.config.itemTemplate)("ngTemplateOutletContext",r.l5B(2,I,e.index,e.currIndex,e.type,e.data))}}function It(n,t){if(1&n&&(r.ynx(0,1),r.YNc(1,xt,4,11,"ng-container",2),r.YNc(2,Yt,1,5,"gallery-video",3),r.YNc(3,le,1,3,"gallery-iframe",4),r.YNc(4,Wt,1,1,"gallery-iframe",5),r.YNc(5,Zt,3,7,"ng-container",6),r.BQk()),2&n){const e=r.oxw();r.Q6J("ngSwitch",e.type),r.xp6(1),r.Q6J("ngSwitchCase",e.Types.Image),r.xp6(1),r.Q6J("ngSwitchCase",e.Types.Video),r.xp6(1),r.Q6J("ngSwitchCase",e.Types.Youtube),r.xp6(1),r.Q6J("ngSwitchCase",e.Types.Iframe)}}const P=["container"],Ot=["slider"];function we(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"gallery-item",5),r.NdJ("tapClick",function(){const u=r.CHM(e).index,g=r.oxw();return r.KtG(g.itemClick.emit(u))})("error",function(c){const g=r.CHM(e).index,y=r.oxw();return r.KtG(y.error.emit({itemIndex:g,error:c}))}),r.qZA()}if(2&n){const e=t.$implicit,o=t.index,c=r.oxw();r.Q6J("type",e.type)("config",c.config)("data",e.data)("currIndex",c.state.currIndex)("index",o)}}const Je=["*"];function ht(n,t){1&n&&r.GkF(0)}const be=function(n,t,e){return{index:n,type:t,data:e}};function Pe(n,t){if(1&n&&(r.TgZ(0,"div",2),r.YNc(1,ht,1,0,"ng-container",3),r.qZA()),2&n){const e=r.oxw();r.xp6(1),r.Q6J("ngTemplateOutlet",e.config.thumbTemplate)("ngTemplateOutletContext",r.kEZ(2,be,e.index,e.type,e.data))}}function z(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"gallery-thumb",4),r.NdJ("tapClick",function(){const u=r.CHM(e).index,g=r.oxw();return r.KtG(g.thumbClick.emit(u))})("error",function(c){const g=r.CHM(e).index,y=r.oxw();return r.KtG(y.error.emit({itemIndex:g,error:c}))}),r.qZA()}if(2&n){const e=t.$implicit,o=t.index,c=r.oxw();r.Q6J("type",e.type)("config",c.config)("data",e.data)("currIndex",c.state.currIndex)("index",o)("tapClickDisabled",c.config.disableThumb)}}function dt(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"gallery-thumbs",5),r.NdJ("action",function(c){r.CHM(e);const u=r.oxw();return r.KtG(u.action.emit(c))})("thumbClick",function(c){r.CHM(e);const u=r.oxw();return r.KtG(u.thumbClick.emit(c))}),r.qZA()}if(2&n){const e=r.oxw();r.Q6J("state",e.state)("config",e.config)}}function De(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"gallery-nav",6),r.NdJ("action",function(c){r.CHM(e);const u=r.oxw();return r.KtG(u.action.emit(c))}),r.qZA()}if(2&n){const e=r.oxw();r.Q6J("state",e.state)("config",e.config)}}function $e(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"gallery-dots",6),r.NdJ("action",function(c){r.CHM(e);const u=r.oxw();return r.KtG(u.action.emit(c))}),r.qZA()}if(2&n){const e=r.oxw();r.Q6J("state",e.state)("config",e.config)}}function ne(n,t){if(1&n&&r._UZ(0,"gallery-counter",7),2&n){const e=r.oxw();r.Q6J("state",e.state)}}var te=(()=>{return(n=te||(te={})).INITIALIZED="initialized",n.ITEMS_CHANGED="itemsChanged",n.INDEX_CHANGED="indexChanged",n.PLAY="play",n.STOP="stop",te;var n})(),et=(()=>{return(n=et||(et={})).Cover="cover",n.Contain="contain",et;var n})(),$=(()=>{return(n=$||($={})).Preload="preload",n.Lazy="lazy",n.Default="default",$;var n})(),ie=(()=>{return(n=ie||(ie={})).Top="top",n.Left="left",n.Right="right",n.Bottom="bottom",ie;var n})(),V=(()=>{return(n=V||(V={})).Top="top",n.Bottom="bottom",V;var n})(),Re=(()=>{return(n=Re||(Re={})).Top="top",n.Bottom="bottom",Re;var n})(),Te=(()=>{return(n=Te||(Te={})).Free="free",n.Strict="strict",Te;var n})(),O=(()=>{return(n=O||(O={})).Horizontal="horizontal",n.Vertical="vertical",O;var n})(),ge=(()=>{return(n=ge||(ge={})).Image="image",n.Video="video",n.Youtube="youtube",n.Iframe="iframe",ge;var n})(),ut=(()=>{return(n=ut||(ut={})).Default="default",n.Contain="contain",ut;var n})();const fe={action:te.INITIALIZED,isPlaying:!1,hasNext:!1,hasPrev:!1,currIndex:0,items:[]},pt={nav:!0,loop:!0,zoomOut:0,dots:!1,thumb:!0,dotsSize:30,counter:!0,gestures:!0,autoPlay:!1,thumbWidth:120,thumbHeight:90,panSensitivity:25,disableThumb:!1,playerInterval:3e3,reserveGesturesAction:!1,imageSize:et.Contain,thumbMode:Te.Strict,dotsPosition:V.Bottom,counterPosition:Re.Top,thumbPosition:ie.Bottom,loadingStrategy:$.Default,slidingDirection:O.Horizontal,navIcon:'<?xml version="1.0" encoding="UTF-8"?><svg width="512px" height="512px" enable-background="new 0 0 240.823 240.823" version="1.1" viewBox="0 0 240.823 240.823" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"><path d="m183.19 111.82l-108.3-108.26c-4.752-4.74-12.451-4.74-17.215 0-4.752 4.74-4.752 12.439 0 17.179l99.707 99.671-99.695 99.671c-4.752 4.74-4.752 12.439 0 17.191 4.752 4.74 12.463 4.74 17.215 0l108.3-108.26c4.68-4.691 4.68-12.511-0.012-17.19z" fill="#fff"/></svg>',loadingIcon:'<?xml version="1.0" encoding="UTF-8"?><svg stroke="#fff" viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle></g></svg>'};class mt{constructor(t){this.data=t,this.type=ge.Image}}class At{constructor(t){this.data=t,this.type=ge.Video}}class Mt{constructor(t){this.data=t,this.type=ge.Iframe}}class Pt{constructor(t){this.data={...t,src:`https://youtube.com/embed/${t.src}`,thumb:t.thumb?t.thumb:`//img.youtube.com/vi/${t.src}/default.jpg`},this.type=ge.Youtube}}const ke=n=>(0,ze.h)(t=>n.indexOf(t.action)>-1);class Dt{constructor(t,e){this.deleteInstance=e,this.itemClick=new ce.x,this.thumbClick=new ce.x,this.error=new ce.x,this._state=new Ve.X(fe),this._config=new Ve.X(t),this.state=this._state.asObservable(),this.config=this._config.asObservable()}get stateSnapshot(){return this._state.value}get initialized(){return this.state.pipe(ke([te.INITIALIZED]))}get itemsChanged(){return this.state.pipe(ke([te.ITEMS_CHANGED]))}get indexChanged(){return this.state.pipe(ke([te.INDEX_CHANGED]))}get playingChanged(){return this.state.pipe(ke([te.PLAY,te.STOP]))}get playerActions(){return this.state.pipe(ke([te.PLAY,te.STOP,te.INDEX_CHANGED]))}activatePlayer(){return this.playerActions.pipe((0,Xe.w)(t=>t.isPlaying?(0,Tt.of)({}).pipe((0,di.g)(this._config.value.playerInterval),(0,Ee.b)(()=>this.next())):at.E))}setState(t){this._state.next({...this.stateSnapshot,...t})}setConfig(t){this._config.next({...this._config.value,...t})}add(t,e){const o=[...this.stateSnapshot.items,t];this.setState({action:te.ITEMS_CHANGED,items:o,hasNext:o.length>1,currIndex:e?o.length-1:this.stateSnapshot.currIndex})}addImage(t,e){this.add(new mt(t),e)}addVideo(t,e){this.add(new At(t),e)}addIframe(t,e){this.add(new Mt(t),e)}addYoutube(t,e){this.add(new Pt(t),e)}remove(t){const e=this.stateSnapshot,o=[...e.items.slice(0,t),...e.items.slice(t+1,e.items.length)];this.setState({action:te.ITEMS_CHANGED,currIndex:t<1?e.currIndex:t-1,items:o,hasNext:o.length>1,hasPrev:t>0})}load(t){t&&this.setState({action:te.ITEMS_CHANGED,items:t,hasNext:t.length>1,hasPrev:!1})}set(t){t!==this.stateSnapshot.currIndex&&this.setState({action:te.INDEX_CHANGED,currIndex:t,hasNext:t<this.stateSnapshot.items.length-1,hasPrev:t>0})}next(){this.stateSnapshot.hasNext?this.set(this.stateSnapshot.currIndex+1):this._config.value.loop&&this.set(0)}prev(){this.stateSnapshot.hasPrev?this.set(this.stateSnapshot.currIndex-1):this._config.value.loop&&this.set(this.stateSnapshot.items.length-1)}play(t){t&&this.setConfig({playerInterval:t}),this.setState({action:te.PLAY,isPlaying:!0})}stop(){this.setState({action:te.STOP,isPlaying:!1})}reset(){this.setState(fe)}destroy(){this._state.complete(),this._config.complete(),this.itemClick.complete(),this.thumbClick.complete(),this.deleteInstance()}}const Le=new r.OlP("GALLERY_CONFIG");let yt,gt=(()=>{class n{constructor(e){this._instances=new Map,this.config=e?{...pt,...e}:pt}ref(e="root",o){if(this._instances.has(e)){const c=this._instances.get(e);return o&&c.setConfig({...this.config,...o}),c}return this._instances.set(e,new Dt({...this.config,...o},this.deleteInstance(e))).get(e)}destroyAll(){this._instances.forEach(e=>e.destroy())}resetAll(){this._instances.forEach(e=>e.reset())}deleteInstance(e){return()=>{this._instances.has(e)&&this._instances.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(Le,8))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ye=(()=>{class n{constructor(e){this._el=e,this.clickListener=ue.w0.EMPTY,this.tapClick=new r.vpe}ngOnInit(){this.activateClickEvent()}activateClickEvent(){typeof Hammer<"u"?(this._hammer=new Hammer(this._el.nativeElement),this._hammer.on("tap",()=>{this.tapClickDisabled||this.tapClick.emit(null)})):this.clickListener=(0,He.R)(this._el.nativeElement,"click").pipe((0,ze.h)(()=>!this.tapClickDisabled),(0,Ee.b)(()=>this.tapClick.emit(null))).subscribe()}ngOnDestroy(){this._hammer&&this._hammer.destroy(),this.clickListener.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.SBq))},n.\u0275dir=r.lG2({type:n,selectors:[["","tapClick",""]],inputs:{tapClickDisabled:"tapClickDisabled"},outputs:{tapClick:"tapClick"}}),n})(),Rt=(()=>{class n{constructor(e){this._sanitizer=e,this.action=new r.vpe}ngOnInit(){this.navIcon=this._sanitizer.bypassSecurityTrustHtml(this.config.navIcon)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(Ae.H7))},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-nav"]],inputs:{state:"state",config:"config"},outputs:{action:"action"},decls:2,vars:2,consts:[["class","g-nav-prev","aria-label","Previous","role","button",3,"innerHtml","tapClick",4,"ngIf"],["class","g-nav-next","aria-label","Next","role","button",3,"innerHtml","tapClick",4,"ngIf"],["aria-label","Previous","role","button",1,"g-nav-prev",3,"innerHtml","tapClick"],["aria-label","Next","role","button",1,"g-nav-next",3,"innerHtml","tapClick"]],template:function(e,o){1&e&&(r.YNc(0,Gt,1,1,"i",0),r.YNc(1,jt,1,1,"i",1)),2&e&&(r.Q6J("ngIf",o.config.loop||o.state.hasPrev),r.xp6(1),r.Q6J("ngIf",o.config.loop||o.state.hasNext))},dependencies:[R.O5,ye],encapsulation:2,changeDetection:0}),n})(),it=(()=>{class n{constructor(){this.action=new r.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-dots"]],inputs:{state:"state",config:"config"},outputs:{action:"action"},decls:1,vars:1,consts:[["class","g-dot",3,"g-dot-active","width","height","tapClick",4,"ngFor","ngForOf"],[1,"g-dot",3,"tapClick"],[1,"g-dot-inner"]],template:function(e,o){1&e&&r.YNc(0,$t,2,6,"div",0),2&e&&r.Q6J("ngForOf",o.state.items)},dependencies:[R.sg,ye],encapsulation:2,changeDetection:0}),n})(),Xt=(()=>{class n{constructor(e){this.document=e,this._imageLoader$=new ce.x,this._loaderSub$=ue.w0.EMPTY,this.loaded=new r.vpe,this.error=new r.vpe,this._loaderSub$=this._imageLoader$.pipe((0,Xe.w)(o=>this.nativeLoader(o))).subscribe()}ngOnChanges(e){e.src&&e.src.previousValue!==e.src.currentValue&&this.loadImage(this.src)}ngOnDestroy(){this._loaderSub$.unsubscribe(),this._imageLoader$.complete()}loadImage(e){this._imageLoader$.next(e)}nativeLoader(e){const o=this.document.createElement("img");return o.src=e,function Ze(...n){const t=(0,hi.jO)(n),e=function ct(n){return 1===n.length&&zt(n[0])?n[0]:n}(n);return e.length?new Ye.y(o=>{let c=e.map(()=>[]),u=e.map(()=>!1);o.add(()=>{c=u=null});for(let g=0;!o.closed&&g<e.length;g++)(0,lt.Xf)(e[g]).subscribe((0,We.x)(o,y=>{if(c[g].push(y),c.every(C=>C.length)){const C=c.map(S=>S.shift());o.next(t?t(...C):C),c.some((S,D)=>!S.length&&u[D])&&o.complete()}},()=>{u[g]=!0,!c[g].length&&o.complete()}));return()=>{c=u=null}}):at.E}((0,He.R)(o,"load").pipe((0,Ee.b)(()=>this.loaded.emit(e))),(0,He.R)(o,"error").pipe((0,Ee.b)(()=>this.error.emit(new Error(`[lazyImage]: The image ${e} did not load`)))))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(R.K0))},n.\u0275dir=r.lG2({type:n,selectors:[["","lazyImage",""]],inputs:{src:["lazyImage","src"]},outputs:{loaded:"loaded",error:"error"},features:[r.TTD]}),n})(),qt=(()=>{class n{constructor(e){this._sanitizer=e,this._state=new Ve.X("loading"),this.state=this._state.asObservable(),this.progress=0,this.error=new r.vpe}get imageLoadSuccess(){return!!this.imageUrl}get imageLoadFailed(){return!!this.loadError}ngOnInit(){this.loadingIcon&&(this.loaderTemplate=this._sanitizer.bypassSecurityTrustHtml(this.loadingIcon)),this.loadingError&&(this.errorTemplate=this._sanitizer.bypassSecurityTrustHtml(this.loadingError))}ngOnDestroy(){this._state.complete()}onProgress({loaded:e,total:o}){this.progress=100*e/o}onLoaded(e){this.imageUrl=this._sanitizer.bypassSecurityTrustUrl(e),this._state.next("success")}onError(e){this.loadError=e,this._state.next("failed"),this.error.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(Ae.H7))},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-image"]],hostVars:4,hostBindings:function(e,o){2&e&&r.ekj("g-image-loaded",o.imageLoadSuccess)("g-image-error",o.imageLoadFailed)},inputs:{isThumbnail:"isThumbnail",alt:"alt",src:"src",loadingIcon:"loadingIcon",loadingError:"loadingError"},outputs:{error:"error"},decls:5,vars:7,consts:[[3,"lazyImage","ngSwitch","progress","loaded","error"],["class","g-image-item",3,"src",4,"ngSwitchCase"],["class","g-image-error-message",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"g-image-item",3,"src"],[1,"g-image-error-message"],[3,"innerHTML",4,"ngIf","ngIfElse"],["defaultError",""],[3,"innerHTML"],[4,"ngIf","ngIfElse"],["isLarge",""],["class","g-loading",3,"innerHTML",4,"ngIf","ngIfElse"],["defaultLoader",""],[1,"g-loading",3,"innerHTML"],["class","g-thumb-loading",4,"ngIf"],[1,"g-thumb-loading"]],template:function(e,o){1&e&&(r.ynx(0,0),r.NdJ("progress",function(u){return o.onProgress(u)})("loaded",function(u){return o.onLoaded(u)})("error",function(u){return o.onError(u)}),r.ALo(1,"async"),r.YNc(2,Ge,1,3,"img",1),r.YNc(3,W,4,2,"div",2),r.YNc(4,Me,4,2,"ng-container",3),r.BQk()),2&e&&(r.Q6J("lazyImage",o.src)("ngSwitch",r.lcZ(1,5,o.state)),r.xp6(2),r.Q6J("ngSwitchCase","success"),r.xp6(1),r.Q6J("ngSwitchCase","failed"),r.xp6(1),r.Q6J("ngSwitchCase","loading"))},dependencies:[R.O5,R.RF,R.n9,Xt,R.Ov],encapsulation:2,data:{animation:[(0,ae.X$)("fadeIn",[(0,ae.eR)(":enter",[(0,ae.oB)({opacity:0}),(0,ae.jt)("300ms ease-in",(0,ae.oB)({opacity:1}))])])]},changeDetection:0}),n})(),pi=(()=>{class n{constructor(){this.error=new r.vpe}set pauseVideo(e){if(this.video.nativeElement){const o=this.video.nativeElement;e&&!o.paused&&o.pause()}}set playVideo(e){if(this.video.nativeElement){const o=this.video.nativeElement;e&&o.play()}}ngOnInit(){this.videoSources=this.src instanceof Array?[...this.src]:[{url:this.src}],this.controls="boolean"!=typeof this.controlsEnabled||this.controlsEnabled}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-video"]],viewQuery:function(e,o){if(1&e&&r.Gf(je,7),2&e){let c;r.iGM(c=r.CRH())&&(o.video=c.first)}},inputs:{src:"src",poster:"poster",controlsEnabled:["controls","controlsEnabled"],pauseVideo:["pause","pauseVideo"],playVideo:["play","playVideo"]},outputs:{error:"error"},decls:3,vars:3,consts:[[3,"controls","poster","error"],["video",""],[3,"src","type",4,"ngFor","ngForOf"],[3,"src","type"]],template:function(e,o){1&e&&(r.TgZ(0,"video",0,1),r.NdJ("error",function(u){return o.error.emit(u)}),r.YNc(2,Ut,1,2,"source",2),r.qZA()),2&e&&(r.Q6J("controls",o.controls)("poster",o.poster,r.LSH),r.xp6(2),r.Q6J("ngForOf",o.videoSources))},dependencies:[R.sg],encapsulation:2,changeDetection:0}),n})(),Kt=(()=>{class n{constructor(e){this._sanitizer=e}set src(e){this.videoSrc=e,this.iframeSrc=this._sanitizer.bypassSecurityTrustResourceUrl(e)}set pauseVideo(e){this.iframe.nativeElement&&e&&(this.iframe.nativeElement.src=null,!this.autoplay&&this.videoSrc&&(this.iframeSrc=this._sanitizer.bypassSecurityTrustResourceUrl(this.videoSrc)))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(Ae.H7))},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-iframe"]],viewQuery:function(e,o){if(1&e&&r.Gf(ui,7),2&e){let c;r.iGM(c=r.CRH())&&(o.iframe=c.first)}},inputs:{src:"src",pauseVideo:["pause","pauseVideo"],autoplay:"autoplay"},decls:2,vars:2,consts:[["frameborder","0","allowfullscreen","",3,"src"],["iframe",""]],template:function(e,o){1&e&&r._UZ(0,"iframe",0,1),2&e&&(r.Q6J("src",o.iframeSrc,r.uOi),r.uIk("allow",o.autoplay?"autoplay":""))},encapsulation:2,changeDetection:0}),n})(),se=(()=>{class n{constructor(){this.Types=ge,this.error=new r.vpe}get isActive(){return this.index===this.currIndex}get isAutoPlay(){if(this.isActive&&(this.type===ge.Video||this.type===ge.Youtube))return this.data.autoplay}get youtubeSrc(){let e=0;this.isActive&&this.type===ge.Youtube&&this.data.autoplay&&(e=1);const o=new URL(this.data.src);return o.search=new URLSearchParams({wmode:"transparent",...this.data.params,autoplay:e}).toString(),o.href}get load(){switch(this.config.loadingStrategy){case $.Preload:return!0;case $.Lazy:return this.currIndex===this.index;default:return this.currIndex===this.index||this.currIndex===this.index-1||this.currIndex===this.index+1}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-item"]],hostVars:2,hostBindings:function(e,o){2&e&&r.ekj("g-active-item",o.isActive)},inputs:{config:"config",index:"index",currIndex:"currIndex",type:"type",data:"data"},outputs:{error:"error"},decls:1,vars:1,consts:[[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"src","poster","controls","play","pause","error",4,"ngSwitchCase"],[3,"src","autoplay","pause",4,"ngSwitchCase"],[3,"src",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"src","alt","loadingIcon","loadingError","error"],[1,"g-template","g-item-template"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"src","poster","controls","play","pause","error"],[3,"src","autoplay","pause"],[3,"src"]],template:function(e,o){1&e&&r.YNc(0,It,6,5,"ng-container",0),2&e&&r.Q6J("ngIf",o.load)},dependencies:[R.O5,R.tP,R.RF,R.n9,R.ED,qt,pi,Kt],encapsulation:2,changeDetection:0}),n})(),nt=(()=>{class n{constructor(e,o,c){this._el=e,this._zone=o,this._platform=c,this._slidingWorker$=new Ve.X({value:0,instant:!0}),this.action=new r.vpe,this.itemClick=new r.vpe,this.error=new r.vpe,this.sliderState$=this._slidingWorker$.pipe((0,Se.U)(u=>({style:this.getSliderStyles(u),instant:u.instant})))}get container(){return this.containerEl.nativeElement}get slider(){return this.sliderEl.nativeElement}get zoom(){return{transform:`perspective(50px) translate3d(0, 0, ${-this.config.zoomOut}px)`}}ngOnChanges(e){e.state&&this.updateSlider({value:0,instant:e.state.firstChange}),e.config&&e.config.currentValue?.gestures!==e.config.previousValue?.gestures&&(this.config.gestures?this.activateGestures():this.deactivateGestures())}ngOnInit(){this._zone.runOutsideAngular(()=>{this._sliderStateSub$=this.sliderState$.pipe((0,Ee.b)(e=>{this.slider.style.transform=e.style.transform,this.slider.style.height=e.style.height,this.slider.style.width=e.style.width,this.slider.classList.toggle("g-no-transition",e.instant),this.container.style.transform=this.zoom.transform})).subscribe()}),(0,R.NF)(this._platform)&&(this._resizeSub$=(0,He.R)(window,"resize").pipe(kt(200),(0,Ee.b)(()=>this.updateSlider({value:0,instant:!0}))).subscribe())}ngOnDestroy(){this.deactivateGestures(),this._resizeSub$?.unsubscribe(),this._sliderStateSub$?.unsubscribe(),this._slidingWorker$.complete()}activateGestures(){if(typeof Hammer<"u"){let e,o="compute";this.config.slidingDirection===O.Horizontal?(e=Hammer.DIRECTION_HORIZONTAL,this.config.reserveGesturesAction&&(o="pan-x")):(e=Hammer.DIRECTION_VERTICAL,this.config.reserveGesturesAction&&(o="pan-y")),this._hammer=new Hammer(this._el.nativeElement,{touchAction:o}),this._hammer.get("pan").set({direction:e}),this._zone.runOutsideAngular(()=>{this._hammer.on("pan",c=>{switch(this.config.slidingDirection){case O.Horizontal:c.isFinal?(this.updateSlider({value:0,instant:!1}),this.horizontalPan(c)):this.updateSlider({value:c.deltaX,instant:!0});break;case O.Vertical:c.isFinal?(this.updateSlider({value:0,instant:!1}),this.verticalPan(c)):this.updateSlider({value:c.deltaY,instant:!0})}})})}}deactivateGestures(){this._hammer?.destroy()}getSliderStyles(e){switch(this.config.slidingDirection){case O.Horizontal:return{transform:`translate3d(${-this.state.currIndex*this._el.nativeElement.offsetWidth+e.value}px, 0, 0)`,width:`calc(100% * ${this.state.items.length})`,height:"100%"};case O.Vertical:return{transform:`translate3d(0, ${-this.state.currIndex*this._el.nativeElement.offsetHeight+e.value}px, 0)`,width:"100%",height:`calc(100% * ${this.state.items.length})`}}}verticalPan(e){!(e.direction&Hammer.DIRECTION_UP&&e.offsetDirection&Hammer.DIRECTION_VERTICAL)||(e.velocityY>.3?this.prev():e.velocityY<-.3||e.deltaY/2<=-this._el.nativeElement.offsetHeight*this.state.items.length/this.config.panSensitivity?this.next():e.deltaY/2>=this._el.nativeElement.offsetHeight*this.state.items.length/this.config.panSensitivity?this.prev():this.action.emit(this.state.currIndex))}horizontalPan(e){!(e.direction&Hammer.DIRECTION_HORIZONTAL&&e.offsetDirection&Hammer.DIRECTION_HORIZONTAL)||(e.velocityX>.3?this.prev():e.velocityX<-.3||e.deltaX/2<=-this._el.nativeElement.offsetWidth*this.state.items.length/this.config.panSensitivity?this.next():e.deltaX/2>=this._el.nativeElement.offsetWidth*this.state.items.length/this.config.panSensitivity?this.prev():this.action.emit(this.state.currIndex))}next(){this.action.emit("next")}prev(){this.action.emit("prev")}updateSlider(e){const o={...this._slidingWorker$.value,...e};this._slidingWorker$.next(o)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.SBq),r.Y36(r.R0b),r.Y36(r.Lbi))},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-slider"]],viewQuery:function(e,o){if(1&e&&(r.Gf(P,7),r.Gf(Ot,7)),2&e){let c;r.iGM(c=r.CRH())&&(o.containerEl=c.first),r.iGM(c=r.CRH())&&(o.sliderEl=c.first)}},inputs:{state:"state",config:"config"},outputs:{action:"action",itemClick:"itemClick",error:"error"},features:[r.TTD],ngContentSelectors:Je,decls:6,vars:1,consts:[[1,"g-items-container"],["container",""],[1,"g-slider"],["slider",""],[3,"type","config","data","currIndex","index","tapClick","error",4,"ngFor","ngForOf"],[3,"type","config","data","currIndex","index","tapClick","error"]],template:function(e,o){1&e&&(r.F$t(),r.TgZ(0,"div",0,1)(2,"div",2,3),r.YNc(4,we,1,5,"gallery-item",4),r.qZA()(),r.Hsn(5)),2&e&&(r.xp6(4),r.Q6J("ngForOf",o.state.items))},dependencies:[R.sg,se,ye],encapsulation:2,changeDetection:0}),n})(),st=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-counter"]],inputs:{state:"state"},decls:2,vars:1,consts:[[1,"g-counter"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0),r._uU(1),r.qZA()),2&e&&(r.xp6(1),r.Oqu(o.state.currIndex+1+"/"+o.state.items.length))},encapsulation:2,changeDetection:0}),n})(),Qt=(()=>{class n{constructor(){this.error=new r.vpe}get isActive(){return this.index===this.currIndex}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-thumb"]],hostVars:2,hostBindings:function(e,o){2&e&&r.ekj("g-active-thumb",o.isActive)},inputs:{config:"config",index:"index",currIndex:"currIndex",type:"type",data:"data"},outputs:{error:"error"},decls:2,vars:6,consts:[[3,"src","alt","isThumbnail","loadingIcon","loadingError","error"],["class","g-template g-thumb-template",4,"ngIf"],[1,"g-template","g-thumb-template"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(r.TgZ(0,"gallery-image",0),r.NdJ("error",function(u){return o.error.emit(u)}),r.qZA(),r.YNc(1,Pe,2,6,"div",1)),2&e&&(r.Q6J("src",o.data.thumb)("alt",o.data.alt+"-thumbnail")("isThumbnail",!0)("loadingIcon",o.config.thumbLoadingIcon)("loadingError",o.config.thumbLoadingError),r.xp6(1),r.Q6J("ngIf",o.config.thumbTemplate))},dependencies:[R.O5,R.tP,qt],encapsulation:2,changeDetection:0}),n})(),Jt=(()=>{class n{constructor(e,o){this._el=e,this._zone=o,this._slidingWorker$=new Ve.X({value:0,instant:!0}),this._freeModeCurrentOffset=0,this.thumbnailsView=ut,this.action=new r.vpe,this.thumbClick=new r.vpe,this.error=new r.vpe,this.sliderState$=this._slidingWorker$.pipe((0,Se.U)(c=>({style:this.getSliderStyles(c),instant:c.instant})))}get slider(){return this.sliderEl.nativeElement}ngOnChanges(e){this.updateSlider(e.state?{value:0,instant:e.state.firstChange}:{value:0,instant:!0}),e.config&&e.config.currentValue?.gestures!==e.config.previousValue?.gestures&&(this.config.gestures?this.activateGestures():this.deactivateGestures()),this._freeModeCurrentOffset=0}ngOnInit(){this._zone.runOutsideAngular(()=>{this._sliderStateSub$=this.sliderState$.pipe((0,Ee.b)(e=>{this.slider.style.transform=e.style.transform,this.slider.style.height=e.style.height,this.slider.style.width=e.style.width,this.slider.classList.toggle("g-no-transition",e.instant)})).subscribe()})}ngOnDestroy(){this._hammer?.destroy(),this._sliderStateSub$?.unsubscribe(),this._slidingWorker$.complete()}activateGestures(){if(!this.config.disableThumb&&typeof Hammer<"u"){let e,o="compute";switch(this.config.thumbPosition){case ie.Right:case ie.Left:e=Hammer.DIRECTION_VERTICAL,this.config.reserveGesturesAction&&(o="pan-y");break;case ie.Top:case ie.Bottom:e=Hammer.DIRECTION_HORIZONTAL,this.config.reserveGesturesAction&&(o="pan-x")}this._hammer=new Hammer(this._el.nativeElement),this._hammer.get("pan").set({direction:e}),this._zone.runOutsideAngular(()=>{switch(this.config.thumbMode){case Te.Strict:this._hammer.on("pan",c=>this.strictMode(c));break;case Te.Free:this._hammer.on("pan",c=>this.freeMode(c))}})}}deactivateGestures(){this._hammer?.destroy()}strictMode(e){switch(this.config.thumbPosition){case ie.Right:case ie.Left:e.isFinal?(this.updateSlider({value:0,instant:!1}),this.verticalPan(e)):this.updateSlider({value:e.deltaY,instant:!0});break;case ie.Top:case ie.Bottom:e.isFinal?(this.updateSlider({value:0,instant:!1}),this.horizontalPan(e)):this.updateSlider({value:e.deltaX,instant:!0})}}freeMode(e){switch(this.config.thumbPosition){case ie.Right:case ie.Left:this.updateSlider({value:this._freeModeCurrentOffset+e.deltaY,instant:!0}),e.isFinal&&(this.minFreeScrollExceeded(e.deltaY,this.config.thumbWidth,this.config.thumbHeight)?this._freeModeCurrentOffset=-(this.state.items.length-1-this.state.currIndex)*this.config.thumbHeight:this.maxFreeScrollExceeded(e.deltaY,this.config.thumbHeight,this.config.thumbWidth)?this._freeModeCurrentOffset=this.state.currIndex*this.config.thumbHeight:this._freeModeCurrentOffset+=e.deltaY,this.updateSlider({value:this._freeModeCurrentOffset,instant:!1}));break;case ie.Top:case ie.Bottom:this.updateSlider({value:this._freeModeCurrentOffset+e.deltaX,instant:!0}),e.isFinal&&(this.minFreeScrollExceeded(e.deltaX,this.config.thumbHeight,this.config.thumbWidth)?this._freeModeCurrentOffset=-(this.state.items.length-1-this.state.currIndex)*this.config.thumbWidth:this.maxFreeScrollExceeded(e.deltaX,this.config.thumbWidth,this.config.thumbHeight)?this._freeModeCurrentOffset=this.state.currIndex*this.config.thumbWidth:this._freeModeCurrentOffset+=e.deltaX,this.updateSlider({value:this._freeModeCurrentOffset,instant:!1}))}}minFreeScrollExceeded(e,o,c){return-(this._freeModeCurrentOffset+e-o/2)>(this.state.items.length-this.state.currIndex)*c}maxFreeScrollExceeded(e,o,c){return this._freeModeCurrentOffset+e>this.state.currIndex*o+c/2}getSliderStyles(e){const o=this.state.currIndex,c=this.state.items.length,{thumbWidth:u,thumbHeight:g}=this.config;let y;switch(this.config.thumbPosition){case ie.Top:case ie.Bottom:if("contain"===(this.width="100%",this.height=this.config.thumbHeight+"px",this.config.thumbView)){const C=this._el.nativeElement.clientWidth,S=c*u-C;C>c*u?this.thumbnailsLessThanSlider=!0:(this.thumbnailsLessThanSlider=!1,y=o*u+u/2>C/2?-Math.min(o*u+u/2-C/2,S):0)}else y=-o*u-(u/2-e.value);return{transform:`translate3d(${y}px, 0, 0)`,width:c*u+"px",height:"100%"};case ie.Left:case ie.Right:if("contain"===(this.width=this.config.thumbWidth+"px",this.height="100%",this.config.thumbView)){const C=this._el.nativeElement.clientHeight,S=c*g-C;C>c*g?this.thumbnailsLessThanSlider=!0:(this.thumbnailsLessThanSlider=!1,y=o*g+g/2>C/2?-Math.min(o*g+g/2-C/2,S):0)}else y=-o*g-(g/2-e.value);return{transform:`translate3d(0, ${y}px, 0)`,width:"100%",height:c*g+"px"}}}verticalPan(e){!(e.direction&Hammer.DIRECTION_VERTICAL&&e.offsetDirection&Hammer.DIRECTION_VERTICAL)||(e.velocityY>.3?this.prev():e.velocityY<-.3||e.deltaY/2<=-this.config.thumbHeight*this.state.items.length/this.config.panSensitivity?this.next():e.deltaY/2>=this.config.thumbHeight*this.state.items.length/this.config.panSensitivity?this.prev():this.action.emit(this.state.currIndex))}horizontalPan(e){!(e.direction&Hammer.DIRECTION_HORIZONTAL&&e.offsetDirection&Hammer.DIRECTION_HORIZONTAL)||(e.velocityX>.3?this.prev():e.velocityX<-.3||e.deltaX/2<=-this.config.thumbWidth*this.state.items.length/this.config.panSensitivity?this.next():e.deltaX/2>=this.config.thumbWidth*this.state.items.length/this.config.panSensitivity?this.prev():this.action.emit(this.state.currIndex))}next(){this.action.emit("next")}prev(){this.action.emit("prev")}updateSlider(e){const o={...this._slidingWorker$.value,...e};this._slidingWorker$.next(o)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.SBq),r.Y36(r.R0b))},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-thumbs"]],viewQuery:function(e,o){if(1&e&&r.Gf(Ot,7),2&e){let c;r.iGM(c=r.CRH())&&(o.sliderEl=c.first)}},hostVars:4,hostBindings:function(e,o){2&e&&r.Udp("height",o.height)("width",o.width)},inputs:{state:"state",config:"config"},outputs:{action:"action",thumbClick:"thumbClick",error:"error"},features:[r.TTD],decls:4,vars:5,consts:[[1,"g-thumbs-container"],[1,"g-slider"],["slider",""],[3,"type","config","data","currIndex","index","tapClickDisabled","tapClick","error",4,"ngFor","ngForOf"],[3,"type","config","data","currIndex","index","tapClickDisabled","tapClick","error"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0)(1,"div",1,2),r.YNc(3,z,1,6,"gallery-thumb",3),r.qZA()()),2&e&&(r.xp6(1),r.ekj("g-contain",o.config.thumbView===o.thumbnailsView.Contain)("g-contain-small-content",o.thumbnailsLessThanSlider),r.xp6(2),r.Q6J("ngForOf",o.state.items))},dependencies:[R.sg,Qt,ye],encapsulation:2,changeDetection:0}),n})(),ft=(()=>{class n{constructor(){this.action=new r.vpe,this.itemClick=new r.vpe,this.thumbClick=new r.vpe,this.error=new r.vpe}get thumbPosition(){return this.config.thumbPosition}get slidingDirection(){return this.config.slidingDirection}get disableThumb(){return this.config.disableThumb}get imageSize(){return this.config.imageSize}get dotsPosition(){return this.config.dotsPosition}get counterPosition(){return this.config.counterPosition}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery-core"]],hostVars:6,hostBindings:function(e,o){2&e&&r.uIk("thumbPosition",o.thumbPosition)("slidingDirection",o.slidingDirection)("disableThumb",o.disableThumb)("imageSize",o.imageSize)("dotsPosition",o.dotsPosition)("counterPosition",o.counterPosition)},inputs:{state:"state",config:"config"},outputs:{action:"action",itemClick:"itemClick",thumbClick:"thumbClick",error:"error"},decls:6,vars:6,consts:[[3,"state","config","action","thumbClick",4,"ngIf"],[1,"g-box"],[3,"state","config","action","itemClick","error"],[3,"state","config","action",4,"ngIf"],[3,"state",4,"ngIf"],[3,"state","config","action","thumbClick"],[3,"state","config","action"],[3,"state"]],template:function(e,o){1&e&&(r.YNc(0,dt,1,2,"gallery-thumbs",0),r.TgZ(1,"div",1)(2,"gallery-slider",2),r.NdJ("action",function(u){return o.action.emit(u)})("itemClick",function(u){return o.itemClick.emit(u)})("error",function(u){return o.error.emit(u)}),r.YNc(3,De,1,2,"gallery-nav",3),r.qZA(),r.YNc(4,$e,1,2,"gallery-dots",3),r.YNc(5,ne,1,1,"gallery-counter",4),r.qZA()),2&e&&(r.Q6J("ngIf",o.config.thumb),r.xp6(2),r.Q6J("state",o.state)("config",o.config),r.xp6(1),r.Q6J("ngIf",o.config.nav&&o.state.items.length>1),r.xp6(1),r.Q6J("ngIf",o.config.dots),r.xp6(1),r.Q6J("ngIf",o.config.counter))},dependencies:[R.O5,Rt,it,nt,st,Jt],encapsulation:2,changeDetection:0}),n})(),E=(()=>{class n{constructor(e){this._gallery=e,this.nav=this._gallery.config.nav,this.dots=this._gallery.config.dots,this.loop=this._gallery.config.loop,this.thumb=this._gallery.config.thumb,this.zoomOut=this._gallery.config.zoomOut,this.counter=this._gallery.config.counter,this.dotsSize=this._gallery.config.dotsSize,this.autoPlay=this._gallery.config.autoPlay,this.gestures=this._gallery.config.gestures,this.thumbWidth=this._gallery.config.thumbWidth,this.thumbHeight=this._gallery.config.thumbHeight,this.disableThumb=this._gallery.config.disableThumb,this.panSensitivity=this._gallery.config.panSensitivity,this.playerInterval=this._gallery.config.playerInterval,this.reserveGesturesAction=this._gallery.config.reserveGesturesAction,this.itemTemplate=this._gallery.config.itemTemplate,this.thumbTemplate=this._gallery.config.thumbTemplate,this.thumbMode=this._gallery.config.thumbMode,this.imageSize=this._gallery.config.imageSize,this.dotsPosition=this._gallery.config.dotsPosition,this.counterPosition=this._gallery.config.counterPosition,this.slidingDirection=this._gallery.config.slidingDirection,this.loadingStrategy=this._gallery.config.loadingStrategy,this.thumbPosition=this._gallery.config.thumbPosition,this.thumbView=this._gallery.config.thumbView,this.destroyRef=!0,this.skipInitConfig=!1,this.itemClick=new r.vpe,this.thumbClick=new r.vpe,this.playingChange=new r.vpe,this.indexChange=new r.vpe,this.itemsChange=new r.vpe,this.error=new r.vpe,this._itemClick$=ue.w0.EMPTY,this._thumbClick$=ue.w0.EMPTY,this._itemChange$=ue.w0.EMPTY,this._indexChange$=ue.w0.EMPTY,this._playingChange$=ue.w0.EMPTY,this._playerListener$=ue.w0.EMPTY}getConfig(){return{nav:this.nav,dots:this.dots,loop:this.loop,thumb:this.thumb,zoomOut:this.zoomOut,counter:this.counter,autoPlay:this.autoPlay,gestures:this.gestures,dotsSize:this.dotsSize,imageSize:this.imageSize,thumbMode:this.thumbMode,thumbView:this.thumbView,thumbWidth:this.thumbWidth,thumbHeight:this.thumbHeight,disableThumb:this.disableThumb,dotsPosition:this.dotsPosition,itemTemplate:this.itemTemplate,thumbTemplate:this.thumbTemplate,thumbPosition:this.thumbPosition,panSensitivity:this.panSensitivity,playerInterval:this.playerInterval,counterPosition:this.counterPosition,loadingStrategy:this.loadingStrategy,slidingDirection:this.slidingDirection,reserveGesturesAction:this.reserveGesturesAction}}onAction(e){switch(e){case"next":this.galleryRef.next();break;case"prev":this.galleryRef.prev();break;default:this.galleryRef.set(e)}}ngOnChanges(e){this.galleryRef&&(this.galleryRef.setConfig(this.getConfig()),e.items&&e.items.currentValue!==e.items.previousValue&&this.load(this.items))}ngOnInit(){this.galleryRef=this.skipInitConfig?this._gallery.ref(this.id):this._gallery.ref(this.id,this.getConfig()),this.load(this.items),this._playerListener$=this.galleryRef.activatePlayer().subscribe(),this.indexChange.observed&&(this._indexChange$=this.galleryRef.indexChanged.subscribe(e=>this.indexChange.emit(e))),this.itemsChange.observed&&(this._itemChange$=this.galleryRef.itemsChanged.subscribe(e=>this.itemsChange.emit(e))),this.playingChange.observed&&(this._playingChange$=this.galleryRef.playingChanged.subscribe(e=>this.playingChange.emit(e))),this.autoPlay&&this.play()}ngOnDestroy(){this._itemClick$.unsubscribe(),this._thumbClick$.unsubscribe(),this._itemChange$.unsubscribe(),this._indexChange$.unsubscribe(),this._playingChange$.unsubscribe(),this._playerListener$.unsubscribe(),this.destroyRef&&this.galleryRef.destroy()}onItemClick(e){this.itemClick.emit(e),this.galleryRef.itemClick.next(e)}onThumbClick(e){this.galleryRef.set(e),this.thumbClick.emit(e),this.galleryRef.thumbClick.next(e)}onError(e){this.error.emit(e),this.galleryRef.error.next(e)}load(e){this.galleryRef.load(e)}add(e,o){this.galleryRef.add(e,o)}addImage(e,o){this.add(new mt(e),o)}addVideo(e,o){this.add(new At(e),o)}addIframe(e,o){this.add(new Mt(e),o)}addYoutube(e,o){this.add(new Pt(e),o)}remove(e){this.galleryRef.remove(e)}next(){this.galleryRef.next()}prev(){this.galleryRef.prev()}set(e){this.galleryRef.set(e)}reset(){this.galleryRef.reset()}play(e){this.galleryRef.play(e)}stop(){this.galleryRef.stop()}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(gt))},n.\u0275cmp=r.Xpm({type:n,selectors:[["gallery"]],inputs:{id:"id",items:"items",nav:"nav",dots:"dots",loop:"loop",thumb:"thumb",zoomOut:"zoomOut",counter:"counter",dotsSize:"dotsSize",autoPlay:"autoPlay",gestures:"gestures",thumbWidth:"thumbWidth",thumbHeight:"thumbHeight",disableThumb:"disableThumb",panSensitivity:"panSensitivity",playerInterval:"playerInterval",reserveGesturesAction:"reserveGesturesAction",itemTemplate:"itemTemplate",thumbTemplate:"thumbTemplate",thumbMode:"thumbMode",imageSize:"imageSize",dotsPosition:"dotsPosition",counterPosition:"counterPosition",slidingDirection:"slidingDirection",loadingStrategy:"loadingStrategy",thumbPosition:"thumbPosition",thumbView:"thumbView",destroyRef:"destroyRef",skipInitConfig:"skipInitConfig"},outputs:{itemClick:"itemClick",thumbClick:"thumbClick",playingChange:"playingChange",indexChange:"indexChange",itemsChange:"itemsChange",error:"error"},features:[r.TTD],ngContentSelectors:Je,decls:4,vars:6,consts:[[3,"state","config","action","itemClick","thumbClick","error"]],template:function(e,o){1&e&&(r.F$t(),r.TgZ(0,"gallery-core",0),r.NdJ("action",function(u){return o.onAction(u)})("itemClick",function(u){return o.onItemClick(u)})("thumbClick",function(u){return o.onThumbClick(u)})("error",function(u){return o.onError(u)}),r.ALo(1,"async"),r.ALo(2,"async"),r.qZA(),r.Hsn(3)),2&e&&r.Q6J("state",r.lcZ(1,2,o.galleryRef.state))("config",r.lcZ(2,4,o.galleryRef.config))},dependencies:[ft,R.Ov],styles:['gallery-core[dotsPosition=top] gallery-dots{top:0}  gallery-core[dotsPosition=bottom] gallery-dots{bottom:0}  gallery-dots{margin:7px;position:absolute;left:50%;transform:translate(-50%)}  .g-dot{cursor:pointer;z-index:20}  .g-dot:hover .g-dot-inner{opacity:1}  .g-dot-active .g-dot-inner{opacity:1;transform:scale(1.5)!important}  .g-dot-inner{background-color:#fff;opacity:.6;width:30%;height:30%;border-radius:50%;box-shadow:0 0 1px #000;transition:all ease .2s}  gallery-dots,   .g-dot,   .g-dot-inner{display:flex;justify-content:center;align-items:center}  .g-nav-next,   .g-nav-prev{position:absolute;top:50%;width:30px;height:40px;cursor:pointer;z-index:999}  .g-nav-next{right:.5em;transform:translateY(-50%) perspective(1px)}  .g-nav-prev{left:.5em;transform:translateY(-50%) perspective(1px) scale(-1)}@media only screen and (max-width: 480px){  .g-nav-next{right:.2em}  .g-nav-prev{left:.2em}}  .g-items-container{height:100%}  .g-slider{position:absolute;transition:transform .4s cubic-bezier(.5,0,.5,1)}  gallery-core[slidingDirection=horizontal] .g-slider{flex-direction:row}  gallery-core[slidingDirection=vertical] .g-slider{flex-direction:column}  gallery-thumbs{display:block;z-index:1;overflow:visible;overflow:initial}  .g-thumbs-container{position:relative;z-index:206;width:100%;height:100%;left:0;top:0;display:flex;overflow:visible;overflow:initial}  gallery-core[disableThumb=true] gallery-thumb{cursor:default}  gallery-core[thumbPosition=top] gallery-thumbs .g-slider,   gallery-core[thumbPosition=bottom] gallery-thumbs .g-slider{flex-direction:row;top:0;left:50%}  gallery-core[thumbPosition=top] gallery-thumbs .g-slider.g-contain,   gallery-core[thumbPosition=bottom] gallery-thumbs .g-slider.g-contain{left:0}  gallery-core[thumbPosition=top] gallery-thumbs .g-slider.g-contain.g-contain-small-content,   gallery-core[thumbPosition=bottom] gallery-thumbs .g-slider.g-contain.g-contain-small-content{left:50%;transform:translate3d(-50%,0,0)!important}  gallery-core[thumbPosition=top] gallery-thumb,   gallery-core[thumbPosition=bottom] gallery-thumb{padding:1px 0 1px 1px}  gallery-core[thumbPosition=left] gallery-thumbs .g-slider,   gallery-core[thumbPosition=right] gallery-thumbs .g-slider{flex-direction:column;top:50%;left:0}  gallery-core[thumbPosition=left] gallery-thumbs .g-slider.g-contain,   gallery-core[thumbPosition=right] gallery-thumbs .g-slider.g-contain{top:0}  gallery-core[thumbPosition=left] gallery-thumbs .g-slider.g-contain.g-contain-small-content,   gallery-core[thumbPosition=right] gallery-thumbs .g-slider.g-contain.g-contain-small-content{top:50%;transform:translate3d(0,-50%,0)!important}  gallery-core[thumbPosition=left] gallery-thumb,   gallery-core[thumbPosition=right] gallery-thumb{padding:0 1px 1px}  gallery-core[thumbPosition=top]{flex-direction:column}  gallery-core[thumbPosition=left]{flex-direction:row}  gallery-core[thumbPosition=right]{flex-direction:row-reverse}  gallery-core[thumbPosition=bottom]{flex-direction:column-reverse}  gallery-thumb.g-active-thumb .g-thumb-loading{background-color:#464646}  .g-thumb-loading{position:relative;overflow:hidden;height:100%;background-color:#262626}  .g-thumb-loading:before{content:"";position:absolute;top:0;right:0;bottom:0;left:50%;z-index:1;width:500%;margin-left:-250%;-webkit-animation:phAnimation .8s linear infinite;animation:phAnimation .8s linear infinite;background:linear-gradient(to right,rgba(255,255,255,0) 46%,rgba(255,255,255,.35) 50%,rgba(255,255,255,0) 54%) 50% 50%}@-webkit-keyframes phAnimation{0%{transform:translate3d(-30%,0,0)}to{transform:translate3d(30%,0,0)}}@keyframes phAnimation{0%{transform:translate3d(-30%,0,0)}to{transform:translate3d(30%,0,0)}}  gallery-core[counterPosition=top] .g-counter{top:0;border-bottom-left-radius:4px;border-bottom-right-radius:4px}  gallery-core[counterPosition=bottom] .g-counter{bottom:0;border-top-left-radius:4px;border-top-right-radius:4px}  .g-counter{z-index:50;position:absolute;left:50%;transform:translate(-50%) perspective(1px);font-size:12px;padding:4px 10px;color:#fff;background-color:#00000080}  gallery[gallerize] gallery-item{cursor:pointer}  gallery-item,   gallery-thumb{position:relative;height:100%;width:100%;display:block;overflow:hidden}  gallery-item h2,   gallery-item h4,   gallery-thumb h2,   gallery-thumb h4{color:coral;margin:0}  gallery-item h2,   gallery-thumb h2{font-size:3.5em;margin-bottom:.3em}  gallery-item h4,   gallery-thumb h4{font-size:1.6em}  gallery-item{z-index:10}  gallery-item video,   gallery-item iframe{position:absolute;width:100%;height:100%}  gallery-thumb{opacity:.5;cursor:pointer;transition:opacity .3s cubic-bezier(.5,0,.5,1)}  gallery-thumb.g-active-thumb{opacity:1}  .g-image-item{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;pointer-events:none}  .g-template,   .g-image-error-message{position:absolute;z-index:10;left:0;top:0;right:0;bottom:0;color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column}  .g-loading{position:absolute;transform:translate3d(-50%,-50%,0);left:50%;top:50%;width:80px;height:80px}  gallery-core[imageSize=contain] gallery-slider .g-image-item{-o-object-fit:contain;object-fit:contain}  gallery-image{display:flex;justify-content:center;align-items:center;height:100%}  gallery{position:relative;z-index:1;overflow:hidden;display:block;height:500px;background-color:#000}  gallery *{box-sizing:border-box}  gallery,   gallery-core{position:relative;overflow:hidden}  gallery-core,   .g-box,   .g-slider{display:flex;height:100%;width:100%}  gallery[fluid]{transform:translate(-50vw);width:100vw;left:50%}  gallery[fluid][fluid=false]{transform:none;width:auto;width:initial;left:auto;left:initial}  .g-no-transition{transition:none 0s ease 0s!important;transition:initial!important}  .g-box,   gallery-slider{overflow:hidden;position:relative;display:flex;flex-direction:column;flex:1;order:1;height:100%}  gallery-nav svg,   .g-btn-close svg{width:100%;height:100%;filter:drop-shadow(0px 0px 1px black);transition:opacity linear .2s;opacity:.6}  gallery-nav svg:hover,   .g-btn-close svg:hover{opacity:1}'],changeDetection:0}),n})(),Lt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Le,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[R.ez]}),n})();try{yt=typeof Intl<"u"&&Intl.v8BreakIterator}catch{yt=!1}let he,N=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?(0,R.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yt)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(r.Lbi))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bt(){if(null==he){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return he=!1,he;if("scrollBehavior"in document.documentElement.style)he=!0;else{const n=Element.prototype.scrollTo;he=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return he}function wt(n){return n.composedPath?n.composedPath()[0]:n.target}function Ue(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var vi=F(5698);let hn=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({providers:[hn]}),n})();function ri(n){return Array.isArray(n)?n:[n]}function re(n){return null==n?"":"string"==typeof n?n:`${n}px`}var mn=F(9841),gn=F(7272),yn=F(8675),_n=F(5032);function Ai(n){return(0,qe.e)((t,e)=>{(0,lt.Xf)(n).subscribe((0,We.x)(e,()=>e.complete(),_n.Z)),!e.closed&&t.subscribe(e)})}const Mi=new Set;let St,vn=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Cn}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function bn(n){if(!Mi.has(n))try{St||(St=document.createElement("style"),St.setAttribute("type","text/css"),document.head.appendChild(St)),St.sheet&&(St.sheet.insertRule(`@media ${n} {body{ }}`,0),Mi.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(N))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Cn(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let wn=(()=>{class n{constructor(e,o){this._mediaMatcher=e,this._zone=o,this._queries=new Map,this._destroySubject=new ce.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return Pi(ri(e)).some(c=>this._registerQuery(c).mql.matches)}observe(e){const c=Pi(ri(e)).map(g=>this._registerQuery(g).observable);let u=(0,mn.a)(c);return u=(0,gn.z)(u.pipe((0,vi.q)(1)),u.pipe(function fn(n){return(0,ze.h)((t,e)=>n<=e)}(1),kt(0))),u.pipe((0,Se.U)(g=>{const y={matches:!1,breakpoints:{}};return g.forEach(({matches:C,query:S})=>{y.matches=y.matches||C,y.breakpoints[S]=C}),y}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const o=this._mediaMatcher.matchMedia(e),u={observable:new Ye.y(g=>{const y=C=>this._zone.run(()=>g.next(C));return o.addListener(y),()=>{o.removeListener(y)}}).pipe((0,yn.O)(o),(0,Se.U)(({matches:g})=>({query:e,matches:g})),Ai(this._destroySubject)),mql:o};return this._queries.set(e,u),u}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(vn),r.LFG(r.R0b))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Pi(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}let Tn=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function xn(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const o=function kn(n){try{return n.frameElement}catch{return null}}(function Ln(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(o&&(-1===Fi(o)||!this.isVisible(o)))return!1;let c=e.nodeName.toLowerCase(),u=Fi(e);return e.hasAttribute("contenteditable")?-1!==u:!("iframe"===c||"object"===c||this._platform.WEBKIT&&this._platform.IOS&&!function Dn(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===c?!!e.hasAttribute("controls")&&-1!==u:"video"===c?-1!==u&&(null!==u||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,o){return function Rn(n){return!function On(n){return function Mn(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function In(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function An(n){return function Pn(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||Li(n))}(e)&&!this.isDisabled(e)&&(o?.ignoreVisibility||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(N))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Li(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function Fi(n){if(!Li(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class Nn extends class Fn{constructor(t,e,o,c,u=!1){this._element=t,this._checker=e,this._ngZone=o,this._document=c,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,u||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const o=this._getFirstTabbableElement(e);return o?.focus(t),!!o}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let o=0;o<e.length;o++){const c=e[o].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[o]):null;if(c)return c}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let o=e.length-1;o>=0;o--){const c=e[o].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[o]):null;if(c)return c}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,vi.q)(1)).subscribe(t)}}{constructor(t,e,o,c,u,g,y){super(t,e,o,c,y.defer),this._focusTrapManager=u,this._inertStrategy=g,this._focusTrapManager.register(this)}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._enabled?this._focusTrapManager.register(this):this._focusTrapManager.deregister(this)}destroy(){this._focusTrapManager.deregister(this),super.destroy()}_enable(){this._inertStrategy.preventFocus(this),this.toggleAnchors(!0)}_disable(){this._inertStrategy.allowFocus(this),this.toggleAnchors(!1)}}const Bn=new r.OlP("FOCUS_TRAP_INERT_STRATEGY");class Vn{constructor(){this._listener=null}preventFocus(t){this._listener&&t._document.removeEventListener("focus",this._listener,!0),this._listener=e=>this._trapFocus(t,e),t._ngZone.runOutsideAngular(()=>{t._document.addEventListener("focus",this._listener,!0)})}allowFocus(t){!this._listener||(t._document.removeEventListener("focus",this._listener,!0),this._listener=null)}_trapFocus(t,e){const o=e.target,c=t._element;o&&!c.contains(o)&&!o.closest?.("div.cdk-overlay-pane")&&setTimeout(()=>{t.enabled&&!c.contains(t._document.activeElement)&&t.focusFirstTabbableElement()})}}let Hn=(()=>{class n{constructor(){this._focusTrapStack=[]}register(e){this._focusTrapStack=this._focusTrapStack.filter(c=>c!==e);let o=this._focusTrapStack;o.length&&o[o.length-1]._disable(),o.push(e),e._enable()}deregister(e){e._disable();const o=this._focusTrapStack,c=o.indexOf(e);-1!==c&&(o.splice(c,1),o.length&&o[o.length-1]._enable())}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zn=(()=>{class n{constructor(e,o,c,u,g){this._checker=e,this._ngZone=o,this._focusTrapManager=c,this._document=u,this._inertStrategy=g||new Vn}create(e,o={defer:!1}){let c;return c="boolean"==typeof o?{defer:o}:o,new Nn(e,this._checker,this._ngZone,this._document,this._focusTrapManager,this._inertStrategy,c)}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(Tn),r.LFG(r.R0b),r.LFG(Hn),r.LFG(R.K0),r.LFG(Bn,8))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ni="cdk-high-contrast-black-on-white",Bi="cdk-high-contrast-white-on-black",bi="cdk-high-contrast-active";let jn=(()=>{class n{constructor(e,o){this._platform=e,this._document=o,this._breakpointSubscription=(0,r.f3M)(wn).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const o=this._document.defaultView||window,c=o&&o.getComputedStyle?o.getComputedStyle(e):null,u=(c&&c.backgroundColor||"").replace(/ /g,"");switch(e.remove(),u){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(bi,Ni,Bi),this._hasCheckedHighContrastMode=!0;const o=this.getHighContrastMode();1===o?e.add(bi,Ni):2===o&&e.add(bi,Bi)}}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(N),r.LFG(R.K0))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$n=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(jn))},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[dn]}),n})();class Ci{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Vi extends Ci{constructor(t,e,o,c){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=c}}class Un extends Ci{constructor(t,e,o,c){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o,this.injector=c}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Yn extends Ci{constructor(t){super(),this.element=t instanceof r.SBq?t.nativeElement:t}}class Zn extends class Wn{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Vi?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Un?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Yn?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,o,c,u){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=c,this.attachDomPortal=g=>{const y=g.element,C=this._document.createComment("dom-portal");y.parentNode.insertBefore(C,y),this.outletElement.appendChild(y),this._attachedPortal=g,super.setDisposeFn(()=>{C.parentNode&&C.parentNode.replaceChild(y,C)})},this._document=u}attachComponentPortal(t){const o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let c;return t.viewContainerRef?(c=t.viewContainerRef.createComponent(o,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>c.destroy())):(c=o.create(t.injector||this._defaultInjector||r.zs3.NULL),this._appRef.attachView(c.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(c.hostView),c.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(c)),this._attachedPortal=t,c}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return o.rootNodes.forEach(c=>this.outletElement.appendChild(c)),o.detectChanges(),this.setDisposeFn(()=>{let c=e.indexOf(o);-1!==c&&e.remove(c)}),this._attachedPortal=t,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Xn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({}),n})();var Hi=F(4408);const Ht={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:o}=Ht;o&&(t=o.requestAnimationFrame,e=o.cancelAnimationFrame);const c=t(u=>{e=void 0,n(u)});return new ue.w0(()=>e?.(c))},requestAnimationFrame(...n){const{delegate:t}=Ht;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Ht;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var zi=F(640);new class Kn extends zi.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let c;t=t||o.shift();do{if(c=t.execute(t.state,t.delay))break}while((t=o[0])&&t.id===e&&o.shift());if(this._active=!1,c){for(;(t=o[0])&&t.id===e&&o.shift();)t.unsubscribe();throw c}}}(class qn extends Hi.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=Ht.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,o=0){var c;if(null!=o?o>0:this.delay>0)return super.recycleAsyncId(t,e,o);const{actions:u}=t;null!=e&&(null===(c=u[u.length-1])||void 0===c?void 0:c.id)!==e&&(Ht.cancelAnimationFrame(e),t._scheduled=void 0)}});let wi,Jn=1;const ai={};function Gi(n){return n in ai&&(delete ai[n],!0)}const es={setImmediate(n){const t=Jn++;return ai[t]=!0,wi||(wi=Promise.resolve()),wi.then(()=>Gi(t)&&n()),t},clearImmediate(n){Gi(n)}},{setImmediate:ts,clearImmediate:is}=es,li={setImmediate(...n){const{delegate:t}=li;return(t?.setImmediate||ts)(...n)},clearImmediate(n){const{delegate:t}=li;return(t?.clearImmediate||is)(n)},delegate:void 0};new class ss extends zi.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:o}=this;let c;t=t||o.shift();do{if(c=t.execute(t.state,t.delay))break}while((t=o[0])&&t.id===e&&o.shift());if(this._active=!1,c){for(;(t=o[0])&&t.id===e&&o.shift();)t.unsubscribe();throw c}}}(class ns extends Hi.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,o=0){return null!==o&&o>0?super.requestAsyncId(t,e,o):(t.actions.push(this),t._scheduled||(t._scheduled=li.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,o=0){var c;if(null!=o?o>0:this.delay>0)return super.recycleAsyncId(t,e,o);const{actions:u}=t;null!=e&&(null===(c=u[u.length-1])||void 0===c?void 0:c.id)!==e&&(li.clearImmediate(e),t._scheduled=void 0)}});var as=F(5963);function ji(n,t=Oe.z){return function rs(n){return(0,qe.e)((t,e)=>{let o=!1,c=null,u=null,g=!1;const y=()=>{if(u?.unsubscribe(),u=null,o){o=!1;const S=c;c=null,e.next(S)}g&&e.complete()},C=()=>{u=null,g&&e.complete()};t.subscribe((0,We.x)(e,S=>{o=!0,c=S,u||(0,lt.Xf)(n(S)).subscribe(u=(0,We.x)(e,y,C))},()=>{g=!0,(!o||!u||u.closed)&&e.complete()}))})}(()=>(0,as.H)(n,t))}const ls=new r.OlP("cdk-dir-doc",{providedIn:"root",factory:function cs(){return(0,r.f3M)(R.K0)}}),hs=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let us=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new r.vpe,e){const c=e.documentElement?e.documentElement.dir:null;this.value=function ds(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?hs.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||c||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(ls,8))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ei=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({}),n})(),ms=(()=>{class n{constructor(e,o,c){this._ngZone=e,this._platform=o,this._scrolled=new ce.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=c}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const o=this.scrollContainers.get(e);o&&(o.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Ye.y(o=>{this._globalSubscription||this._addGlobalListener();const c=e>0?this._scrolled.pipe(ji(e)).subscribe(o):this._scrolled.subscribe(o);return this._scrolledCount++,()=>{c.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Tt.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,o)=>this.deregister(o)),this._scrolled.complete()}ancestorScrolled(e,o){const c=this.getAncestorScrollContainers(e);return this.scrolled(o).pipe((0,ze.h)(u=>!u||c.indexOf(u)>-1))}getAncestorScrollContainers(e){const o=[];return this.scrollContainers.forEach((c,u)=>{this._scrollableContainsElement(u,e)&&o.push(u)}),o}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,o){let c=function pn(n){return n instanceof r.SBq?n.nativeElement:n}(o),u=e.getElementRef().nativeElement;do{if(c==u)return!0}while(c=c.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const e=this._getWindow();return(0,He.R)(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(r.R0b),r.LFG(N),r.LFG(R.K0,8))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$i=(()=>{class n{constructor(e,o,c){this._platform=e,this._change=new ce.x,this._changeListener=u=>{this._change.next(u)},this._document=c,o.runOutsideAngular(()=>{if(e.isBrowser){const u=this._getWindow();u.addEventListener("resize",this._changeListener),u.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:o,height:c}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+c,right:e.left+o,height:c,width:o}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,o=this._getWindow(),c=e.documentElement,u=c.getBoundingClientRect();return{top:-u.top||e.body.scrollTop||o.scrollY||c.scrollTop||0,left:-u.left||e.body.scrollLeft||o.scrollX||c.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(ji(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(N),r.LFG(r.R0b),r.LFG(R.K0,8))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ui=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({}),n})(),Yi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[Ei,Ui,Ei,Ui]}),n})();var fs=F(6451);const Wi=bt();class ys{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=re(-this._previousScrollPosition.left),t.style.top=re(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,o=t.style,c=this._document.body.style,u=o.scrollBehavior||"",g=c.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Wi&&(o.scrollBehavior=c.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Wi&&(o.scrollBehavior=u,c.scrollBehavior=g)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,o=this._viewportRuler.getViewportSize();return e.scrollHeight>o.height||e.scrollWidth>o.width}}class _s{constructor(t,e,o,c){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=o,this._config=c,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Zi{enable(){}disable(){}attach(){}}function Si(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function Xi(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class vs{constructor(t,e,o,c){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=o,this._config=c,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:c}=this._viewportRuler.getViewportSize();Si(e,[{width:o,height:c,bottom:c,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let bs=(()=>{class n{constructor(e,o,c,u){this._scrollDispatcher=e,this._viewportRuler=o,this._ngZone=c,this.noop=()=>new Zi,this.close=g=>new _s(this._scrollDispatcher,this._ngZone,this._viewportRuler,g),this.block=()=>new ys(this._viewportRuler,this._document),this.reposition=g=>new vs(this._scrollDispatcher,this._viewportRuler,this._ngZone,g),this._document=u}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(ms),r.LFG($i),r.LFG(r.R0b),r.LFG(R.K0))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Cs{constructor(t){if(this.scrollStrategy=new Zi,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const o of e)void 0!==t[o]&&(this[o]=t[o])}}}class ws{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let qi=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const o=this._attachedOverlays.indexOf(e);o>-1&&this._attachedOverlays.splice(o,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(R.K0))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Es=(()=>{class n extends qi{constructor(e,o){super(e),this._ngZone=o,this._keydownListener=c=>{const u=this._attachedOverlays;for(let g=u.length-1;g>-1;g--)if(u[g]._keydownEvents.observers.length>0){const y=u[g]._keydownEvents;this._ngZone?this._ngZone.run(()=>y.next(c)):y.next(c);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(R.K0),r.LFG(r.R0b,8))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ss=(()=>{class n extends qi{constructor(e,o,c){super(e),this._platform=o,this._ngZone=c,this._cursorStyleIsSet=!1,this._pointerDownListener=u=>{this._pointerDownEventTarget=wt(u)},this._clickListener=u=>{const g=wt(u),y="click"===u.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:g;this._pointerDownEventTarget=null;const C=this._attachedOverlays.slice();for(let S=C.length-1;S>-1;S--){const D=C[S];if(D._outsidePointerEvents.observers.length<1||!D.hasAttached())continue;if(D.overlayElement.contains(g)||D.overlayElement.contains(y))break;const Y=D._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Y.next(u)):Y.next(u)}}}add(e){if(super.add(e),!this._isAttached){const o=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(o)):this._addEventListeners(o),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=o.style.cursor,o.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(R.K0),r.LFG(N),r.LFG(r.R0b,8))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ki=(()=>{class n{constructor(e,o){this._platform=o,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Ue()){const c=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let u=0;u<c.length;u++)c[u].remove()}const o=this._document.createElement("div");o.classList.add(e),Ue()?o.setAttribute("platform","test"):this._platform.isBrowser||o.setAttribute("platform","server"),this._document.body.appendChild(o),this._containerElement=o}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(R.K0),r.LFG(N))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ts{constructor(t,e,o,c,u,g,y,C,S,D=!1){this._portalOutlet=t,this._host=e,this._pane=o,this._config=c,this._ngZone=u,this._keyboardDispatcher=g,this._document=y,this._location=C,this._outsideClickDispatcher=S,this._animationsDisabled=D,this._backdropElement=null,this._backdropClick=new ce.x,this._attachments=new ce.x,this._detachments=new ce.x,this._locationChanges=ue.w0.EMPTY,this._backdropClickHandler=Y=>this._backdropClick.next(Y),this._backdropTransitionendHandler=Y=>{this._disposeBackdrop(Y.target)},this._keydownEvents=new ce.x,this._outsidePointerEvents=new ce.x,c.scrollStrategy&&(this._scrollStrategy=c.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=c.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,vi.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=re(this._config.width),t.height=re(this._config.height),t.minWidth=re(this._config.minWidth),t.minHeight=re(this._config.minHeight),t.maxWidth=re(this._config.maxWidth),t.maxHeight=re(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,o){const c=ri(e||[]).filter(u=>!!u);c.length&&(o?t.classList.add(...c):t.classList.remove(...c))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Ai((0,fs.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Qi="cdk-overlay-connected-position-bounding-box",ks=/([A-Za-z%]+)$/;class xs{constructor(t,e,o,c,u){this._viewportRuler=e,this._document=o,this._platform=c,this._overlayContainer=u,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ce.x,this._resizeSubscription=ue.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Qi),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,o=this._viewportRect,c=this._containerRect,u=[];let g;for(let y of this._preferredPositions){let C=this._getOriginPoint(t,c,y),S=this._getOverlayPoint(C,e,y),D=this._getOverlayFit(S,e,o,y);if(D.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(y,C);this._canFitWithFlexibleDimensions(D,S,o)?u.push({position:y,origin:C,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(C,y)}):(!g||g.overlayFit.visibleArea<D.visibleArea)&&(g={overlayFit:D,overlayPoint:S,originPoint:C,position:y,overlayRect:e})}if(u.length){let y=null,C=-1;for(const S of u){const D=S.boundingBoxRect.width*S.boundingBoxRect.height*(S.position.weight||1);D>C&&(C=D,y=S)}return this._isPushed=!1,void this._applyPosition(y.position,y.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(g.position,g.originPoint);this._applyPosition(g.position,g.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&rt(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Qi),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,o){let c,u;if("center"==o.originX)c=t.left+t.width/2;else{const g=this._isRtl()?t.right:t.left,y=this._isRtl()?t.left:t.right;c="start"==o.originX?g:y}return e.left<0&&(c-=e.left),u="center"==o.originY?t.top+t.height/2:"top"==o.originY?t.top:t.bottom,e.top<0&&(u-=e.top),{x:c,y:u}}_getOverlayPoint(t,e,o){let c,u;return c="center"==o.overlayX?-e.width/2:"start"===o.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,u="center"==o.overlayY?-e.height/2:"top"==o.overlayY?0:-e.height,{x:t.x+c,y:t.y+u}}_getOverlayFit(t,e,o,c){const u=en(e);let{x:g,y}=t,C=this._getOffset(c,"x"),S=this._getOffset(c,"y");C&&(g+=C),S&&(y+=S);let Be=0-y,me=y+u.height-o.height,_e=this._subtractOverflows(u.width,0-g,g+u.width-o.width),Ie=this._subtractOverflows(u.height,Be,me),an=_e*Ie;return{visibleArea:an,isCompletelyWithinViewport:u.width*u.height===an,fitsInViewportVertically:Ie===u.height,fitsInViewportHorizontally:_e==u.width}}_canFitWithFlexibleDimensions(t,e,o){if(this._hasFlexibleDimensions){const c=o.bottom-e.y,u=o.right-e.x,g=Ji(this._overlayRef.getConfig().minHeight),y=Ji(this._overlayRef.getConfig().minWidth),S=t.fitsInViewportHorizontally||null!=y&&y<=u;return(t.fitsInViewportVertically||null!=g&&g<=c)&&S}return!1}_pushOverlayOnScreen(t,e,o){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const c=en(e),u=this._viewportRect,g=Math.max(t.x+c.width-u.width,0),y=Math.max(t.y+c.height-u.height,0),C=Math.max(u.top-o.top-t.y,0),S=Math.max(u.left-o.left-t.x,0);let D=0,Y=0;return D=c.width<=u.width?S||-g:t.x<this._viewportMargin?u.left-o.left-t.x:0,Y=c.height<=u.height?C||-y:t.y<this._viewportMargin?u.top-o.top-t.y:0,this._previousPushAmount={x:D,y:Y},{x:t.x+D,y:t.y+Y}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const o=this._getScrollVisibility(),c=new ws(t,o);this._positionChanges.next(c)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let o,c=t.overlayY;o="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let u=0;u<e.length;u++)e[u].style.transformOrigin=`${o} ${c}`}_calculateBoundingBoxRect(t,e){const o=this._viewportRect,c=this._isRtl();let u,g,y,D,Y,Be;if("top"===e.overlayY)g=t.y,u=o.height-g+this._viewportMargin;else if("bottom"===e.overlayY)y=o.height-t.y+2*this._viewportMargin,u=o.height-y+this._viewportMargin;else{const me=Math.min(o.bottom-t.y+o.top,t.y),_e=this._lastBoundingBoxSize.height;u=2*me,g=t.y-me,u>_e&&!this._isInitialRender&&!this._growAfterOpen&&(g=t.y-_e/2)}if("end"===e.overlayX&&!c||"start"===e.overlayX&&c)Be=o.width-t.x+this._viewportMargin,D=t.x-this._viewportMargin;else if("start"===e.overlayX&&!c||"end"===e.overlayX&&c)Y=t.x,D=o.right-t.x;else{const me=Math.min(o.right-t.x+o.left,t.x),_e=this._lastBoundingBoxSize.width;D=2*me,Y=t.x-me,D>_e&&!this._isInitialRender&&!this._growAfterOpen&&(Y=t.x-_e/2)}return{top:g,left:Y,bottom:y,right:Be,width:D,height:u}}_setBoundingBoxStyles(t,e){const o=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));const c={};if(this._hasExactPosition())c.top=c.left="0",c.bottom=c.right=c.maxHeight=c.maxWidth="",c.width=c.height="100%";else{const u=this._overlayRef.getConfig().maxHeight,g=this._overlayRef.getConfig().maxWidth;c.height=re(o.height),c.top=re(o.top),c.bottom=re(o.bottom),c.width=re(o.width),c.left=re(o.left),c.right=re(o.right),c.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",c.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",u&&(c.maxHeight=re(u)),g&&(c.maxWidth=re(g))}this._lastBoundingBoxSize=o,rt(this._boundingBox.style,c)}_resetBoundingBoxStyles(){rt(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){rt(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const o={},c=this._hasExactPosition(),u=this._hasFlexibleDimensions,g=this._overlayRef.getConfig();if(c){const D=this._viewportRuler.getViewportScrollPosition();rt(o,this._getExactOverlayY(e,t,D)),rt(o,this._getExactOverlayX(e,t,D))}else o.position="static";let y="",C=this._getOffset(e,"x"),S=this._getOffset(e,"y");C&&(y+=`translateX(${C}px) `),S&&(y+=`translateY(${S}px)`),o.transform=y.trim(),g.maxHeight&&(c?o.maxHeight=re(g.maxHeight):u&&(o.maxHeight="")),g.maxWidth&&(c?o.maxWidth=re(g.maxWidth):u&&(o.maxWidth="")),rt(this._pane.style,o)}_getExactOverlayY(t,e,o){let c={top:"",bottom:""},u=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,o)),"bottom"===t.overlayY?c.bottom=this._document.documentElement.clientHeight-(u.y+this._overlayRect.height)+"px":c.top=re(u.y),c}_getExactOverlayX(t,e,o){let g,c={left:"",right:""},u=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,o)),g=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===g?c.right=this._document.documentElement.clientWidth-(u.x+this._overlayRect.width)+"px":c.left=re(u.x),c}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),o=this._scrollables.map(c=>c.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Xi(t,o),isOriginOutsideView:Si(t,o),isOverlayClipped:Xi(e,o),isOverlayOutsideView:Si(e,o)}}_subtractOverflows(t,...e){return e.reduce((o,c)=>o-Math.max(c,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+t-this._viewportMargin,bottom:o.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&ri(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof r.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,o=t.height||0;return{top:t.y,bottom:t.y+o,left:t.x,right:t.x+e,height:o,width:e}}}function rt(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Ji(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(ks);return e&&"px"!==e?null:parseFloat(t)}return n||null}function en(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const tn="cdk-global-overlay-wrapper";class Is{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(tn),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:c,height:u,maxWidth:g,maxHeight:y}=o,C=!("100%"!==c&&"100vw"!==c||g&&"100%"!==g&&"100vw"!==g),S=!("100%"!==u&&"100vh"!==u||y&&"100%"!==y&&"100vh"!==y),D=this._xPosition,Y=this._xOffset,Be="rtl"===this._overlayRef.getConfig().direction;let me="",_e="",Ie="";C?Ie="flex-start":"center"===D?(Ie="center",Be?_e=Y:me=Y):Be?"left"===D||"end"===D?(Ie="flex-end",me=Y):("right"===D||"start"===D)&&(Ie="flex-start",_e=Y):"left"===D||"start"===D?(Ie="flex-start",me=Y):("right"===D||"end"===D)&&(Ie="flex-end",_e=Y),t.position=this._cssPosition,t.marginLeft=C?"0":me,t.marginTop=S?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=C?"0":_e,e.justifyContent=Ie,e.alignItems=S?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,o=e.style;e.classList.remove(tn),o.justifyContent=o.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Os=(()=>{class n{constructor(e,o,c,u){this._viewportRuler=e,this._document=o,this._platform=c,this._overlayContainer=u}global(){return new Is}flexibleConnectedTo(e){return new xs(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(r.LFG($i),r.LFG(R.K0),r.LFG(N),r.LFG(Ki))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),As=0,Ti=(()=>{class n{constructor(e,o,c,u,g,y,C,S,D,Y,Be,me){this.scrollStrategies=e,this._overlayContainer=o,this._componentFactoryResolver=c,this._positionBuilder=u,this._keyboardDispatcher=g,this._injector=y,this._ngZone=C,this._document=S,this._directionality=D,this._location=Y,this._outsideClickDispatcher=Be,this._animationsModuleType=me}create(e){const o=this._createHostElement(),c=this._createPaneElement(o),u=this._createPortalOutlet(c),g=new Cs(e);return g.direction=g.direction||this._directionality.value,new Ts(u,o,c,g,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const o=this._document.createElement("div");return o.id="cdk-overlay-"+As++,o.classList.add("cdk-overlay-pane"),e.appendChild(o),o}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(r.z2F)),new Zn(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(bs),r.LFG(Ki),r.LFG(r._Vd),r.LFG(Os),r.LFG(Es),r.LFG(r.zs3),r.LFG(r.R0b),r.LFG(R.K0),r.LFG(us),r.LFG(R.Ye),r.LFG(Ss),r.LFG(r.QbO,8))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac}),n})();const Ds={provide:new r.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Ti],useFactory:function Ps(n){return()=>n.scrollStrategies.reposition()}};let Rs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({providers:[Ti,Ds],imports:[Ei,Xn,Yi,Yi]}),n})();const Ls=function(n,t){return{startAnimationTime:n,exitAnimationTime:t}},Fs=function(n,t){return{value:n,params:t}},nn=new r.OlP("LIGHTBOX_CONFIG"),Ns=(0,ae.X$)("lightbox",[(0,ae.SB)("void, exit",(0,ae.oB)({opacity:0,transform:"scale(0.7)"})),(0,ae.SB)("enter",(0,ae.oB)({transform:"none"})),(0,ae.eR)("* => enter",(0,ae.jt)("{{startAnimationTime}}ms cubic-bezier(0, 0, 0.2, 1)",(0,ae.oB)({transform:"none",opacity:1}))),(0,ae.eR)("* => void, * => exit",(0,ae.jt)("{{exitAnimationTime}}ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,ae.oB)({opacity:0})))]);let Bs=(()=>{class n{constructor(e,o,c){this._document=e,this._focusTrapFactory=o,this._elementRef=c,this.state="enter",this._savePreviouslyFocusedElement()}onAnimationDone(e){"enter"===e.toState?this._trapFocus():(this.overlayRef.dispose(),this._restoreFocus())}_trapFocus(){this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)),this._focusTrap.focusInitialElementWhenReady()}_savePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then(()=>this._elementRef.nativeElement.focus()))}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;e&&"function"==typeof e.focus&&e.focus(),this._focusTrap&&this._focusTrap.destroy()}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(R.K0,8),r.Y36(zn),r.Y36(r.SBq))},n.\u0275cmp=r.Xpm({type:n,selectors:[["lightbox"]],hostAttrs:["tabindex","-1","aria-modal","true"],hostVars:12,hostBindings:function(e,o){1&e&&r.WFA("@lightbox.done",function(u){return o.onAnimationDone(u)}),2&e&&(r.uIk("id","lightbox-"+o.id)("role",o.role)("aria-labelledby",o.ariaLabel?null:o.ariaLabelledBy)("aria-label",o.ariaLabel)("aria-describedby",o.ariaDescribedBy||null),r.d8E("@lightbox",r.WLB(9,Fs,o.state,r.WLB(6,Ls,o.startAnimationTime,o.exitAnimationTime))))},decls:2,vars:4,consts:[[3,"id","destroyRef","skipInitConfig"],["aria-label","Close",1,"g-btn-close",3,"innerHTML","click"]],template:function(e,o){1&e&&(r.TgZ(0,"gallery",0)(1,"i",1),r.NdJ("click",function(){return o.overlayRef.detach()}),r.qZA()()),2&e&&(r.Q6J("id",o.id)("destroyRef",!1)("skipInitConfig",!0),r.xp6(1),r.Q6J("innerHTML",o.closeIcon,r.oJD))},dependencies:[E],styles:["lightbox{position:relative;display:block;width:1100px;height:800px;max-width:94vw;max-height:90vh;border-radius:4px;overflow:hidden;box-shadow:0 11px 15px -7px #0003,0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f}  lightbox:focus{outline:none}  lightbox gallery{overflow:hidden;margin:0;display:block;width:100%;height:100%}  .g-backdrop{background-color:#00000052}  .fullscreen{width:100%}  .fullscreen   lightbox{max-width:none;max-width:initial;max-height:none;max-height:initial;position:fixed;top:0;left:0;bottom:0;right:0;height:100%;width:100%;border-radius:0}  .g-overlay{margin:auto}@media only screen and (max-width: 480px){  .g-overlay{width:100%}  .g-overlay   lightbox{max-width:none;max-width:initial;max-height:none;max-height:initial;position:fixed;top:0;left:0;bottom:0;right:0;height:100%;width:100%;border-radius:0}}  .g-btn-close{position:absolute;right:.9em;top:.9em;z-index:60;cursor:pointer;width:20px;height:20px}@media only screen and (max-width: 480px){  .g-btn-close{right:.7em;top:.7em}}"],data:{animation:[Ns]},changeDetection:0}),n})();const sn={backdropClass:"g-backdrop",panelClass:"g-overlay",hasBackdrop:!0,keyboardShortcuts:!0,role:"lightbox",startAnimationTime:150,exitAnimationTime:75,closeIcon:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="512px" height="512px" enable-background="new 0 0 47.971 47.971" version="1.1" viewBox="0 0 47.971 47.971" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">\n\t<path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88   c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242   C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879   s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z" fill="#fff"/>\n</svg>\n'};let on=(()=>{class n{constructor(e,o,c,u){this._gallery=o,this._overlay=c,this._sanitizer=u,this.opened=new ce.x,this.closed=new ce.x,this._config=e?{...sn,...e}:sn}setConfig(e){this._config={...this._config,...e}}open(e=0,o="lightbox",c){const u=c?{...this._config,...c}:this._config,g={backdropClass:u.backdropClass,panelClass:u.panelClass,hasBackdrop:u.hasBackdrop,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:this._overlay.scrollStrategies.block(),disposeOnNavigation:!0},y=this._gallery.ref(o);y.setConfig({reserveGesturesAction:!0}),y.set(e),this._overlayRef=this._overlay.create(g),this._overlayRef.attachments().subscribe(()=>this.opened.next(o)),this._overlayRef.detachments().subscribe(()=>this.closed.next(o));const C=new Vi(Bs),S=this._overlayRef.attach(C);S.instance.id=o,S.instance.overlayRef=this._overlayRef,S.instance.closeIcon=this._sanitizer.bypassSecurityTrustHtml(this._config.closeIcon),S.instance.role=this._config.role,S.instance.ariaLabel=this._config.ariaLabel,S.instance.ariaLabelledBy=this._config.ariaLabelledBy,S.instance.ariaDescribedBy=this._config.ariaDescribedBy,S.instance.startAnimationTime=this._config.startAnimationTime,S.instance.exitAnimationTime=this._config.exitAnimationTime,u.hasBackdrop&&this._overlayRef.backdropClick().subscribe(()=>this.close()),u.keyboardShortcuts&&this._overlayRef.keydownEvents().subscribe(D=>{switch(D.keyCode){case 37:y.prev();break;case 39:y.next();break;case 27:this.close()}})}close(){this._overlayRef.hasAttached()&&this._overlayRef.detach()}}return n.\u0275fac=function(e){return new(e||n)(r.LFG(nn,8),r.LFG(gt),r.LFG(Ti),r.LFG(Ae.H7))},n.\u0275prov=r.Yz7({token:n,factory:n.\u0275fac}),n})(),Vs=(()=>{class n{constructor(e,o,c){this._lightbox=e,this._el=o,this._renderer=c,this.clickEvent=ue.w0.EMPTY,this.index=0,this.id="root"}ngOnInit(){this._renderer.setStyle(this._el.nativeElement,"cursor","pointer"),this.clickEvent=(0,He.R)(this._el.nativeElement,"click").pipe((0,Ee.b)(()=>this._lightbox.open(this.index,this.id))).subscribe()}ngOnDestroy(){this.clickEvent.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(on),r.Y36(r.SBq),r.Y36(r.Qsj))},n.\u0275dir=r.lG2({type:n,selectors:[["","lightbox",""]],inputs:{index:["lightbox","index"],id:["gallery","id"]}}),n})(),Hs=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:nn,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({providers:[on],imports:[Rs,Lt,$n]}),n})();var rn=F(7770);F(655),F(590);let $s=(()=>{let n=class{};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({}),n})();function Us(n,t){if(1&n&&r._UZ(0,"img",3),2&n){const e=t.$implicit;r.Q6J("lightbox",t.index)("src",e.data.thumb,r.LSH)}}let Ys=(()=>{class n{constructor(e,o){this.platformId=e,this.gallery=o,this.items=[],this.data=[{srcUrl:"https://mo.mo.ee/img/screens/1.png",previewUrl:"assets/img/screens/1_thumb.png"},{srcUrl:"https://mo.mo.ee/img/screens/2.png",previewUrl:"assets/img/screens/2_thumb.png"},{srcUrl:"https://mo.mo.ee/img/screens/3.png",previewUrl:"assets/img/screens/3_thumb.png"},{srcUrl:"https://mo.mo.ee/img/screens/4.png",previewUrl:"assets/img/screens/4_thumb.png"},{srcUrl:"https://mo.mo.ee/img/screens/5.png",previewUrl:"assets/img/screens/5_thumb.png"},{srcUrl:"https://mo.mo.ee/img/screens/6.png",previewUrl:"assets/img/screens/6_thumb.png"},{srcUrl:"https://mo.mo.ee/img/screens/7.png",previewUrl:"assets/img/screens/7_thumb.png"},{srcUrl:"https://mo.mo.ee/img/screens/8.png",previewUrl:"assets/img/screens/8_thumb.png"},{srcUrl:"https://mo.mo.ee/img/screens/9.png",previewUrl:"assets/img/screens/9_thumb.png"},{srcUrl:"https://mo.mo.ee/img/screens/10.png",previewUrl:"assets/img/screens/10_thumb.png"}]}ngOnInit(){(0,R.NF)(this.platformId)&&(this.items=this.data.map(o=>new mt({src:o.srcUrl,thumb:o.previewUrl})),this.gallery.ref().setConfig({thumbWidth:128,thumbHeight:72,thumbView:"contain"}),this.gallery.ref().load(this.items))}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Lbi),r.Y36(gt))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-screenshots-box"]],decls:5,vars:1,consts:function(){let t;return t="\u622A\u56FE",[t,[1,"container"],[3,"lightbox","src",4,"ngFor","ngForOf"],[3,"lightbox","src"]]},template:function(e,o){1&e&&(r.TgZ(0,"h4"),r.SDv(1,0),r.qZA(),r.TgZ(2,"div")(3,"p",1),r.YNc(4,Us,1,2,"img",2),r.qZA()()),2&e&&(r.xp6(4),r.Q6J("ngForOf",o.items))},dependencies:[R.sg,Vs],styles:[".container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 0 2px #242424;width:100%}.container[_ngcontent-%COMP%]{display:grid;gap:3px;grid-template-columns:repeat(5,1fr)}@media screen and (max-width: 640px){.container[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media screen and (max-width: 512px){.container[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media screen and (max-width: 384px){.container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"],changeDetection:0}),n})();const Ws=["map_box"];let Zs=(()=>{class n{constructor(e){this.platformId=e,this.map_names="Dorpat;Dungeon I;Narwa;Whiland;Reval;Rakblood;Blood River;Hell;Clouds;Heaven;Cesis;Walco;Tutorial Island;Pernau;Fellin;Dragon's Lair;No Man's Land;Ancient Dungeon;Lost Woods;Minigames;Broceliande Forest;Devil's Triangle;Cathedral;Illusion Guild;Every Man's Land;Moche I;Wittensten;Dungeon II;Dungeon III;Dungeon IV;Moche II;Void I;Nature Tower;Ice Tower;Fire Tower;Witches I;Witches II;Star Of Knowledge;Core Of Knowledge;No Man's Dungeon;Tavern;Lost Relic;Purgatory;Atlantis".split(";")}ngAfterViewInit(){if(!(0,R.NF)(this.platformId))return;let e=this.content.nativeElement,o=document.createDocumentFragment();this.map_names.forEach((c,u)=>{let g=document.createElement("a");g.href=`assets/maps/map${u}.png`,g.target="_blank";let y=document.createElement("img");y.src=`assets/img/maps/map${u}.png`,y.title=c,y.alt=c,y.style.width="100%",g.appendChild(y),o.appendChild(g)}),e.appendChild(o)}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Lbi))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-maps-box"]],viewQuery:function(e,o){if(1&e&&r.Gf(Ws,5),2&e){let c;r.iGM(c=r.CRH())&&(o.content=c.first)}},decls:4,vars:0,consts:function(){let t;return t="\u5730\u56FE",[t,[1,"map_box"],["map_box",""]]},template:function(e,o){1&e&&(r.TgZ(0,"h4"),r.SDv(1,0),r.qZA(),r._UZ(2,"div",1,2))},styles:[".map_box[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr)}@media screen and (max-width: 654px){.map_box[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media screen and (max-width: 545px){.map_box[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media screen and (max-width: 436px){.map_box[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media screen and (max-width: 327px){.map_box[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"],changeDetection:0}),n})();const Xs=function(n){return{point:n}};function qs(n,t){if(1&n){const e=r.EpF();r.TgZ(0,"div",8),r.NdJ("click",function(){const u=r.CHM(e).index,g=r.oxw();return r.KtG(g.audioSet(u))}),r._UZ(1,"span",9),r.TgZ(2,"span",10),r._uU(3),r.qZA()()}if(2&n){const e=t.$implicit,o=t.index,c=r.oxw();r.Q6J("ngClass",r.VKq(2,Xs,o==c.currentTrack)),r.xp6(3),r.Oqu(e.title)}}let Ks=(()=>{class n{constructor(e){this.platformId=e,this.audioDatas=[{title:"Dorpat",type:"audio/mp3",src:"https://music.mo.ee/level0.mp3",cover:"assets/img/maps/map0.png"},{title:"Dungeon I",type:"audio/mp3",src:"https://music.mo.ee/level1.mp3",cover:"assets/img/maps/map1.png"},{title:"Narwa",type:"audio/mp3",src:"https://music.mo.ee/level2.mp3",cover:"assets/img/maps/map2.png"},{title:"Whiland",type:"audio/mp3",src:"https://music.mo.ee/level3.mp3",cover:"assets/img/maps/map3.png"},{title:"Reval",type:"audio/mp3",src:"https://music.mo.ee/level4.mp3",cover:"assets/img/maps/map4.png"},{title:"Rakblood",type:"audio/mp3",src:"https://music.mo.ee/level5.mp3",cover:"assets/img/maps/map5.png"},{title:"Blood River",type:"audio/mp3",src:"https://music.mo.ee/level6.mp3",cover:"assets/img/maps/map6.png"},{title:"Hell",type:"audio/mp3",src:"https://music.mo.ee/level7.mp3",cover:"assets/img/maps/map7.png"},{title:"Clouds",type:"audio/mp3",src:"https://music.mo.ee/level8.mp3",cover:"assets/img/maps/map8.png"},{title:"Heaven",type:"audio/mp3",src:"https://music.mo.ee/level9.mp3",cover:"assets/img/maps/map9.png"},{title:"Cesis",type:"audio/mp3",src:"https://music.mo.ee/level10.mp3",cover:"assets/img/maps/map10.png"},{title:"Walco",type:"audio/mp3",src:"https://music.mo.ee/level11.mp3",cover:"assets/img/maps/map11.png"},{title:"Tutorial Island / Player Island",type:"audio/mp3",src:"https://music.mo.ee/level12.mp3",cover:"assets/img/maps/map12.png"},{title:"Pernau",type:"audio/mp3",src:"https://music.mo.ee/level13.mp3",cover:"assets/img/maps/map13.png"},{title:"Fellin",type:"audio/mp3",src:"https://music.mo.ee/level14.mp3",cover:"assets/img/maps/map14.png"},{title:"Dragon's Lair",type:"audio/mp3",src:"https://music.mo.ee/level15.mp3",cover:"assets/img/maps/map15.png"},{title:"No Man's Land",type:"audio/mp3",src:"https://music.mo.ee/level16.mp3",cover:"assets/img/maps/map16.png"},{title:"Ancient Dungeon",type:"audio/mp3",src:"https://music.mo.ee/level17.mp3",cover:"assets/img/maps/map17.png"},{title:"Lost Woods",type:"audio/mp3",src:"https://music.mo.ee/level18.mp3",cover:"assets/img/maps/map18.png"},{title:"Minigames",type:"audio/mp3",src:"https://music.mo.ee/level19.mp3",cover:"assets/img/maps/map19.png"},{title:"Broceliande Forest",type:"audio/mp3",src:"https://music.mo.ee/level20.mp3",cover:"assets/img/maps/map20.png"},{title:"Devil's Triangle",type:"audio/mp3",src:"https://music.mo.ee/level21.mp3",cover:"assets/img/maps/map21.png"},{title:"Cathedral",type:"audio/mp3",src:"https://music.mo.ee/level22.mp3",cover:"assets/img/maps/map22.png"},{title:"Illusion Guild",type:"audio/mp3",src:"https://music.mo.ee/level23.mp3",cover:"assets/img/maps/map23.png"},{title:"Every Man's Land",type:"audio/mp3",src:"https://music.mo.ee/level24.mp3",cover:"assets/img/maps/map24.png"},{title:"Moche I",type:"audio/mp3",src:"https://music.mo.ee/level25.mp3",cover:"assets/img/maps/map25.png"},{title:"Wittensten",type:"audio/mp3",src:"https://music.mo.ee/level26.mp3",cover:"assets/img/maps/map26.png"},{title:"Dungeon III",type:"audio/mp3",src:"https://music.mo.ee/level28.mp3",cover:"assets/img/maps/map28.png"},{title:"Witches I",type:"audio/mp3",src:"https://music.mo.ee/level35.mp3",cover:"assets/img/maps/map35.png"},{title:"Star of Knowledge",type:"audio/mp3",src:"https://music.mo.ee/level37.mp3",cover:"assets/img/maps/map37.png"},{title:"Party Quest",type:"audio/mp3",src:"https://music.mo.ee/level100.mp3",cover:"assets/img/maps/party_quest.png"},{title:"Guild",type:"audio/mp3",src:"https://music.mo.ee/level120.mp3",cover:"assets/img/maps/guild.png"},{title:"Tavern",type:"audio/mp3",src:"https://music.mo.ee/level40.mp3",cover:"assets/img/maps/map40.png"},{title:"Lost Relic",type:"audio/mp3",src:"https://music.mo.ee/level41.mp3",cover:"assets/img/maps/map41.png"}],this.currentTrack=0}ngAfterViewInit(){!(0,R.NF)(this.platformId)||(this.player=new rn("#player",{controls:["play","progress","current-time","duration","mute","volume"]}),this.audioSet(0,!1))}audioSet(e,o=!0){this.player.source={type:"audio",sources:[{src:this.audioDatas[e].src}],title:this.audioDatas[e].title},this.currentTrack=this.player.currentTrack=e,o&&this.player.once("canplay",c=>this.player.play())}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Lbi))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-audio-player"]],decls:12,vars:3,consts:[[1,"audio_box"],[1,"ellipsis"],["href","https://www.samanthafoster.net/","target","_blank"],[1,"box_body"],[3,"src"],[1,"list"],["class","ellipsis",3,"ngClass","click",4,"ngFor","ngForOf"],["id","player",2,"width","100%"],[1,"ellipsis",3,"ngClass","click"],[1,"icon_play"],[1,"audio_title"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0)(1,"h4",1)(2,"span"),r._uU(3),r.qZA(),r._uU(4," - Music by "),r.TgZ(5,"a",2),r._uU(6,"Samantha Foster"),r.qZA()(),r.TgZ(7,"div",3),r._UZ(8,"img",4),r.TgZ(9,"div",5),r.YNc(10,qs,4,4,"div",6),r.qZA()(),r._UZ(11,"audio",7),r.qZA()),2&e&&(r.xp6(3),r.Oqu(o.audioDatas[o.currentTrack].title),r.xp6(5),r.s9C("src",o.audioDatas[o.currentTrack].cover,r.LSH),r.xp6(2),r.Q6J("ngForOf",o.audioDatas))},dependencies:[R.mk,R.sg],styles:[".audio_box[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#333;padding:10px;max-width:700px}.audio_box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px}.audio_box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:131px;margin:0 8px;padding:40px 0}.audio_box[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700;font-size:1.5em;padding:0 6px}.box_body[_ngcontent-%COMP%]{display:flex;flex-direction:row}.list[_ngcontent-%COMP%]{height:149.6px;margin:0 12px;overflow:auto;width:calc(100% - 171px)}.list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{cursor:pointer;transition:.2s;padding:6px 0;margin-left:6px;border-bottom:1px solid #666;display:flex;flex-direction:row;align-items:center}.list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover, .list[_ngcontent-%COMP%] > div.point[_ngcontent-%COMP%]{background:#222}.icon_play[_ngcontent-%COMP%]{background-image:url(assets/img/icon_play.png);background-position:3px 50%;background-repeat:no-repeat;width:27px;height:27px;margin-left:3px}.audio_title[_ngcontent-%COMP%]{margin-left:0}"],changeDetection:0}),n})(),Qs=(()=>{class n{constructor(e){this.platformId=e}ngOnInit(){if(!(0,R.NF)(this.platformId))return;let e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/platform.js",e.id="dynamic_yt",document.body.appendChild(e)}ngOnDestroy(){!(0,R.NF)(this.platformId)||(document.getElementById("dynamic_yt")?.remove(),"INS"==document.body.lastElementChild?.tagName&&document.body.lastElementChild?.remove(),"DIV"==document.body.lastElementChild?.tagName&&document.body.lastElementChild?.remove())}}return n.\u0275fac=function(e){return new(e||n)(r.Y36(r.Lbi))},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-media"]],decls:27,vars:0,consts:function(){let t,e,o,c,u,g;return t="\u5A92\u4F53\u7D20\u6750",e="RPG MO \u5BA3\u4F20\u7247",o="\u4E16\u754C\u5730\u56FE",c="\u97F3\u4E50",u="\u6709\u7C89\u4E1D\u4F5C\u54C1? \u5C06\u5B83\u53D1\u9001\u81F3 support@mo.ee \uFF0C\u4E0D\u8981\u5FD8\u4E86\u9644\u6CE8\u60A8\u7684\u89D2\u8272\u540D\u79F0\u4EE5\u83B7\u5F97\u5956\u52B1\u3002",g="\u64B0\u5199\u6587\u7AE0\u6216\u5BF9\u5BA3\u4F20\u6750\u6599\u611F\u5174\u8DA3\uFF1F \u5C06\u60A8\u7684\u613F\u671B\u53D1\u9001\u81F3 support@mo.ee",[t,e,["data-channelid","UC1hWxzlkyFWB98FaK29CmYg","data-layout","default","data-theme","dark","data-count","hidden",1,"g-ytsubscribe",2,"height","24px"],[1,"videoBox"],["src","//www.youtube.com/embed/pkCgLGT91MA","frameborder","0","allowfullscreen",""],["href","https://mo.mo.ee/world_map_2021_march.png","target","_blank"],o,c,u,g]},template:function(e,o){1&e&&(r.TgZ(0,"h3"),r.SDv(1,0),r.qZA(),r.TgZ(2,"h4"),r.SDv(3,1),r.qZA(),r._UZ(4,"div",2)(5,"br"),r.TgZ(6,"div",3)(7,"div"),r._UZ(8,"iframe",4),r.qZA()(),r._UZ(9,"br")(10,"app-screenshots-box")(11,"br")(12,"app-maps-box"),r.TgZ(13,"h4")(14,"a",5),r.SDv(15,6),r.qZA()(),r._UZ(16,"br"),r.TgZ(17,"h4"),r.SDv(18,7),r.qZA(),r._UZ(19,"app-audio-player")(20,"br")(21,"br"),r.TgZ(22,"span"),r.SDv(23,8),r.qZA(),r._UZ(24,"br"),r.TgZ(25,"span"),r.SDv(26,9),r.qZA())},dependencies:[Ys,Zs,Ks],styles:[".videoBox[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;height:0;padding-bottom:56.25%}.videoBox[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}"],changeDetection:0}),n})(),Js=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.oAB({type:n}),n.\u0275inj=r.cJS({imports:[R.ez,ci.Bz.forChild([{path:"**",component:Qs}]),Lt,Hs,$s]}),n})()},7770:function(ki){"object"==typeof navigator&&(ki.exports=function(){"use strict";function w(i,a,s){return a in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i}function F(i,a){for(var s=0;s<a.length;s++){var l=a[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(i,l.key,l)}}function ci(i,a,s){return a in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,i}function R(i,a){var s=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);a&&(l=l.filter(function(h){return Object.getOwnPropertyDescriptor(i,h).enumerable})),s.push.apply(s,l)}return s}function r(i){for(var a=1;a<arguments.length;a++){var s=null!=arguments[a]?arguments[a]:{};a%2?R(Object(s),!0).forEach(function(l){ci(i,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(s,l))})}return i}var ce={addCSS:!0,thumbWidth:15,watch:!0};function Ve(i,a){return function(){return Array.from(document.querySelectorAll(a)).includes(this)}.call(i,a)}var Tt=function(i){return null!=i?i.constructor:null},at=function(i,a){return!!(i&&a&&i instanceof a)},Ye=function(i){return Tt(i)===String},lt=function(i){return Array.isArray(i)},zt=function(i){return at(i,NodeList)},ct=Ye,We=lt,hi=zt,Ze=function(i){return at(i,Element)},ze=function(i){return at(i,Event)},Xe=function(i){return function(i){return null==i}(i)||(Ye(i)||lt(i)||zt(i))&&!i.length||function(i){return Tt(i)===Object}(i)&&!Object.keys(i).length};var Ee=function(){function i(a,s){(function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")})(this,i),Ze(a)?this.element=a:ct(a)&&(this.element=document.querySelector(a)),Ze(this.element)&&Xe(this.element.rangeTouch)&&(this.config=r({},ce,{},s),this.init())}return a=i,s=[{key:"init",value:function(){i.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){i.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(a){var s=this,l=a?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(h){s.element[l](h,function(d){return s.set(d)},!1)})}},{key:"get",value:function(a){if(!i.enabled||!ze(a))return null;var s,l=a.target,h=a.changedTouches[0],d=parseFloat(l.getAttribute("min"))||0,p=parseFloat(l.getAttribute("max"))||100,m=parseFloat(l.getAttribute("step"))||1,f=l.getBoundingClientRect(),_=100/f.width*(this.config.thumbWidth/2)/100;return 0>(s=100/f.width*(h.clientX-f.left))?s=0:100<s&&(s=100),50>s?s-=(100-2*s)*_:50<s&&(s+=2*(s-50)*_),d+function di(i,a){if(1>a){var s=(h="".concat(a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(h[1]?h[1].length:0)-(h[2]?+h[2]:0)):0;return parseFloat(i.toFixed(s))}var h;return Math.round(i/a)*a}(s/100*(p-d),m)}},{key:"set",value:function(a){i.enabled&&ze(a)&&!a.target.disabled&&(a.preventDefault(),a.target.value=this.get(a),function(s,l){if(s&&l){var h=new Event(l,{bubbles:!0});s.dispatchEvent(h)}}(a.target,"touchend"===a.type?"change":"input"))}}],l=[{key:"setup",value:function(a){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=null;if(Xe(a)||ct(a)?l=Array.from(document.querySelectorAll(ct(a)?a:'input[type="range"]')):Ze(a)?l=[a]:hi(a)?l=Array.from(a):We(a)&&(l=a.filter(Ze)),Xe(l))return null;var h=r({},ce,{},s);return ct(a)&&h.watch&&new MutationObserver(function(p){Array.from(p).forEach(function(m){Array.from(m.addedNodes).forEach(function(f){Ze(f)&&Ve(f,a)&&new i(f,h)})})}).observe(document.body,{childList:!0,subtree:!0}),l.map(function(p){return new i(p,s)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}],s&&F(a.prototype,s),l&&F(a,l),i;var a,s,l}();const Se=i=>null!=i?i.constructor:null,Oe=(i,a)=>Boolean(i&&a&&i instanceof a),qe=i=>null==i,kt=i=>Se(i)===Object,Ae=i=>Se(i)===String,ae=i=>Se(i)===Function,Gt=i=>Array.isArray(i),jt=i=>Oe(i,NodeList),$t=i=>qe(i)||(Ae(i)||Gt(i)||jt(i))&&!i.length||kt(i)&&!Object.keys(i).length;var Ge=qe,ve=kt,X=i=>Se(i)===Number&&!Number.isNaN(i),K=Ae,de=i=>Se(i)===Boolean,W=ae,q=Gt,Ke=jt,T=i=>null!==i&&"object"==typeof i&&1===i.nodeType&&"object"==typeof i.style&&"object"==typeof i.ownerDocument,Me=i=>Oe(i,Event),je=i=>Oe(i,KeyboardEvent),Ut=i=>Oe(i,TextTrack)||!qe(i)&&Ae(i.kind),Qe=i=>{if(Oe(i,window.URL))return!0;if(!Ae(i))return!1;let a=i;i.startsWith("http://")&&i.startsWith("https://")||(a=`http://${i}`);try{return!$t(new URL(a).hostname)}catch{return!1}},I=$t;const xt=(()=>{const i=document.createElement("span"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},s=Object.keys(a).find(l=>void 0!==i.style[l]);return!!K(s)&&a[s]})();function Yt(i,a){setTimeout(()=>{try{i.hidden=!0,i.hidden=!1}catch{}},a)}const le={isIE:Boolean(window.document.documentMode),isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function Wt(i,a){return a.split(".").reduce((s,l)=>s&&s[l],i)}function Q(i={},...a){if(!a.length)return i;const s=a.shift();return ve(s)?(Object.keys(s).forEach(l=>{ve(s[l])?(Object.keys(i).includes(l)||Object.assign(i,{[l]:{}}),Q(i[l],s[l])):Object.assign(i,{[l]:s[l]})}),Q(i,...a)):i}function Zt(i,a){Array.from(i.length?i:[i]).reverse().forEach((l,h)=>{const d=h>0?a.cloneNode(!0):a,p=l.parentNode,m=l.nextSibling;d.appendChild(l),m?p.insertBefore(d,m):p.appendChild(d)})}function It(i,a){T(i)&&!I(a)&&Object.entries(a).filter(([,s])=>!Ge(s)).forEach(([s,l])=>i.setAttribute(s,l))}function P(i,a,s){const l=document.createElement(i);return ve(a)&&It(l,a),K(s)&&(l.innerText=s),l}function Ot(i,a,s,l){T(a)&&a.appendChild(P(i,s,l))}function we(i){Ke(i)||q(i)?Array.from(i).forEach(we):T(i)&&T(i.parentNode)&&i.parentNode.removeChild(i)}function Je(i){if(!T(i))return;let{length:a}=i.childNodes;for(;a>0;)i.removeChild(i.lastChild),a-=1}function ht(i,a){return T(a)&&T(a.parentNode)&&T(i)?(a.parentNode.replaceChild(i,a),i):null}function be(i,a){if(!K(i)||I(i))return{};const s={},l=Q({},a);return i.split(",").forEach(h=>{const d=h.trim(),p=d.replace(".",""),m=d.replace(/[[\]]/g,"").split("="),[f]=m,_=m.length>1?m[1].replace(/["']/g,""):"";switch(d.charAt(0)){case".":s.class=K(l.class)?`${l.class} ${p}`:p;break;case"#":s.id=d.replace("#","");break;case"[":s[f]=_}}),Q(l,s)}function Pe(i,a){if(!T(i))return;let s=a;de(s)||(s=!i.hidden),i.hidden=s}function z(i,a,s){if(Ke(i))return Array.from(i).map(l=>z(l,a,s));if(T(i)){let l="toggle";return void 0!==s&&(l=s?"add":"remove"),i.classList[l](a),i.classList.contains(a)}return!1}function dt(i,a){return T(i)&&i.classList.contains(a)}function De(i,a){const{prototype:s}=Element;return(s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector||function(){return Array.from(document.querySelectorAll(a)).includes(this)}).call(i,a)}function $e(i){return this.elements.container.querySelectorAll(i)}function ne(i){return this.elements.container.querySelector(i)}function te(i=null,a=!1){T(i)&&(i.focus({preventScroll:!0}),a&&z(i,this.config.classNames.tabFocus))}const et={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},$={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(i,a,s){const h=$[i]||"html5"!==a;return{api:h,ui:h&&$.rangeInput&&("video"!==i||!le.isIPhone||le.isIPhone&&s&&$.playsinline)}},pip:!(le.isIPhone||!W(P("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||P("video").disablePictureInPicture)),airplay:W(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(i){if(I(i))return!1;const[a]=i.split("/");let s=i;if(!this.isHTML5||a!==this.type)return!1;Object.keys(et).includes(s)&&(s+=`; codecs="${et[i]}"`);try{return Boolean(s&&this.media.canPlayType(s).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const i=document.createElement("input");return i.type="range","range"===i.type})(),touch:"ontouchstart"in document.documentElement,transitions:!1!==xt,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},ie=(()=>{let i=!1;try{const a=Object.defineProperty({},"passive",{get:()=>(i=!0,null)});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch{}return i})();function tt(i,a,s,l=!1,h=!0,d=!1){if(!i||!("addEventListener"in i)||I(a)||!W(s))return;const p=a.split(" ");let m=d;ie&&(m={passive:h,capture:d}),p.forEach(f=>{this&&this.eventListeners&&l&&this.eventListeners.push({element:i,type:f,callback:s,options:m}),i[l?"addEventListener":"removeEventListener"](f,s,m)})}function V(i,a="",s,l=!0,h=!1){tt.call(this,i,a,s,!0,l,h)}function Re(i,a="",s,l=!0,h=!1){tt.call(this,i,a,s,!1,l,h)}function Te(i,a="",s,l=!0,h=!1){const d=(...p)=>{Re(i,a,d,l,h),s.apply(this,p)};tt.call(this,i,a,d,!0,l,h)}function O(i,a="",s=!1,l={}){if(!T(i)||I(a))return;const h=new CustomEvent(a,{bubbles:s,detail:{...l,plyr:this}});i.dispatchEvent(h)}function ge(){this&&this.eventListeners&&(this.eventListeners.forEach(i=>{const{element:a,type:s,callback:l,options:h}=i;a.removeEventListener(s,l,h)}),this.eventListeners=[])}function ut(){return new Promise(i=>this.ready?setTimeout(i,0):V.call(this,this.elements.container,"ready",i)).then(()=>{})}function fe(i){(i=>Oe(i,Promise)&&ae(i.then))(i)&&i.then(null,()=>{})}function pt(i){return q(i)?i.filter((a,s)=>i.indexOf(a)===s):i}function mt(i,a){return q(i)&&i.length?i.reduce((s,l)=>Math.abs(l-a)<Math.abs(s-a)?l:s):null}function At(i){return!(!window||!window.CSS)&&window.CSS.supports(i)}const Mt=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((i,[a,s])=>({...i,[a/s]:[a,s]}),{});function Pt(i){return!!(q(i)||K(i)&&i.includes(":"))&&(q(i)?i:i.split(":")).map(Number).every(X)}function ke(i){if(!q(i)||!i.every(X))return null;const[a,s]=i,l=(d,p)=>0===p?d:l(p,d%p),h=l(a,s);return[a/h,s/h]}function Dt(i){const a=l=>Pt(l)?l.split(":").map(Number):null;let s=a(i);if(null===s&&(s=a(this.config.ratio)),null===s&&!I(this.embed)&&q(this.embed.ratio)&&({ratio:s}=this.embed),null===s&&this.isHTML5){const{videoWidth:l,videoHeight:h}=this.media;s=[l,h]}return ke(s)}function Le(i){if(!this.isVideo)return{};const{wrapper:a}=this.elements,s=Dt.call(this,i);if(!q(s))return{};const[l,h]=ke(s),d=100/l*h;if(At(`aspect-ratio: ${l}/${h}`)?a.style.aspectRatio=`${l}/${h}`:a.style.paddingBottom=`${d}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const p=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),m=(p-d)/(p/50);this.fullscreen.active?a.style.paddingBottom=null:this.media.style.transform=`translateY(-${m}%)`}else this.isHTML5&&a.classList.add(this.config.classNames.videoFixedRatio);return{padding:d,ratio:s}}function gt(i,a,s=.05){const l=i/a,h=mt(Object.keys(Mt),l);return Math.abs(h-l)<=s?Mt[h]:[i,a]}const ye={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(i=>{const a=i.getAttribute("type");return!!I(a)||$.mime.call(this,a)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:ye.getSources.call(this).map(i=>Number(i.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const i=this;i.options.speed=i.config.speed.options,I(this.config.ratio)||Le.call(i),Object.defineProperty(i.media,"quality",{get(){const a=ye.getSources.call(i).find(s=>s.getAttribute("src")===i.source);return a&&Number(a.getAttribute("size"))},set(a){if(i.quality!==a){if(i.config.quality.forced&&W(i.config.quality.onChange))i.config.quality.onChange(a);else{const s=ye.getSources.call(i).find(f=>Number(f.getAttribute("size"))===a);if(!s)return;const{currentTime:l,paused:h,preload:d,readyState:p,playbackRate:m}=i.media;i.media.src=s.getAttribute("src"),("none"!==d||p)&&(i.once("loadedmetadata",()=>{i.speed=m,i.currentTime=l,h||fe(i.play())}),i.media.load())}O.call(i,i.media,"qualitychange",!1,{quality:a})}}})},cancelRequests(){this.isHTML5&&(we(ye.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Rt(i,...a){return I(i)?i:i.toString().replace(/{(\d+)}/g,(s,l)=>a[l].toString())}const it=(i="",a="",s="")=>i.replace(new RegExp(a.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),s.toString()),Xt=(i="")=>i.toString().replace(/\w\S*/g,a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase());function pi(i){const a=document.createElement("div");return a.appendChild(i),a.innerHTML}const Kt={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},se={get(i="",a={}){if(I(i)||I(a))return"";let s=Wt(a.i18n,i);return I(s)?Object.keys(Kt).includes(i)?Kt[i]:"":(Object.entries({"{seektime}":a.seekTime,"{title}":a.title}).forEach(([h,d])=>{s=it(s,h,d)}),s)}};class nt{constructor(a){w(this,"get",s=>{if(!nt.supported||!this.enabled)return null;const l=window.localStorage.getItem(this.key);if(I(l))return null;const h=JSON.parse(l);return K(s)&&s.length?h[s]:h}),w(this,"set",s=>{if(!nt.supported||!this.enabled||!ve(s))return;let l=this.get();I(l)&&(l={}),Q(l,s);try{window.localStorage.setItem(this.key,JSON.stringify(l))}catch{}}),this.enabled=a.config.storage.enabled,this.key=a.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const a="___test";return window.localStorage.setItem(a,a),window.localStorage.removeItem(a),!0}catch{return!1}}}function st(i,a="text"){return new Promise((s,l)=>{try{const h=new XMLHttpRequest;if(!("withCredentials"in h))return;h.addEventListener("load",()=>{if("text"===a)try{s(JSON.parse(h.responseText))}catch{s(h.responseText)}else s(h.response)}),h.addEventListener("error",()=>{throw new Error(h.status)}),h.open("GET",i,!0),h.responseType=a,h.send()}catch(h){l(h)}})}function Qt(i,a){if(!K(i))return;const s=K(a);let l=!1;const h=()=>null!==document.getElementById(a),d=(p,m)=>{p.innerHTML=m,s&&h()||document.body.insertAdjacentElement("afterbegin",p)};if(!s||!h()){const p=nt.supported,m=document.createElement("div");if(m.setAttribute("hidden",""),s&&m.setAttribute("id",a),p){const f=window.localStorage.getItem(`cache-${a}`);if(l=null!==f,l){const _=JSON.parse(f);d(m,_.content)}}st(i).then(f=>{if(!I(f)){if(p)try{window.localStorage.setItem(`cache-${a}`,JSON.stringify({content:f}))}catch{}d(m,f)}}).catch(()=>{})}}const Jt=i=>Math.trunc(i/60/60%60,10);function ft(i=0,a=!1,s=!1){if(!X(i))return ft(void 0,a,s);const l=f=>`0${f}`.slice(-2);let h=Jt(i);const d=Math.trunc(i/60%60,10),m=Math.trunc(i%60,10);return h=a||h>0?`${h}:`:"",`${s&&i>0?"-":""}${h}${l(d)}:${l(m)}`}const E={getIconUrl(){const i=new URL(this.config.iconUrl,window.location),a=window.location.host?window.location.host:window.top.location.host,s=i.host!==a||le.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:s}},findElements(){try{return this.elements.controls=ne.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:$e.call(this,this.config.selectors.buttons.play),pause:ne.call(this,this.config.selectors.buttons.pause),restart:ne.call(this,this.config.selectors.buttons.restart),rewind:ne.call(this,this.config.selectors.buttons.rewind),fastForward:ne.call(this,this.config.selectors.buttons.fastForward),mute:ne.call(this,this.config.selectors.buttons.mute),pip:ne.call(this,this.config.selectors.buttons.pip),airplay:ne.call(this,this.config.selectors.buttons.airplay),settings:ne.call(this,this.config.selectors.buttons.settings),captions:ne.call(this,this.config.selectors.buttons.captions),fullscreen:ne.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ne.call(this,this.config.selectors.progress),this.elements.inputs={seek:ne.call(this,this.config.selectors.inputs.seek),volume:ne.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ne.call(this,this.config.selectors.display.buffer),currentTime:ne.call(this,this.config.selectors.display.currentTime),duration:ne.call(this,this.config.selectors.display.duration)},T(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(i){return this.debug.warn("It looks like there is a problem with your custom controls HTML",i),this.toggleNativeControls(!0),!1}},createIcon(i,a){const s="http://www.w3.org/2000/svg",l=E.getIconUrl.call(this),h=`${l.cors?"":l.url}#${this.config.iconPrefix}`,d=document.createElementNS(s,"svg");It(d,Q(a,{"aria-hidden":"true",focusable:"false"}));const p=document.createElementNS(s,"use"),m=`${h}-${i}`;return"href"in p&&p.setAttributeNS("http://www.w3.org/1999/xlink","href",m),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m),d.appendChild(p),d},createLabel(i,a={}){const s=se.get(i,this.config);return P("span",{...a,class:[a.class,this.config.classNames.hidden].filter(Boolean).join(" ")},s)},createBadge(i){if(I(i))return null;const a=P("span",{class:this.config.classNames.menu.value});return a.appendChild(P("span",{class:this.config.classNames.menu.badge},i)),a},createButton(i,a){const s=Q({},a);let l=function qt(i=""){let a=i.toString();return a=function(s=""){let l=s.toString();return l=it(l,"-"," "),l=it(l,"_"," "),l=Xt(l),it(l," ","")}(a),a.charAt(0).toLowerCase()+a.slice(1)}(i);const h={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(p=>{Object.keys(s).includes(p)&&(h[p]=s[p],delete s[p])}),"button"!==h.element||Object.keys(s).includes("type")||(s.type="button"),Object.keys(s).includes("class")?s.class.split(" ").some(p=>p===this.config.classNames.control)||Q(s,{class:`${s.class} ${this.config.classNames.control}`}):s.class=this.config.classNames.control,i){case"play":h.toggle=!0,h.label="play",h.labelPressed="pause",h.icon="play",h.iconPressed="pause";break;case"mute":h.toggle=!0,h.label="mute",h.labelPressed="unmute",h.icon="volume",h.iconPressed="muted";break;case"captions":h.toggle=!0,h.label="enableCaptions",h.labelPressed="disableCaptions",h.icon="captions-off",h.iconPressed="captions-on";break;case"fullscreen":h.toggle=!0,h.label="enterFullscreen",h.labelPressed="exitFullscreen",h.icon="enter-fullscreen",h.iconPressed="exit-fullscreen";break;case"play-large":s.class+=` ${this.config.classNames.control}--overlaid`,l="play",h.label="play",h.icon="play";break;default:I(h.label)&&(h.label=l),I(h.icon)&&(h.icon=i)}const d=P(h.element);return h.toggle?(d.appendChild(E.createIcon.call(this,h.iconPressed,{class:"icon--pressed"})),d.appendChild(E.createIcon.call(this,h.icon,{class:"icon--not-pressed"})),d.appendChild(E.createLabel.call(this,h.labelPressed,{class:"label--pressed"})),d.appendChild(E.createLabel.call(this,h.label,{class:"label--not-pressed"}))):(d.appendChild(E.createIcon.call(this,h.icon)),d.appendChild(E.createLabel.call(this,h.label))),Q(s,be(this.config.selectors.buttons[l],s)),It(d,s),"play"===l?(q(this.elements.buttons[l])||(this.elements.buttons[l]=[]),this.elements.buttons[l].push(d)):this.elements.buttons[l]=d,d},createRange(i,a){const s=P("input",Q(be(this.config.selectors.inputs[i]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":se.get(i,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},a));return this.elements.inputs[i]=s,E.updateRangeFill.call(this,s),Ee.setup(s),s},createProgress(i,a){const s=P("progress",Q(be(this.config.selectors.display[i]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},a));if("volume"!==i){s.appendChild(P("span",null,"0"));const l={played:"played",buffer:"buffered"}[i],h=l?se.get(l,this.config):"";s.innerText=`% ${h.toLowerCase()}`}return this.elements.display[i]=s,s},createTime(i,a){const s=be(this.config.selectors.display[i],a),l=P("div",Q(s,{class:`${s.class?s.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":se.get(i,this.config)}),"00:00");return this.elements.display[i]=l,l},bindMenuItemShortcuts(i,a){V.call(this,i,"keydown keyup",s=>{if(!["Space","ArrowUp","ArrowDown","ArrowRight"].includes(s.key)||(s.preventDefault(),s.stopPropagation(),"keydown"===s.type))return;const l=De(i,'[role="menuitemradio"]');if(!l&&["Space","ArrowRight"].includes(s.key))E.showMenuPanel.call(this,a,!0);else{let h;"Space"!==s.key&&("ArrowDown"===s.key||l&&"ArrowRight"===s.key?(h=i.nextElementSibling,T(h)||(h=i.parentNode.firstElementChild)):(h=i.previousElementSibling,T(h)||(h=i.parentNode.lastElementChild)),te.call(this,h,!0))}},!1),V.call(this,i,"keyup",s=>{"Return"===s.key&&E.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:i,list:a,type:s,title:l,badge:h=null,checked:d=!1}){const p=be(this.config.selectors.inputs[s]),m=P("button",Q(p,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${p.class?p.class:""}`.trim(),"aria-checked":d,value:i})),f=P("span");f.innerHTML=l,T(h)&&f.appendChild(h),m.appendChild(f),Object.defineProperty(m,"checked",{enumerable:!0,get:()=>"true"===m.getAttribute("aria-checked"),set(_){_&&Array.from(m.parentNode.children).filter(x=>De(x,'[role="menuitemradio"]')).forEach(x=>x.setAttribute("aria-checked","false")),m.setAttribute("aria-checked",_?"true":"false")}}),this.listeners.bind(m,"click keyup",_=>{if(!je(_)||"Space"===_.key){switch(_.preventDefault(),_.stopPropagation(),m.checked=!0,s){case"language":this.currentTrack=Number(i);break;case"quality":this.quality=i;break;case"speed":this.speed=parseFloat(i)}E.showMenuPanel.call(this,"home",je(_))}},s,!1),E.bindMenuItemShortcuts.call(this,m,s),a.appendChild(m)},formatTime(i=0,a=!1){return X(i)?ft(i,Jt(this.duration)>0,a):i},updateTimeDisplay(i=null,a=0,s=!1){T(i)&&X(a)&&(i.innerText=E.formatTime(a,s))},updateVolume(){this.supported.ui&&(T(this.elements.inputs.volume)&&E.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),T(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange(i,a=0){T(i)&&(i.value=a,E.updateRangeFill.call(this,i))},updateProgress(i){if(!this.supported.ui||!Me(i))return;let a=0;const s=(d,p)=>{const m=X(p)?p:0,f=T(d)?d:this.elements.display.buffer;if(T(f)){f.value=m;const _=f.getElementsByTagName("span")[0];T(_)&&(_.childNodes[0].nodeValue=m)}};if(i)switch(i.type){case"timeupdate":case"seeking":case"seeked":h=this.duration,a=0===(l=this.currentTime)||0===h||Number.isNaN(l)||Number.isNaN(h)?0:(l/h*100).toFixed(2),"timeupdate"===i.type&&E.setRange.call(this,this.elements.inputs.seek,a);break;case"playing":case"progress":s(this.elements.display.buffer,100*this.buffered)}var l,h},updateRangeFill(i){const a=Me(i)?i.target:i;if(T(a)&&"range"===a.getAttribute("type")){if(De(a,this.config.selectors.inputs.seek)){a.setAttribute("aria-valuenow",this.currentTime);const s=E.formatTime(this.currentTime),l=E.formatTime(this.duration),h=se.get("seekLabel",this.config);a.setAttribute("aria-valuetext",h.replace("{currentTime}",s).replace("{duration}",l))}else if(De(a,this.config.selectors.inputs.volume)){const s=100*a.value;a.setAttribute("aria-valuenow",s),a.setAttribute("aria-valuetext",`${s.toFixed(1)}%`)}else a.setAttribute("aria-valuenow",a.value);le.isWebkit&&a.style.setProperty("--value",a.value/a.max*100+"%")}},updateSeekTooltip(i){var a,s;if(!this.config.tooltips.seek||!T(this.elements.inputs.seek)||!T(this.elements.display.seekTooltip)||0===this.duration)return;const l=this.elements.display.seekTooltip,h=`${this.config.classNames.tooltip}--visible`,d=x=>z(l,h,x);if(this.touch)return void d(!1);let p=0;const m=this.elements.progress.getBoundingClientRect();if(Me(i))p=100/m.width*(i.pageX-m.left);else{if(!dt(l,h))return;p=parseFloat(l.style.left,10)}p<0?p=0:p>100&&(p=100);const f=this.duration/100*p;l.innerText=E.formatTime(f);const _=null===(a=this.config.markers)||void 0===a||null===(s=a.points)||void 0===s?void 0:s.find(({time:x})=>x===Math.round(f));_&&l.insertAdjacentHTML("afterbegin",`${_.label}<br>`),l.style.left=`${p}%`,Me(i)&&["mouseenter","mouseleave"].includes(i.type)&&d("mouseenter"===i.type)},timeUpdate(i){const a=!T(this.elements.display.duration)&&this.config.invertTime;E.updateTimeDisplay.call(this,this.elements.display.currentTime,a?this.duration-this.currentTime:this.currentTime,a),i&&"timeupdate"===i.type&&this.media.seeking||E.updateProgress.call(this,i)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return Pe(this.elements.display.currentTime,!0),void Pe(this.elements.progress,!0);T(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const i=T(this.elements.display.duration);!i&&this.config.displayDuration&&this.paused&&E.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),i&&E.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&E.setMarkers.call(this),E.updateSeekTooltip.call(this)},toggleMenuButton(i,a){Pe(this.elements.settings.buttons[i],!a)},updateSetting(i,a,s){const l=this.elements.settings.panels[i];let h=null,d=a;if("captions"===i)h=this.currentTrack;else{if(h=I(s)?this[i]:s,I(h)&&(h=this.config[i].default),!I(this.options[i])&&!this.options[i].includes(h))return void this.debug.warn(`Unsupported value of '${h}' for ${i}`);if(!this.config[i].options.includes(h))return void this.debug.warn(`Disabled value of '${h}' for ${i}`)}if(T(d)||(d=l&&l.querySelector('[role="menu"]')),!T(d))return;this.elements.settings.buttons[i].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=E.getLabel.call(this,i,h);const p=d&&d.querySelector(`[value="${h}"]`);T(p)&&(p.checked=!0)},getLabel(i,a){switch(i){case"speed":return 1===a?se.get("normal",this.config):`${a}&times;`;case"quality":if(X(a)){const s=se.get(`qualityLabel.${a}`,this.config);return s.length?s:`${a}p`}return Xt(a);case"captions":return N.getLabel.call(this);default:return null}},setQualityMenu(i){if(!T(this.elements.settings.panels.quality))return;const a="quality",s=this.elements.settings.panels.quality.querySelector('[role="menu"]');q(i)&&(this.options.quality=pt(i).filter(d=>this.config.quality.options.includes(d)));const l=!I(this.options.quality)&&this.options.quality.length>1;if(E.toggleMenuButton.call(this,a,l),Je(s),E.checkMenu.call(this),!l)return;const h=d=>{const p=se.get(`qualityBadge.${d}`,this.config);return p.length?E.createBadge.call(this,p):null};this.options.quality.sort((d,p)=>{const m=this.config.quality.options;return m.indexOf(d)>m.indexOf(p)?1:-1}).forEach(d=>{E.createMenuItem.call(this,{value:d,list:s,type:a,title:E.getLabel.call(this,"quality",d),badge:h(d)})}),E.updateSetting.call(this,a,s)},setCaptionsMenu(){if(!T(this.elements.settings.panels.captions))return;const i="captions",a=this.elements.settings.panels.captions.querySelector('[role="menu"]'),s=N.getTracks.call(this),l=Boolean(s.length);if(E.toggleMenuButton.call(this,i,l),Je(a),E.checkMenu.call(this),!l)return;const h=s.map((d,p)=>({value:p,checked:this.captions.toggled&&this.currentTrack===p,title:N.getLabel.call(this,d),badge:d.language&&E.createBadge.call(this,d.language.toUpperCase()),list:a,type:"language"}));h.unshift({value:-1,checked:!this.captions.toggled,title:se.get("disabled",this.config),list:a,type:"language"}),h.forEach(E.createMenuItem.bind(this)),E.updateSetting.call(this,i,a)},setSpeedMenu(){if(!T(this.elements.settings.panels.speed))return;const i="speed",a=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(l=>l>=this.minimumSpeed&&l<=this.maximumSpeed);const s=!I(this.options.speed)&&this.options.speed.length>1;E.toggleMenuButton.call(this,i,s),Je(a),E.checkMenu.call(this),s&&(this.options.speed.forEach(l=>{E.createMenuItem.call(this,{value:l,list:a,type:i,title:E.getLabel.call(this,"speed",l)})}),E.updateSetting.call(this,i,a))},checkMenu(){const{buttons:i}=this.elements.settings,a=!I(i)&&Object.values(i).some(s=>!s.hidden);Pe(this.elements.settings.menu,!a)},focusFirstMenuItem(i,a=!1){if(this.elements.settings.popup.hidden)return;let s=i;T(s)||(s=Object.values(this.elements.settings.panels).find(h=>!h.hidden));const l=s.querySelector('[role^="menuitem"]');te.call(this,l,a)},toggleMenu(i){const{popup:a}=this.elements.settings,s=this.elements.buttons.settings;if(!T(a)||!T(s))return;const{hidden:l}=a;let h=l;if(de(i))h=i;else if(je(i)&&"Escape"===i.key)h=!1;else if(Me(i)){const d=W(i.composedPath)?i.composedPath()[0]:i.target,p=a.contains(d);if(p||!p&&i.target!==s&&h)return}s.setAttribute("aria-expanded",h),Pe(a,!h),z(this.elements.container,this.config.classNames.menu.open,h),h&&je(i)?E.focusFirstMenuItem.call(this,null,!0):h||l||te.call(this,s,je(i))},getMenuSize(i){const a=i.cloneNode(!0);a.style.position="absolute",a.style.opacity=0,a.removeAttribute("hidden"),i.parentNode.appendChild(a);const s=a.scrollWidth,l=a.scrollHeight;return we(a),{width:s,height:l}},showMenuPanel(i="",a=!1){const s=this.elements.container.querySelector(`#plyr-settings-${this.id}-${i}`);if(!T(s))return;const l=s.parentNode,h=Array.from(l.children).find(d=>!d.hidden);if($.transitions&&!$.reducedMotion){l.style.width=`${h.scrollWidth}px`,l.style.height=`${h.scrollHeight}px`;const d=E.getMenuSize.call(this,s),p=m=>{m.target===l&&["width","height"].includes(m.propertyName)&&(l.style.width="",l.style.height="",Re.call(this,l,xt,p))};V.call(this,l,xt,p),l.style.width=`${d.width}px`,l.style.height=`${d.height}px`}Pe(h,!0),Pe(s,!1),E.focusFirstMenuItem.call(this,s,a)},setDownloadUrl(){const i=this.elements.buttons.download;T(i)&&i.setAttribute("href",this.download)},create(i){const{bindMenuItemShortcuts:a,createButton:s,createProgress:l,createRange:h,createTime:d,setQualityMenu:p,setSpeedMenu:m,showMenuPanel:f}=E;this.elements.controls=null,q(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(s.call(this,"play-large"));const _=P("div",be(this.config.selectors.controls.wrapper));this.elements.controls=_;const x={class:"plyr__controls__item"};return pt(q(this.config.controls)?this.config.controls:[]).forEach(M=>{if("restart"===M&&_.appendChild(s.call(this,"restart",x)),"rewind"===M&&_.appendChild(s.call(this,"rewind",x)),"play"===M&&_.appendChild(s.call(this,"play",x)),"fast-forward"===M&&_.appendChild(s.call(this,"fast-forward",x)),"progress"===M){const b=P("div",{class:`${x.class} plyr__progress__container`}),L=P("div",be(this.config.selectors.progress));if(L.appendChild(h.call(this,"seek",{id:`plyr-seek-${i.id}`})),L.appendChild(l.call(this,"buffer")),this.config.tooltips.seek){const G=P("span",{class:this.config.classNames.tooltip},"00:00");L.appendChild(G),this.elements.display.seekTooltip=G}this.elements.progress=L,b.appendChild(this.elements.progress),_.appendChild(b)}if("current-time"===M&&_.appendChild(d.call(this,"currentTime",x)),"duration"===M&&_.appendChild(d.call(this,"duration",x)),"mute"===M||"volume"===M){let{volume:b}=this.elements;T(b)&&_.contains(b)||(b=P("div",Q({},x,{class:`${x.class} plyr__volume`.trim()})),this.elements.volume=b,_.appendChild(b)),"mute"===M&&b.appendChild(s.call(this,"mute")),"volume"!==M||le.isIos||b.appendChild(h.call(this,"volume",Q({max:1,step:.05,value:this.config.volume},{id:`plyr-volume-${i.id}`})))}if("captions"===M&&_.appendChild(s.call(this,"captions",x)),"settings"===M&&!I(this.config.settings)){const b=P("div",Q({},x,{class:`${x.class} plyr__menu`.trim(),hidden:""}));b.appendChild(s.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${i.id}`,"aria-expanded":!1}));const L=P("div",{class:"plyr__menu__container",id:`plyr-settings-${i.id}`,hidden:""}),G=P("div"),j=P("div",{id:`plyr-settings-${i.id}-home`}),J=P("div",{role:"menu"});j.appendChild(J),G.appendChild(j),this.elements.settings.panels.home=j,this.config.settings.forEach(B=>{const ee=P("button",Q(be(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));a.call(this,ee,B),V.call(this,ee,"click",()=>{f.call(this,B,!1)});const k=P("span",null,se.get(B,this.config)),H=P("span",{class:this.config.classNames.menu.value});H.innerHTML=i[B],k.appendChild(H),ee.appendChild(k),J.appendChild(ee);const oe=P("div",{id:`plyr-settings-${i.id}-${B}`,hidden:""}),pe=P("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});pe.appendChild(P("span",{"aria-hidden":!0},se.get(B,this.config))),pe.appendChild(P("span",{class:this.config.classNames.hidden},se.get("menuBack",this.config))),V.call(this,oe,"keydown",Ce=>{"ArrowLeft"===Ce.key&&(Ce.preventDefault(),Ce.stopPropagation(),f.call(this,"home",!0))},!1),V.call(this,pe,"click",()=>{f.call(this,"home",!1)}),oe.appendChild(pe),oe.appendChild(P("div",{role:"menu"})),G.appendChild(oe),this.elements.settings.buttons[B]=ee,this.elements.settings.panels[B]=oe}),L.appendChild(G),b.appendChild(L),_.appendChild(b),this.elements.settings.popup=L,this.elements.settings.menu=b}if("pip"===M&&$.pip&&_.appendChild(s.call(this,"pip",x)),"airplay"===M&&$.airplay&&_.appendChild(s.call(this,"airplay",x)),"download"===M){const b=Q({},x,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(b.download="");const{download:L}=this.config.urls;!Qe(L)&&this.isEmbed&&Q(b,{icon:`logo-${this.provider}`,label:this.provider}),_.appendChild(s.call(this,"download",b))}"fullscreen"===M&&_.appendChild(s.call(this,"fullscreen",x))}),this.isHTML5&&p.call(this,ye.getQualityOptions.call(this)),m.call(this),_},inject(){if(this.config.loadSprite){const h=E.getIconUrl.call(this);h.cors&&Qt(h.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let i=null;this.elements.controls=null;const a={id:this.id,seektime:this.config.seekTime,title:this.config.title};let l,s=!0;if(W(this.config.controls)&&(this.config.controls=this.config.controls.call(this,a)),this.config.controls||(this.config.controls=[]),T(this.config.controls)||K(this.config.controls)?i=this.config.controls:(i=E.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:N.getLabel.call(this)}),s=!1),s&&K(this.config.controls)&&(i=(h=>{let d=h;return Object.entries(a).forEach(([p,m])=>{d=it(d,`{${p}}`,m)}),d})(i)),K(this.config.selectors.controls.container)&&(l=document.querySelector(this.config.selectors.controls.container)),T(l)||(l=this.elements.container),l[T(i)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",i),T(this.elements.controls)||E.findElements.call(this),!I(this.elements.buttons)){const h=d=>{const p=this.config.classNames.controlPressed;Object.defineProperty(d,"pressed",{enumerable:!0,get:()=>dt(d,p),set(m=!1){z(d,p,m)}})};Object.values(this.elements.buttons).filter(Boolean).forEach(d=>{q(d)||Ke(d)?Array.from(d).filter(Boolean).forEach(h):h(d)})}if(le.isEdge&&Yt(l),this.config.tooltips.controls){const{classNames:h,selectors:d}=this.config,m=$e.call(this,`${d.controls.wrapper} ${d.labels} .${h.hidden}`);Array.from(m).forEach(f=>{z(f,this.config.classNames.hidden,!1),z(f,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var i,a;if(!this.duration||this.elements.markers)return;const s=null===(i=this.config.markers)||void 0===i||null===(a=i.points)||void 0===a?void 0:a.filter(({time:f})=>f>0&&f<this.duration);if(null==s||!s.length)return;const l=document.createDocumentFragment(),h=document.createDocumentFragment();let d=null;const p=`${this.config.classNames.tooltip}--visible`,m=f=>z(d,p,f);s.forEach(f=>{const _=P("span",{class:this.config.classNames.marker},""),x=f.time/this.duration*100+"%";d&&(_.addEventListener("mouseenter",()=>{f.label||(d.style.left=x,d.innerHTML=f.label,m(!0))}),_.addEventListener("mouseleave",()=>{m(!1)})),_.addEventListener("click",()=>{this.currentTime=f.time}),_.style.left=x,h.appendChild(_)}),l.appendChild(h),this.config.tooltips.seek||(d=P("span",{class:this.config.classNames.tooltip},""),l.appendChild(d)),this.elements.markers={points:h,tip:d},this.elements.progress.appendChild(l)}};function Lt(i,a=!0){let s=i;if(a){const l=document.createElement("a");l.href=s,s=l.href}try{return new URL(s)}catch{return null}}function yt(i){const a=new URLSearchParams;return ve(i)&&Object.entries(i).forEach(([s,l])=>{a.set(s,l)}),a}const N={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!$.textTracks)return void(q(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&E.setCaptionsMenu.call(this));var i,a;if(T(this.elements.captions)||(this.elements.captions=P("div",be(this.config.selectors.captions)),a=this.elements.wrapper,T(i=this.elements.captions)&&T(a)&&a.parentNode.insertBefore(i,a.nextSibling)),le.isIE&&window.URL){const d=this.media.querySelectorAll("track");Array.from(d).forEach(p=>{const m=p.getAttribute("src"),f=Lt(m);null!==f&&f.hostname!==window.location.href.hostname&&["http:","https:"].includes(f.protocol)&&st(m,"blob").then(_=>{p.setAttribute("src",window.URL.createObjectURL(_))}).catch(()=>{we(p)})})}const s=pt((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(d=>d.split("-")[0]));let l=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===l&&([l]=s);let h=this.storage.get("captions");de(h)||({active:h}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:h,language:l,languages:s}),this.isHTML5&&V.call(this,this.media.textTracks,this.config.captions.update?"addtrack removetrack":"removetrack",N.update.bind(this)),setTimeout(N.update.bind(this),0)},update(){const i=N.getTracks.call(this,!0),{active:a,language:s,meta:l,currentTrackNode:h}=this.captions,d=Boolean(i.find(p=>p.language===s));this.isHTML5&&this.isVideo&&i.filter(p=>!l.get(p)).forEach(p=>{this.debug.log("Track added",p),l.set(p,{default:"showing"===p.mode}),"showing"===p.mode&&(p.mode="hidden"),V.call(this,p,"cuechange",()=>N.updateCues.call(this))}),(d&&this.language!==s||!i.includes(h))&&(N.setLanguage.call(this,s),N.toggle.call(this,a&&d)),this.elements&&z(this.elements.container,this.config.classNames.captions.enabled,!I(i)),q(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&E.setCaptionsMenu.call(this)},toggle(i,a=!0){if(!this.supported.ui)return;const{toggled:s}=this.captions,l=this.config.classNames.captions.active,h=Ge(i)?!s:i;if(h!==s){if(a||(this.captions.active=h,this.storage.set({captions:h})),!this.language&&h&&!a){const d=N.getTracks.call(this),p=N.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=p.language,void N.set.call(this,d.indexOf(p))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=h),z(this.elements.container,l,h),this.captions.toggled=h,E.updateSetting.call(this,"captions"),O.call(this,this.media,h?"captionsenabled":"captionsdisabled")}setTimeout(()=>{h&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(i,a=!0){const s=N.getTracks.call(this);if(-1!==i)if(X(i))if(i in s){if(this.captions.currentTrack!==i){this.captions.currentTrack=i;const l=s[i],{language:h}=l||{};this.captions.currentTrackNode=l,E.updateSetting.call(this,"captions"),a||(this.captions.language=h,this.storage.set({language:h})),this.isVimeo&&this.embed.enableTextTrack(h),O.call(this,this.media,"languagechange")}N.toggle.call(this,!0,a),this.isHTML5&&this.isVideo&&N.updateCues.call(this)}else this.debug.warn("Track not found",i);else this.debug.warn("Invalid caption argument",i);else N.toggle.call(this,!1,a)},setLanguage(i,a=!0){if(!K(i))return void this.debug.warn("Invalid language argument",i);const s=i.toLowerCase();this.captions.language=s;const l=N.getTracks.call(this),h=N.findTrack.call(this,[s]);N.set.call(this,l.indexOf(h),a)},getTracks(i=!1){return Array.from((this.media||{}).textTracks||[]).filter(a=>!this.isHTML5||i||this.captions.meta.has(a)).filter(a=>["captions","subtitles"].includes(a.kind))},findTrack(i,a=!1){const s=N.getTracks.call(this),l=p=>Number((this.captions.meta.get(p)||{}).default),h=Array.from(s).sort((p,m)=>l(m)-l(p));let d;return i.every(p=>(d=h.find(m=>m.language===p),!d)),d||(a?h[0]:void 0)},getCurrentTrack(){return N.getTracks.call(this)[this.currentTrack]},getLabel(i){let a=i;return!Ut(a)&&$.textTracks&&this.captions.toggled&&(a=N.getCurrentTrack.call(this)),Ut(a)?I(a.label)?I(a.language)?se.get("enabled",this.config):i.language.toUpperCase():a.label:se.get("disabled",this.config)},updateCues(i){if(!this.supported.ui)return;if(!T(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!Ge(i)&&!Array.isArray(i))return void this.debug.warn("updateCues: Invalid input",i);let a=i;if(!a){const l=N.getCurrentTrack.call(this);a=Array.from((l||{}).activeCues||[]).map(h=>h.getCueAsHTML()).map(pi)}const s=a.map(l=>l.trim()).join("\n");if(s!==this.elements.captions.innerHTML){Je(this.elements.captions);const l=P("span",be(this.config.selectors.caption));l.innerHTML=s,this.elements.captions.appendChild(l),O.call(this,this.media,"cuechange")}}},mi={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.2/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Fe="picture-in-picture",Ne={html5:"html5",youtube:"youtube",vimeo:"vimeo"},_t=()=>{};class vt{constructor(a=!1){this.enabled=window.console&&a,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):_t}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):_t}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):_t}}class he{constructor(a){w(this,"onChange",()=>{if(!this.enabled)return;const s=this.player.elements.buttons.fullscreen;T(s)&&(s.pressed=this.active),O.call(this.player,this.target===this.player.media?this.target:this.player.elements.container,this.active?"enterfullscreen":"exitfullscreen",!0)}),w(this,"toggleFallback",(s=!1)=>{if(s?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=s?"hidden":"",z(this.target,this.player.config.classNames.fullscreen.fallback,s),le.isIos){let l=document.head.querySelector('meta[name="viewport"]');const h="viewport-fit=cover";l||(l=document.createElement("meta"),l.setAttribute("name","viewport"));const d=K(l.content)&&l.content.includes(h);s?(this.cleanupViewport=!d,d||(l.content+=`,${h}`)):this.cleanupViewport&&(l.content=l.content.split(",").filter(p=>p.trim()!==h).join(","))}this.onChange()}),w(this,"trapFocus",s=>{if(le.isIos||!this.active||"Tab"!==s.key)return;const l=document.activeElement,h=$e.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[d]=h,p=h[h.length-1];l!==p||s.shiftKey?l===d&&s.shiftKey&&(p.focus(),s.preventDefault()):(d.focus(),s.preventDefault())}),w(this,"update",()=>{if(this.enabled){let s;s=this.forceFallback?"Fallback (forced)":he.native?"Native":"Fallback",this.player.debug.log(`${s} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");z(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}),w(this,"enter",()=>{this.enabled&&(le.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!he.native||this.forceFallback?this.toggleFallback(!0):this.prefix?I(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),w(this,"exit",()=>{this.enabled&&(le.isIos&&this.player.config.fullscreen.iosNative?(this.target.webkitExitFullscreen(),fe(this.player.play())):!he.native||this.forceFallback?this.toggleFallback(!1):this.prefix?I(this.prefix)||document[`${this.prefix}${"moz"===this.prefix?"Cancel":"Exit"}${this.property}`]():(document.cancelFullScreen||document.exitFullscreen).call(document))}),w(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=a,this.prefix=he.prefix,this.property=he.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===a.config.fullscreen.fallback,this.player.elements.fullscreen=a.config.fullscreen.container&&function(s,l){const{prototype:h}=Element;return(h.closest||function(){let d=this;do{if(De.matches(d,l))return d;d=d.parentElement||d.parentNode}while(null!==d&&1===d.nodeType);return null}).call(s,l)}(this.player.elements.container,a.config.fullscreen.container),V.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),V.call(this.player,this.player.elements.container,"dblclick",s=>{T(this.player.elements.controls)&&this.player.elements.controls.contains(s.target)||this.player.listeners.proxy(s,this.toggle,"fullscreen")}),V.call(this,this.player.elements.container,"keydown",s=>this.trapFocus(s)),this.update()}static get native(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get usingNative(){return he.native&&!this.forceFallback}static get prefix(){if(W(document.exitFullscreen))return"";let a="";return["webkit","moz","ms"].some(s=>!(!W(document[`${s}ExitFullscreen`])&&!W(document[`${s}CancelFullScreen`])||(a=s,0))),a}static get property(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}get enabled(){return(he.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}get active(){if(!this.enabled)return!1;if(!he.native||this.forceFallback)return dt(this.target,this.player.config.classNames.fullscreen.fallback);const a=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return a&&a.shadowRoot?a===this.target.getRootNode().host:a===this.target}get target(){return le.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}function bt(i,a=1){return new Promise((s,l)=>{const h=new Image,d=()=>{delete h.onload,delete h.onerror,(h.naturalWidth>=a?s:l)(h)};Object.assign(h,{onload:d,onerror:d,src:i})})}const U={addStyleHook(){z(this.elements.container,this.config.selectors.container.replace(".",""),!0),z(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(i=!1){i&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void U.toggleNativeControls.call(this,!0);T(this.elements.controls)||(E.inject.call(this),this.listeners.controls()),U.toggleNativeControls.call(this),this.isHTML5&&N.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,E.updateVolume.call(this),E.timeUpdate.call(this),E.durationUpdate.call(this),U.checkPlaying.call(this),z(this.elements.container,this.config.classNames.pip.supported,$.pip&&this.isHTML5&&this.isVideo),z(this.elements.container,this.config.classNames.airplay.supported,$.airplay&&this.isHTML5),z(this.elements.container,this.config.classNames.isIos,le.isIos),z(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{O.call(this,this.media,"ready")},0),U.setTitle.call(this),this.poster&&U.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&E.durationUpdate.call(this),this.config.mediaMetadata&&E.setMediaMetadata.call(this)},setTitle(){let i=se.get("play",this.config);if(K(this.config.title)&&!I(this.config.title)&&(i+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(a=>{a.setAttribute("aria-label",i)}),this.isEmbed){const a=ne.call(this,"iframe");if(!T(a))return;const s=I(this.config.title)?"video":this.config.title,l=se.get("frameTitle",this.config);a.setAttribute("title",l.replace("{title}",s))}},togglePoster(i){z(this.elements.container,this.config.classNames.posterEnabled,i)},setPoster(i,a=!0){return a&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",i),this.elements.poster.removeAttribute("hidden"),ut.call(this).then(()=>bt(i)).catch(s=>{throw i===this.poster&&U.togglePoster.call(this,!1),s}).then(()=>{if(i!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${i}')`,backgroundSize:""}),U.togglePoster.call(this,!0),i)))},checkPlaying(i){z(this.elements.container,this.config.classNames.playing,this.playing),z(this.elements.container,this.config.classNames.paused,this.paused),z(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(a=>{Object.assign(a,{pressed:this.playing}),a.setAttribute("aria-label",se.get(this.playing?"pause":"play",this.config))}),Me(i)&&"timeupdate"===i.type||U.toggleControls.call(this)},checkLoading(i){this.loading=["stalled","waiting"].includes(i.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{z(this.elements.container,this.config.classNames.loading,this.loading),U.toggleControls.call(this)},this.loading?250:0)},toggleControls(i){const{controls:a}=this.elements;if(a&&this.config.hideControls){const s=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(i||this.loading||this.paused||a.pressed||a.hover||s))}},migrateStyles(){Object.values({...this.media.style}).filter(i=>!I(i)&&K(i)&&i.startsWith("--plyr")).forEach(i=>{this.elements.container.style.setProperty(i,this.media.style.getPropertyValue(i)),this.media.style.removeProperty(i)}),I(this.media.style)&&this.media.removeAttribute("style")}};class Ft{constructor(a){w(this,"firstTouch",()=>{const{player:s}=this,{elements:l}=s;s.touch=!0,z(l.container,s.config.classNames.isTouch,!0)}),w(this,"setTabFocus",s=>{const{player:l}=this,{elements:h}=l,{key:d,type:p,timeStamp:m}=s;clearTimeout(this.focusTimer),("keydown"!==p||"Tab"===d)&&("keydown"===p&&(this.lastKeyDown=m),("focus"!==p||m-this.lastKeyDown<=20)&&((()=>{const _=l.config.classNames.tabFocus;z($e.call(l,`.${_}`),_,!1)})(),"focusout"!==p&&(this.focusTimer=setTimeout(()=>{const _=document.activeElement;h.container.contains(_)&&z(document.activeElement,l.config.classNames.tabFocus,!0)},10))))}),w(this,"global",(s=!0)=>{const{player:l}=this;l.config.keyboard.global&&tt.call(l,window,"keydown keyup",this.handleKey,s,!1),tt.call(l,document.body,"click",this.toggleMenu,s),Te.call(l,document.body,"touchstart",this.firstTouch),tt.call(l,document.body,"keydown focus blur focusout",this.setTabFocus,s,!1,!0)}),w(this,"container",()=>{const{player:s}=this,{config:l,elements:h,timers:d}=s;!l.keyboard.global&&l.keyboard.focused&&V.call(s,h.container,"keydown keyup",this.handleKey,!1),V.call(s,h.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",f=>{const{controls:_}=h;_&&"enterfullscreen"===f.type&&(_.pressed=!1,_.hover=!1);let x=0;["touchstart","touchmove","mousemove"].includes(f.type)&&(U.toggleControls.call(s,!0),x=s.touch?3e3:2e3),clearTimeout(d.controls),d.controls=setTimeout(()=>U.toggleControls.call(s,!1),x)});const p=()=>{if(!s.isVimeo||s.config.vimeo.premium)return;const f=h.wrapper,{active:_}=s.fullscreen,[x,M]=Dt.call(s),b=At(`aspect-ratio: ${x} / ${M}`);if(!_)return void(b?(f.style.width=null,f.style.height=null):(f.style.maxWidth=null,f.style.margin=null));const[L,G]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],j=L/G>x/M;b?(f.style.width=j?"auto":"100%",f.style.height=j?"100%":"auto"):(f.style.maxWidth=j?G/M*x+"px":null,f.style.margin=j?"0 auto":null)},m=()=>{clearTimeout(d.resized),d.resized=setTimeout(p,50)};V.call(s,h.container,"enterfullscreen exitfullscreen",f=>{const{target:_}=s.fullscreen;_===h.container&&(!s.isEmbed&&I(s.config.ratio)||(p(),("enterfullscreen"===f.type?V:Re).call(s,window,"resize",m)))})}),w(this,"media",()=>{const{player:s}=this,{elements:l}=s;if(V.call(s,s.media,"timeupdate seeking seeked",d=>E.timeUpdate.call(s,d)),V.call(s,s.media,"durationchange loadeddata loadedmetadata",d=>E.durationUpdate.call(s,d)),V.call(s,s.media,"ended",()=>{s.isHTML5&&s.isVideo&&s.config.resetOnEnd&&(s.restart(),s.pause())}),V.call(s,s.media,"progress playing seeking seeked",d=>E.updateProgress.call(s,d)),V.call(s,s.media,"volumechange",d=>E.updateVolume.call(s,d)),V.call(s,s.media,"playing play pause ended emptied timeupdate",d=>U.checkPlaying.call(s,d)),V.call(s,s.media,"waiting canplay seeked playing",d=>U.checkLoading.call(s,d)),s.supported.ui&&s.config.clickToPlay&&!s.isAudio){const d=ne.call(s,`.${s.config.classNames.video}`);if(!T(d))return;V.call(s,l.container,"click",p=>{([l.container,d].includes(p.target)||d.contains(p.target))&&(s.touch&&s.config.hideControls||(s.ended?(this.proxy(p,s.restart,"restart"),this.proxy(p,()=>{fe(s.play())},"play")):this.proxy(p,()=>{fe(s.togglePlay())},"play")))})}s.supported.ui&&s.config.disableContextMenu&&V.call(s,l.wrapper,"contextmenu",d=>{d.preventDefault()},!1),V.call(s,s.media,"volumechange",()=>{s.storage.set({volume:s.volume,muted:s.muted})}),V.call(s,s.media,"ratechange",()=>{E.updateSetting.call(s,"speed"),s.storage.set({speed:s.speed})}),V.call(s,s.media,"qualitychange",d=>{E.updateSetting.call(s,"quality",null,d.detail.quality)}),V.call(s,s.media,"ready qualitychange",()=>{E.setDownloadUrl.call(s)});const h=s.config.events.concat(["keyup","keydown"]).join(" ");V.call(s,s.media,h,d=>{let{detail:p={}}=d;"error"===d.type&&(p=s.media.error),O.call(s,l.container,d.type,!0,p)})}),w(this,"proxy",(s,l,h)=>{const{player:d}=this,p=d.config.listeners[h];let m=!0;W(p)&&(m=p.call(d,s)),!1!==m&&W(l)&&l.call(d,s)}),w(this,"bind",(s,l,h,d,p=!0)=>{const{player:m}=this,_=W(m.config.listeners[d]);V.call(m,s,l,x=>this.proxy(x,h,d),p&&!_)}),w(this,"controls",()=>{const{player:s}=this,{elements:l}=s,h=le.isIE?"change":"input";if(l.buttons.play&&Array.from(l.buttons.play).forEach(d=>{this.bind(d,"click",()=>{fe(s.togglePlay())},"play")}),this.bind(l.buttons.restart,"click",s.restart,"restart"),this.bind(l.buttons.rewind,"click",()=>{s.lastSeekTime=Date.now(),s.rewind()},"rewind"),this.bind(l.buttons.fastForward,"click",()=>{s.lastSeekTime=Date.now(),s.forward()},"fastForward"),this.bind(l.buttons.mute,"click",()=>{s.muted=!s.muted},"mute"),this.bind(l.buttons.captions,"click",()=>s.toggleCaptions()),this.bind(l.buttons.download,"click",()=>{O.call(s,s.media,"download")},"download"),this.bind(l.buttons.fullscreen,"click",()=>{s.fullscreen.toggle()},"fullscreen"),this.bind(l.buttons.pip,"click",()=>{s.pip="toggle"},"pip"),this.bind(l.buttons.airplay,"click",s.airplay,"airplay"),this.bind(l.buttons.settings,"click",d=>{d.stopPropagation(),d.preventDefault(),E.toggleMenu.call(s,d)},null,!1),this.bind(l.buttons.settings,"keyup",d=>{["Space","Enter"].includes(d.key)&&("Enter"!==d.key?(d.preventDefault(),d.stopPropagation(),E.toggleMenu.call(s,d)):E.focusFirstMenuItem.call(s,null,!0))},null,!1),this.bind(l.settings.menu,"keydown",d=>{"Escape"===d.key&&E.toggleMenu.call(s,d)}),this.bind(l.inputs.seek,"mousedown mousemove",d=>{const p=l.progress.getBoundingClientRect();d.currentTarget.setAttribute("seek-value",100/p.width*(d.pageX-p.left))}),this.bind(l.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",d=>{const p=d.currentTarget,m="play-on-seeked";if(je(d)&&!["ArrowLeft","ArrowRight"].includes(d.key))return;s.lastSeekTime=Date.now();const f=p.hasAttribute(m),_=["mouseup","touchend","keyup"].includes(d.type);f&&_?(p.removeAttribute(m),fe(s.play())):!_&&s.playing&&(p.setAttribute(m,""),s.pause())}),le.isIos){const d=$e.call(s,'input[type="range"]');Array.from(d).forEach(p=>this.bind(p,h,m=>Yt(m.target)))}this.bind(l.inputs.seek,h,d=>{const p=d.currentTarget;let m=p.getAttribute("seek-value");I(m)&&(m=p.value),p.removeAttribute("seek-value"),s.currentTime=m/p.max*s.duration},"seek"),this.bind(l.progress,"mouseenter mouseleave mousemove",d=>E.updateSeekTooltip.call(s,d)),this.bind(l.progress,"mousemove touchmove",d=>{const{previewThumbnails:p}=s;p&&p.loaded&&p.startMove(d)}),this.bind(l.progress,"mouseleave touchend click",()=>{const{previewThumbnails:d}=s;d&&d.loaded&&d.endMove(!1,!0)}),this.bind(l.progress,"mousedown touchstart",d=>{const{previewThumbnails:p}=s;p&&p.loaded&&p.startScrubbing(d)}),this.bind(l.progress,"mouseup touchend",d=>{const{previewThumbnails:p}=s;p&&p.loaded&&p.endScrubbing(d)}),le.isWebkit&&Array.from($e.call(s,'input[type="range"]')).forEach(d=>{this.bind(d,"input",p=>E.updateRangeFill.call(s,p.target))}),s.config.toggleInvert&&!T(l.display.duration)&&this.bind(l.display.currentTime,"click",()=>{0!==s.currentTime&&(s.config.invertTime=!s.config.invertTime,E.timeUpdate.call(s))}),this.bind(l.inputs.volume,h,d=>{s.volume=d.target.value},"volume"),this.bind(l.controls,"mouseenter mouseleave",d=>{l.controls.hover=!s.touch&&"mouseenter"===d.type}),l.fullscreen&&Array.from(l.fullscreen.children).filter(d=>!d.contains(l.container)).forEach(d=>{this.bind(d,"mouseenter mouseleave",p=>{l.controls&&(l.controls.hover=!s.touch&&"mouseenter"===p.type)})}),this.bind(l.controls,"mousedown mouseup touchstart touchend touchcancel",d=>{l.controls.pressed=["mousedown","touchstart"].includes(d.type)}),this.bind(l.controls,"focusin",()=>{const{config:d,timers:p}=s;z(l.controls,d.classNames.noTransition,!0),U.toggleControls.call(s,!0),setTimeout(()=>{z(l.controls,d.classNames.noTransition,!1)},0);const m=this.touch?3e3:4e3;clearTimeout(p.controls),p.controls=setTimeout(()=>U.toggleControls.call(s,!1),m)}),this.bind(l.inputs.volume,"wheel",d=>{const p=d.webkitDirectionInvertedFromDevice,[m,f]=[d.deltaX,-d.deltaY].map(M=>p?-M:M),_=Math.sign(Math.abs(m)>Math.abs(f)?m:f);s.increaseVolume(_/50);const{volume:x}=s.media;(1===_&&x<1||-1===_&&x>0)&&d.preventDefault()},"volume",!1)}),this.player=a,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(a){const{player:s}=this,{elements:l}=s,{key:h,type:d,altKey:p,ctrlKey:m,metaKey:f,shiftKey:_}=a,x="keydown"===d,M=x&&h===this.lastKey;var b;if(!(p||m||f||_)&&h)if(x){const L=document.activeElement;if(T(L)){const{editable:G}=s.config.selectors,{seek:j}=l.inputs;if(L!==j&&De(L,G)||"Space"===a.key&&De(L,'button, [role^="menuitem"]'))return}switch(["Space","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(h)&&(a.preventDefault(),a.stopPropagation()),h){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":M||(b=parseInt(h,10),s.currentTime=s.duration/10*b);break;case"Space":case"k":M||fe(s.togglePlay());break;case"ArrowUp":s.increaseVolume(.1);break;case"ArrowDown":s.decreaseVolume(.1);break;case"m":M||(s.muted=!s.muted);break;case"ArrowRight":s.forward();break;case"ArrowLeft":s.rewind();break;case"f":s.fullscreen.toggle();break;case"c":M||s.toggleCaptions();break;case"l":s.loop=!s.loop}"Escape"===h&&!s.fullscreen.usingNative&&s.fullscreen.active&&s.fullscreen.toggle(),this.lastKey=h}else this.lastKey=null}toggleMenu(a){E.toggleMenu.call(this.player,a)}}typeof globalThis<"u"||typeof window<"u"||typeof global<"u"&&global;var a,i,gi=(i=a={exports:{}},i.exports=function(){var s=function(){},l={},h={},d={};function m(b,L){if(b){var G=d[b];if(h[b]=L,G)for(;G.length;)G[0](b,L),G.splice(0,1)}}function f(b,L){b.call&&(b={success:b}),L.length?(b.error||s)(L):(b.success||s)(b)}function _(b,L,G,j){var J,B,ee=document,k=G.async,H=(G.numRetries||0)+1,oe=G.before||s,pe=b.replace(/[\?|#].*$/,""),Ce=b.replace(/^(css|img)!/,"");j=j||0,/(^css!|\.css$)/.test(pe)?((B=ee.createElement("link")).rel="stylesheet",B.href=Ce,(J="hideFocus"in B)&&B.relList&&(J=0,B.rel="preload",B.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(pe)?(B=ee.createElement("img")).src=Ce:((B=ee.createElement("script")).src=b,B.async=void 0===k||k),B.onload=B.onerror=B.onbeforeload=function(xe){var Vt=xe.type[0];if(J)try{B.sheet.cssText.length||(Vt="e")}catch(Oi){18!=Oi.code&&(Vt="e")}if("e"==Vt){if((j+=1)<H)return _(b,L,G,j)}else if("preload"==B.rel&&"style"==B.as)return B.rel="stylesheet";L(b,Vt,xe.defaultPrevented)},!1!==oe(b,B)&&ee.head.appendChild(B)}function M(b,L,G){var j,J;if(L&&L.trim&&(j=L),J=(j?G:L)||{},j){if(j in l)throw"LoadJS";l[j]=!0}function B(ee,k){!function x(b,L,G){var j,J,B=(b=b.push?b:[b]).length,ee=B,k=[];for(j=function(H,oe,pe){if("e"==oe&&k.push(H),"b"==oe){if(!pe)return;k.push(H)}--B||L(k)},J=0;J<ee;J++)_(b[J],j,G)}(b,function(H){f(J,H),ee&&f({success:ee,error:k},H),m(j,H)},J)}if(J.returnPromise)return new Promise(B);B()}return M.ready=function(b,L){return function p(b,L){var G,j,J,B=[],ee=(b=b.push?b:[b]).length,k=ee;for(G=function(H,oe){oe.length&&B.push(H),--k||L(B)};ee--;)(J=h[j=b[ee]])?G(j,J):(d[j]=d[j]||[]).push(G)}(b,function(G){f(L,G)}),M},M.done=function(b){m(b,[])},M.reset=function(){l={},h={},d={}},M.isDefined=function(b){return b in l},M}(),a.exports);function ii(i){return new Promise((a,s)=>{gi(i,{success:a,error:s})})}function Ct(i){i&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===i&&(this.media.paused=!i,O.call(this,this.media,i?"play":"pause"))}const wt={setup(){const i=this;z(i.elements.wrapper,i.config.classNames.embed,!0),i.options.speed=i.config.speed.options,Le.call(i),ve(window.Vimeo)?wt.ready.call(i):ii(i.config.urls.vimeo.sdk).then(()=>{wt.ready.call(i)}).catch(a=>{i.debug.warn("Vimeo SDK (player.js) failed to load",a)})},ready(){const i=this,a=i.config.vimeo,{premium:s,referrerPolicy:l,...h}=a;let d=i.media.getAttribute("src"),p="";I(d)?(d=i.media.getAttribute(i.config.attributes.embed.id),p=i.media.getAttribute(i.config.attributes.embed.hash)):p=function(k){const H=k.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return H&&5===H.length?H[4]:null}(d);const m=p?{h:p}:{};s&&Object.assign(h,{controls:!1,sidedock:!1});const f=yt({loop:i.config.loop.active,autoplay:i.autoplay,muted:i.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative,...m,...h}),_=I(x=d)?null:X(Number(x))?x:x.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:x;var x;const M=P("iframe"),b=Rt(i.config.urls.vimeo.iframe,_,f);if(M.setAttribute("src",b),M.setAttribute("allowfullscreen",""),M.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),I(l)||M.setAttribute("referrerPolicy",l),s||!a.customControls)M.setAttribute("data-poster",i.poster),i.media=ht(M,i.media);else{const k=P("div",{class:i.config.classNames.embedContainer,"data-poster":i.poster});k.appendChild(M),i.media=ht(k,i.media)}a.customControls||st(Rt(i.config.urls.vimeo.api,b)).then(k=>{!I(k)&&k.thumbnail_url&&U.setPoster.call(i,k.thumbnail_url).catch(()=>{})}),i.embed=new window.Vimeo.Player(M,{autopause:i.config.autopause,muted:i.muted}),i.media.paused=!0,i.media.currentTime=0,i.supported.ui&&i.embed.disableTextTrack(),i.media.play=()=>(Ct.call(i,!0),i.embed.play()),i.media.pause=()=>(Ct.call(i,!1),i.embed.pause()),i.media.stop=()=>{i.pause(),i.currentTime=0};let{currentTime:L}=i.media;Object.defineProperty(i.media,"currentTime",{get:()=>L,set(k){const{embed:H,media:oe,paused:pe,volume:Ce}=i,xe=pe&&!H.hasPlayed;oe.seeking=!0,O.call(i,oe,"seeking"),Promise.resolve(xe&&H.setVolume(0)).then(()=>H.setCurrentTime(k)).then(()=>xe&&H.pause()).then(()=>xe&&H.setVolume(Ce)).catch(()=>{})}});let G=i.config.speed.selected;Object.defineProperty(i.media,"playbackRate",{get:()=>G,set(k){i.embed.setPlaybackRate(k).then(()=>{G=k,O.call(i,i.media,"ratechange")}).catch(()=>{i.options.speed=[1]})}});let{volume:j}=i.config;Object.defineProperty(i.media,"volume",{get:()=>j,set(k){i.embed.setVolume(k).then(()=>{j=k,O.call(i,i.media,"volumechange")})}});let{muted:J}=i.config;Object.defineProperty(i.media,"muted",{get:()=>J,set(k){const H=!!de(k)&&k;i.embed.setVolume(H?0:i.config.volume).then(()=>{J=H,O.call(i,i.media,"volumechange")})}});let B,{loop:ee}=i.config;Object.defineProperty(i.media,"loop",{get:()=>ee,set(k){const H=de(k)?k:i.config.loop.active;i.embed.setLoop(H).then(()=>{ee=H})}}),i.embed.getVideoUrl().then(k=>{B=k,E.setDownloadUrl.call(i)}).catch(k=>{this.debug.warn(k)}),Object.defineProperty(i.media,"currentSrc",{get:()=>B}),Object.defineProperty(i.media,"ended",{get:()=>i.currentTime===i.duration}),Promise.all([i.embed.getVideoWidth(),i.embed.getVideoHeight()]).then(k=>{const[H,oe]=k;i.embed.ratio=gt(H,oe),Le.call(this)}),i.embed.setAutopause(i.config.autopause).then(k=>{i.config.autopause=k}),i.embed.getVideoTitle().then(k=>{i.config.title=k,U.setTitle.call(this)}),i.embed.getCurrentTime().then(k=>{L=k,O.call(i,i.media,"timeupdate")}),i.embed.getDuration().then(k=>{i.media.duration=k,O.call(i,i.media,"durationchange")}),i.embed.getTextTracks().then(k=>{i.media.textTracks=k,N.setup.call(i)}),i.embed.on("cuechange",({cues:k=[]})=>{const H=k.map(oe=>function(pe){const Ce=document.createDocumentFragment(),xe=document.createElement("div");return Ce.appendChild(xe),xe.innerHTML=pe,Ce.firstChild.innerText}(oe.text));N.updateCues.call(i,H)}),i.embed.on("loaded",()=>{i.embed.getPaused().then(k=>{Ct.call(i,!k),k||O.call(i,i.media,"playing")}),T(i.embed.element)&&i.supported.ui&&i.embed.element.setAttribute("tabindex",-1)}),i.embed.on("bufferstart",()=>{O.call(i,i.media,"waiting")}),i.embed.on("bufferend",()=>{O.call(i,i.media,"playing")}),i.embed.on("play",()=>{Ct.call(i,!0),O.call(i,i.media,"playing")}),i.embed.on("pause",()=>{Ct.call(i,!1)}),i.embed.on("timeupdate",k=>{i.media.seeking=!1,L=k.seconds,O.call(i,i.media,"timeupdate")}),i.embed.on("progress",k=>{i.media.buffered=k.percent,O.call(i,i.media,"progress"),1===parseInt(k.percent,10)&&O.call(i,i.media,"canplaythrough"),i.embed.getDuration().then(H=>{H!==i.media.duration&&(i.media.duration=H,O.call(i,i.media,"durationchange"))})}),i.embed.on("seeked",()=>{i.media.seeking=!1,O.call(i,i.media,"seeked")}),i.embed.on("ended",()=>{i.media.paused=!0,O.call(i,i.media,"ended")}),i.embed.on("error",k=>{i.media.error=k,O.call(i,i.media,"error")}),a.customControls&&setTimeout(()=>U.build.call(i),0)}};function Ue(i){i&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===i&&(this.media.paused=!i,O.call(this,this.media,i?"play":"pause"))}function xi(i){return i.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}const Nt={setup(){if(z(this.elements.wrapper,this.config.classNames.embed,!0),ve(window.YT)&&W(window.YT.Player))Nt.ready.call(this);else{const i=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{W(i)&&i(),Nt.ready.call(this)},ii(this.config.urls.youtube.sdk).catch(a=>{this.debug.warn("YouTube API failed to load",a)})}},getTitle(i){st(Rt(this.config.urls.youtube.api,i)).then(a=>{if(ve(a)){const{title:s,height:l,width:h}=a;this.config.title=s,U.setTitle.call(this),this.embed.ratio=gt(h,l)}Le.call(this)}).catch(()=>{Le.call(this)})},ready(){const i=this,a=i.config.youtube,s=i.media&&i.media.getAttribute("id");if(!I(s)&&s.startsWith("youtube-"))return;let l=i.media.getAttribute("src");I(l)&&(l=i.media.getAttribute(this.config.attributes.embed.id));const h=I(d=l)?null:d.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:d;var d;const p=P("div",{id:`${i.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":a.customControls?i.poster:void 0});if(i.media=ht(p,i.media),a.customControls){const m=f=>`https://i.ytimg.com/vi/${h}/${f}default.jpg`;bt(m("maxres"),121).catch(()=>bt(m("sd"),121)).catch(()=>bt(m("hq"))).then(f=>U.setPoster.call(i,f.src)).then(f=>{f.includes("maxres")||(i.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}i.embed=new window.YT.Player(i.media,{videoId:h,host:xi(a),playerVars:Q({},{autoplay:i.config.autoplay?1:0,hl:i.config.hl,controls:i.supported.ui&&a.customControls?0:1,disablekb:1,playsinline:i.config.fullscreen.iosNative?0:1,cc_load_policy:i.captions.active?1:0,cc_lang_pref:i.config.captions.language,widget_referrer:window?window.location.href:null},a),events:{onError(m){if(!i.media.error){const f=m.data;i.media.error={code:f,message:{2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[f]||"An unknown error occured"},O.call(i,i.media,"error")}},onPlaybackRateChange(m){i.media.playbackRate=m.target.getPlaybackRate(),O.call(i,i.media,"ratechange")},onReady(m){if(W(i.media.play))return;const f=m.target;Nt.getTitle.call(i,h),i.media.play=()=>{Ue.call(i,!0),f.playVideo()},i.media.pause=()=>{Ue.call(i,!1),f.pauseVideo()},i.media.stop=()=>{f.stopVideo()},i.media.duration=f.getDuration(),i.media.paused=!0,i.media.currentTime=0,Object.defineProperty(i.media,"currentTime",{get:()=>Number(f.getCurrentTime()),set(b){i.paused&&!i.embed.hasPlayed&&i.embed.mute(),i.media.seeking=!0,O.call(i,i.media,"seeking"),f.seekTo(b)}}),Object.defineProperty(i.media,"playbackRate",{get:()=>f.getPlaybackRate(),set(b){f.setPlaybackRate(b)}});let{volume:_}=i.config;Object.defineProperty(i.media,"volume",{get:()=>_,set(b){_=b,f.setVolume(100*_),O.call(i,i.media,"volumechange")}});let{muted:x}=i.config;Object.defineProperty(i.media,"muted",{get:()=>x,set(b){const L=de(b)?b:x;x=L,f[L?"mute":"unMute"](),f.setVolume(100*_),O.call(i,i.media,"volumechange")}}),Object.defineProperty(i.media,"currentSrc",{get:()=>f.getVideoUrl()}),Object.defineProperty(i.media,"ended",{get:()=>i.currentTime===i.duration});const M=f.getAvailablePlaybackRates();i.options.speed=M.filter(b=>i.config.speed.options.includes(b)),i.supported.ui&&a.customControls&&i.media.setAttribute("tabindex",-1),O.call(i,i.media,"timeupdate"),O.call(i,i.media,"durationchange"),clearInterval(i.timers.buffering),i.timers.buffering=setInterval(()=>{i.media.buffered=f.getVideoLoadedFraction(),(null===i.media.lastBuffered||i.media.lastBuffered<i.media.buffered)&&O.call(i,i.media,"progress"),i.media.lastBuffered=i.media.buffered,1===i.media.buffered&&(clearInterval(i.timers.buffering),O.call(i,i.media,"canplaythrough"))},200),a.customControls&&setTimeout(()=>U.build.call(i),50)},onStateChange(m){const f=m.target;switch(clearInterval(i.timers.playing),i.media.seeking&&[1,2].includes(m.data)&&(i.media.seeking=!1,O.call(i,i.media,"seeked")),m.data){case-1:O.call(i,i.media,"timeupdate"),i.media.buffered=f.getVideoLoadedFraction(),O.call(i,i.media,"progress");break;case 0:Ue.call(i,!1),i.media.loop?(f.stopVideo(),f.playVideo()):O.call(i,i.media,"ended");break;case 1:a.customControls&&!i.config.autoplay&&i.media.paused&&!i.embed.hasPlayed?i.media.pause():(Ue.call(i,!0),O.call(i,i.media,"playing"),i.timers.playing=setInterval(()=>{O.call(i,i.media,"timeupdate")},50),i.media.duration!==f.getDuration()&&(i.media.duration=f.getDuration(),O.call(i,i.media,"durationchange")));break;case 2:i.muted||i.embed.unMute(),Ue.call(i,!1);break;case 3:O.call(i,i.media,"waiting")}O.call(i,i.elements.container,"statechange",!1,{code:m.data})}}})}},fi={setup(){this.media?(z(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),z(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&z(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=P("div",{class:this.config.classNames.video}),Zt(this.media,this.elements.wrapper),this.elements.poster=P("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?ye.setup.call(this):this.isYouTube?Nt.setup.call(this):this.isVimeo&&wt.setup.call(this)):this.debug.warn("No media element found!")}};class Ii{constructor(a){w(this,"load",()=>{this.enabled&&(ve(window.google)&&ve(window.google.ima)?this.ready():ii(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),w(this,"ready",()=>{var s;this.enabled||((s=this).manager&&s.manager.destroy(),s.elements.displayContainer&&s.elements.displayContainer.destroy(),s.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),w(this,"setupIMA",()=>{this.elements.container=P("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,s=>this.onAdsManagerLoaded(s),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,s=>this.onAdError(s),!1),this.requestAds()}),w(this,"requestAds",()=>{const{container:s}=this.player.elements;try{const l=new google.ima.AdsRequest;l.adTagUrl=this.tagUrl,l.linearAdSlotWidth=s.offsetWidth,l.linearAdSlotHeight=s.offsetHeight,l.nonLinearAdSlotWidth=s.offsetWidth,l.nonLinearAdSlotHeight=s.offsetHeight,l.forceNonLinearFullSlot=!1,l.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(l)}catch(l){this.onAdError(l)}}),w(this,"pollCountdown",(s=!1)=>{if(!s)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const l=ft(Math.max(this.manager.getRemainingTime(),0)),h=`${se.get("advertisement",this.player.config)} - ${l}`;this.elements.container.setAttribute("data-badge-text",h)},100)}),w(this,"onAdsManagerLoaded",s=>{if(!this.enabled)return;const l=new google.ima.AdsRenderingSettings;l.restoreCustomPlaybackStateOnAdBreakComplete=!0,l.enablePreloading=!0,this.manager=s.getAdsManager(this.player,l),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,h=>this.onAdError(h)),Object.keys(google.ima.AdEvent.Type).forEach(h=>{this.manager.addEventListener(google.ima.AdEvent.Type[h],d=>this.onAdEvent(d))}),this.trigger("loaded")}),w(this,"addCuePoints",()=>{I(this.cuePoints)||this.cuePoints.forEach(s=>{if(0!==s&&-1!==s&&s<this.player.duration){const l=this.player.elements.progress;if(T(l)){const h=100/this.player.duration*s,d=P("span",{class:this.player.config.classNames.cues});d.style.left=`${h.toString()}%`,l.appendChild(d)}}})}),w(this,"onAdEvent",s=>{const{container:l}=this.player.elements,h=s.getAd(),d=s.getAdData();switch((p=>{O.call(this.player,this.player.media,`ads${p.replace(/_/g,"").toLowerCase()}`)})(s.type),s.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),h.isLinear()||(h.width=l.offsetWidth,h.height=l.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:d.adError&&this.player.debug.warn(`Non-fatal ad error: ${d.adError.getMessage()}`)}}),w(this,"onAdError",s=>{this.cancel(),this.player.debug.warn("Ads error",s)}),w(this,"listeners",()=>{const{container:s}=this.player.elements;let l;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{l=this.player.currentTime}),this.player.on("seeked",()=>{const h=this.player.currentTime;I(this.cuePoints)||this.cuePoints.forEach((d,p)=>{l<d&&d<h&&(this.manager.discardAdBreak(),this.cuePoints.splice(p,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(s.offsetWidth,s.offsetHeight,google.ima.ViewMode.NORMAL)})}),w(this,"play",()=>{const{container:s}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(s.offsetWidth,s.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(l){this.onAdError(l)}}).catch(()=>{})}),w(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,fe(this.player.media.play())}),w(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),w(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),w(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(s=>{this.on("loaded",s),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),w(this,"trigger",(s,...l)=>{const h=this.events[s];q(h)&&h.forEach(d=>{W(d)&&d.apply(this,l)})}),w(this,"on",(s,l)=>(q(this.events[s])||(this.events[s]=[]),this.events[s].push(l),this)),w(this,"startSafetyTimer",(s,l)=>{this.player.debug.log(`Safety timer invoked from: ${l}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},s)}),w(this,"clearSafetyTimer",s=>{Ge(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${s}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=a,this.config=a.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((s,l)=>{this.on("loaded",s),this.on("error",l)}),this.load()}get enabled(){const{config:a}=this;return this.player.isHTML5&&this.player.isVideo&&a.enabled&&(!I(a.publisherId)||Qe(a.tagUrl))}get tagUrl(){const{config:a}=this;return Qe(a.tagUrl)?a.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${yt({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:a.publisherId})}`}}function yi(i=0,a=0,s=255){return Math.min(Math.max(i,a),s)}const _i=i=>{const a=[];return i.split(/\r\n\r\n|\n\n|\r\r/).forEach(s=>{const l={};s.split(/\r\n|\n|\r/).forEach(h=>{if(X(l.startTime)){if(!I(h.trim())&&I(l.text)){const d=h.trim().split("#xywh=");[l.text]=d,d[1]&&([l.x,l.y,l.w,l.h]=d[1].split(","))}}else{const d=h.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);d&&(l.startTime=60*Number(d[1]||0)*60+60*Number(d[2])+Number(d[3])+Number(`0.${d[4]}`),l.endTime=60*Number(d[6]||0)*60+60*Number(d[7])+Number(d[8])+Number(`0.${d[9]}`))}}),l.text&&a.push(l)}),a},ni=(i,a)=>{const s={};return i>a.width/a.height?(s.width=a.width,s.height=1/i*a.width):(s.height=a.height,s.width=i*a.height),s};class Bt{constructor(a){w(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0)})}),w(this,"getThumbnails",()=>new Promise(s=>{const{src:l}=this.player.config.previewThumbnails;if(I(l))throw new Error("Missing previewThumbnails.src config attribute");const h=()=>{this.thumbnails.sort((d,p)=>d.height-p.height),this.player.debug.log("Preview thumbnails",this.thumbnails),s()};if(W(l))l(d=>{this.thumbnails=d,h()});else{const d=(K(l)?[l]:l).map(p=>this.getThumbnail(p));Promise.all(d).then(h)}})),w(this,"getThumbnail",s=>new Promise(l=>{st(s).then(h=>{const d={frames:_i(h),height:null,urlPrefix:""};d.frames[0].text.startsWith("/")||d.frames[0].text.startsWith("http://")||d.frames[0].text.startsWith("https://")||(d.urlPrefix=s.substring(0,s.lastIndexOf("/")+1));const p=new Image;p.onload=()=>{d.height=p.naturalHeight,d.width=p.naturalWidth,this.thumbnails.push(d),l()},p.src=d.urlPrefix+d.frames[0].text})})),w(this,"startMove",s=>{if(this.loaded&&Me(s)&&["touchmove","mousemove"].includes(s.type)&&this.player.media.duration){if("touchmove"===s.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var l,h;const d=this.player.elements.progress.getBoundingClientRect();this.seekTime=this.player.media.duration*(100/d.width*(s.pageX-d.left)/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=s.pageX,this.elements.thumb.time.innerText=ft(this.seekTime);const m=null===(l=this.player.config.markers)||void 0===l||null===(h=l.points)||void 0===h?void 0:h.find(({time:f})=>f===Math.round(this.seekTime));m&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${m.label}<br>`)}this.showImageAtCurrentTime()}}),w(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),w(this,"startScrubbing",s=>{(Ge(s.button)||!1===s.button||0===s.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),w(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Te.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),w(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),w(this,"render",()=>{this.elements.thumb.container=P("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=P("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const s=P("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=P("span",{},"00:00"),s.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(s),T(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=P("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),w(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),w(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const s=this.thumbnails[0].frames.findIndex(d=>this.seekTime>=d.startTime&&this.seekTime<=d.endTime),l=s>=0;let h=0;this.mouseDown||this.toggleThumbContainer(l),l&&(this.thumbnails.forEach((d,p)=>{this.loadedImages.includes(d.frames[s].text)&&(h=p)}),s!==this.showingThumb&&(this.showingThumb=s,this.loadImage(h)))}),w(this,"loadImage",(s=0)=>{const l=this.showingThumb,h=this.thumbnails[s],{urlPrefix:d}=h,p=h.frames[l],m=h.frames[l].text,f=d+m;if(this.currentImageElement&&this.currentImageElement.dataset.filename===m)this.showImage(this.currentImageElement,p,s,l,m,!1),this.currentImageElement.dataset.index=l,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const _=new Image;_.src=f,_.dataset.index=l,_.dataset.filename=m,this.showingThumbFilename=m,this.player.debug.log(`Loading image: ${f}`),_.onload=()=>this.showImage(_,p,s,l,m,!0),this.loadingImage=_,this.removeOldImages(_)}}),w(this,"showImage",(s,l,h,d,p,m=!0)=>{this.player.debug.log(`Showing thumb: ${p}. num: ${d}. qual: ${h}. newimg: ${m}`),this.setImageSizeAndOffset(s,l),m&&(this.currentImageContainer.appendChild(s),this.currentImageElement=s,this.loadedImages.includes(p)||this.loadedImages.push(p)),this.preloadNearby(d,!0).then(this.preloadNearby(d,!1)).then(this.getHigherQuality(h,s,l,p))}),w(this,"removeOldImages",s=>{Array.from(this.currentImageContainer.children).forEach(l=>{if("img"!==l.tagName.toLowerCase())return;const h=this.usingSprites?500:1e3;if(l.dataset.index!==s.dataset.index&&!l.dataset.deleting){l.dataset.deleting=!0;const{currentImageContainer:d}=this;setTimeout(()=>{d.removeChild(l),this.player.debug.log(`Removing thumb: ${l.dataset.filename}`)},h)}})}),w(this,"preloadNearby",(s,l=!0)=>new Promise(h=>{setTimeout(()=>{const d=this.thumbnails[0].frames[s].text;if(this.showingThumbFilename===d){let p;p=l?this.thumbnails[0].frames.slice(s):this.thumbnails[0].frames.slice(0,s).reverse();let m=!1;p.forEach(f=>{const _=f.text;if(_!==d&&!this.loadedImages.includes(_)){m=!0,this.player.debug.log(`Preloading thumb filename: ${_}`);const{urlPrefix:x}=this.thumbnails[0],M=x+_,b=new Image;b.src=M,b.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${_}`),this.loadedImages.includes(_)||this.loadedImages.push(_),h()}}}),m||h()}},300)})),w(this,"getHigherQuality",(s,l,h,d)=>{if(s<this.thumbnails.length-1){let p=l.naturalHeight;this.usingSprites&&(p=h.h),p<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===d&&(this.player.debug.log(`Showing higher quality thumb for: ${d}`),this.loadImage(s+1))},300)}}),w(this,"toggleThumbContainer",(s=!1,l=!1)=>{this.elements.thumb.container.classList.toggle(this.player.config.classNames.previewThumbnails.thumbContainerShown,s),!s&&l&&(this.showingThumb=null,this.showingThumbFilename=null)}),w(this,"toggleScrubbingContainer",(s=!1)=>{this.elements.scrubbing.container.classList.toggle(this.player.config.classNames.previewThumbnails.scrubbingContainerShown,s),s||(this.showingThumb=null,this.showingThumbFilename=null)}),w(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),w(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:s}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(s.clientHeight>20&&s.clientWidth<20){const l=Math.floor(s.clientHeight*this.thumbAspectRatio);s.style.width=`${l}px`}else if(s.clientHeight<20&&s.clientWidth>20){const l=Math.floor(s.clientWidth/this.thumbAspectRatio);s.style.height=`${l}px`}}else{const l=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);s.style.height=`${this.thumbContainerHeight}px`,s.style.width=`${l}px`}this.setThumbContainerPos()}),w(this,"setThumbContainerPos",()=>{const s=this.player.elements.progress.getBoundingClientRect(),l=this.player.elements.container.getBoundingClientRect(),{container:h}=this.elements.thumb,m=this.mousePosX-s.left-h.clientWidth/2,f=yi(m,l.left-s.left+10,l.right-s.left-h.clientWidth-10);h.style.left=`${f}px`,h.style.setProperty("--preview-arrow-offset",m-f+"px")}),w(this,"setScrubbingContainerSize",()=>{const{width:s,height:l}=ni(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${s}px`,this.elements.scrubbing.container.style.height=`${l}px`}),w(this,"setImageSizeAndOffset",(s,l)=>{if(!this.usingSprites)return;const h=this.thumbContainerHeight/l.h;s.style.height=s.naturalHeight*h+"px",s.style.width=s.naturalWidth*h+"px",s.style.left=`-${l.x*h}px`,s.style.top=`-${l.y*h}px`}),this.player=a,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:a}=ni(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return a}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(a){this.mouseDown?this.currentScrubbingImageElement=a:this.currentThumbnailImageElement=a}}const si={insertElements(i,a){K(a)?Ot(i,this.media,{src:a}):q(a)&&a.forEach(s=>{Ot(i,this.media,s)})},change(i){Wt(i,"sources.length")?(ye.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],we(this.media),this.media=null,T(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:a,type:s}=i,[{provider:l=Ne.html5,src:h}]=a,d="html5"===l?s:"div",p="html5"===l?{}:{src:h};Object.assign(this,{provider:l,type:s,supported:$.check(s,l,this.config.playsinline),media:P(d,p)}),this.elements.container.appendChild(this.media),de(i.autoplay)&&(this.config.autoplay=i.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),I(i.poster)||(this.poster=i.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),U.addStyleHook.call(this),this.isHTML5&&si.insertElements.call(this,"source",a),this.config.title=i.title,fi.setup.call(this),this.isHTML5&&Object.keys(i).includes("tracks")&&si.insertElements.call(this,"track",i.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&U.build.call(this),this.isHTML5&&this.media.load(),I(i.previewThumbnails)||(Object.assign(this.config.previewThumbnails,i.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Bt(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class Et{constructor(a,s){if(w(this,"play",()=>W(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>fe(this.media.play())),this.media.play()):null),w(this,"pause",()=>this.playing&&W(this.media.pause)?this.media.pause():null),w(this,"togglePlay",m=>(de(m)?m:!this.playing)?this.play():this.pause()),w(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):W(this.media.stop)&&this.media.stop()}),w(this,"restart",()=>{this.currentTime=0}),w(this,"rewind",m=>{this.currentTime-=X(m)?m:this.config.seekTime}),w(this,"forward",m=>{this.currentTime+=X(m)?m:this.config.seekTime}),w(this,"increaseVolume",m=>{this.volume=(this.media.muted?0:this.volume)+(X(m)?m:0)}),w(this,"decreaseVolume",m=>{this.increaseVolume(-m)}),w(this,"airplay",()=>{$.airplay&&this.media.webkitShowPlaybackTargetPicker()}),w(this,"toggleControls",m=>{if(this.supported.ui&&!this.isAudio){const f=dt(this.elements.container,this.config.classNames.hideControls),x=z(this.elements.container,this.config.classNames.hideControls,void 0===m?void 0:!m);return x&&q(this.config.controls)&&this.config.controls.includes("settings")&&!I(this.config.settings)&&E.toggleMenu.call(this,!1),x!==f&&O.call(this,this.media,x?"controlshidden":"controlsshown"),!x}return!1}),w(this,"on",(m,f)=>{V.call(this,this.elements.container,m,f)}),w(this,"once",(m,f)=>{Te.call(this,this.elements.container,m,f)}),w(this,"off",(m,f)=>{Re(this.elements.container,m,f)}),w(this,"destroy",(m,f=!1)=>{if(!this.ready)return;const _=()=>{document.body.style.overflow="",this.embed=null,f?(Object.keys(this.elements).length&&(we(this.elements.buttons.play),we(this.elements.captions),we(this.elements.controls),we(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),W(m)&&m()):(ge.call(this),ye.cancelRequests.call(this),ht(this.elements.original,this.elements.container),O.call(this,this.elements.original,"destroyed",!0),W(m)&&m.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(U.toggleNativeControls.call(this,!0),_()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&W(this.embed.destroy)&&this.embed.destroy(),_()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(_),setTimeout(_,200))}),w(this,"supports",m=>$.mime.call(this,m)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=$.touch,this.media=a,K(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||Ke(this.media)||q(this.media))&&(this.media=this.media[0]),this.config=Q({},mi,Et.defaults,s||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new vt(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",$),Ge(this.media)||!T(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!$.check().api)return void this.debug.error("Setup failed: no support");const l=this.media.cloneNode(!0);l.autoplay=!1,this.elements.original=l;const h=this.media.tagName.toLowerCase();let d=null,p=null;switch(h){case"div":if(d=this.media.querySelector("iframe"),T(d)){if(p=Lt(d.getAttribute("src")),this.provider=(m=p.toString(),/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(m)?Ne.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(m)?Ne.vimeo:null),this.elements.container=this.media,this.media=d,this.elements.container.className="",p.search.length){const m=["1","true"];m.includes(p.searchParams.get("autoplay"))&&(this.config.autoplay=!0),m.includes(p.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=m.includes(p.searchParams.get("playsinline")),this.config.youtube.hl=p.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(I(this.provider)||!Object.values(Ne).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type="video";break;case"video":case"audio":this.type=h,this.provider=Ne.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}var m;this.supported=$.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new Ft(this),this.storage=new nt(this),this.media.plyr=this,T(this.elements.container)||(this.elements.container=P("div",{tabindex:0}),Zt(this.media,this.elements.container)),U.migrateStyles.call(this),U.addStyleHook.call(this),fi.setup.call(this),this.config.debug&&V.call(this,this.elements.container,this.config.events.join(" "),m=>{this.debug.log(`event: ${m.type}`)}),this.fullscreen=new he(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&U.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Ii(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>fe(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Bt(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Ne.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Ne.youtube}get isVimeo(){return this.provider===Ne.vimeo}get isVideo(){return"video"===this.type}get isAudio(){return"audio"===this.type}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&0===this.currentTime)}get ended(){return Boolean(this.media.ended)}set currentTime(a){if(!this.duration)return;const s=X(a)&&a>0;this.media.currentTime=s?Math.min(a,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:a}=this.media;return X(a)?a:a&&a.length&&this.duration>0?a.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){const a=parseFloat(this.config.duration),s=(this.media||{}).duration,l=X(s)&&s!==1/0?s:0;return a||l}set volume(a){let s=a;K(s)&&(s=Number(s)),X(s)||(s=this.storage.get("volume")),X(s)||({volume:s}=this.config),s>1&&(s=1),s<0&&(s=0),this.config.volume=s,this.media.volume=s,!I(a)&&this.muted&&s>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(a){let s=a;de(s)||(s=this.storage.get("muted")),de(s)||(s=this.config.muted),this.config.muted=s,this.media.muted=s}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(a){let s=null;X(a)&&(s=a),X(s)||(s=this.storage.get("speed")),X(s)||(s=this.config.speed.selected);const{minimumSpeed:l,maximumSpeed:h}=this;s=yi(s,l,h),this.config.speed.selected=s,setTimeout(()=>{this.media&&(this.media.playbackRate=s)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(a){const s=this.config.quality,l=this.options.quality;if(!l.length)return;let h=[!I(a)&&Number(a),this.storage.get("quality"),s.selected,s.default].find(X),d=!0;if(!l.includes(h)){const p=mt(l,h);this.debug.warn(`Unsupported quality option: ${h}, using ${p} instead`),h=p,d=!1}s.selected=h,this.media.quality=h,d&&this.storage.set({quality:h})}get quality(){return this.media.quality}set loop(a){const s=de(a)?a:this.config.loop.active;this.config.loop.active=s,this.media.loop=s}get loop(){return Boolean(this.media.loop)}set source(a){si.change.call(this,a)}get source(){return this.media.currentSrc}get download(){const{download:a}=this.config.urls;return Qe(a)?a:this.source}set download(a){Qe(a)&&(this.config.urls.download=a,E.setDownloadUrl.call(this))}set poster(a){this.isVideo?U.setPoster.call(this,a,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const a=ke(Dt.call(this));return q(a)?a.join(":"):a}set ratio(a){this.isVideo?K(a)&&Pt(a)?(this.config.ratio=ke(a),Le.call(this)):this.debug.error(`Invalid aspect ratio specified (${a})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(a){this.config.autoplay=de(a)?a:this.config.autoplay}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(a){N.toggle.call(this,a,!1)}set currentTrack(a){N.set.call(this,a,!1),N.setup.call(this)}get currentTrack(){const{toggled:a,currentTrack:s}=this.captions;return a?s:-1}set language(a){N.setLanguage.call(this,a,!1)}get language(){return(N.getCurrentTrack.call(this)||{}).language}set pip(a){if(!$.pip)return;const s=de(a)?a:!this.pip;W(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(s?Fe:"inline"),W(this.media.requestPictureInPicture)&&(!this.pip&&s?this.media.requestPictureInPicture():this.pip&&!s&&document.exitPictureInPicture())}get pip(){return $.pip?I(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Fe:null}setPreviewThumbnails(a){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,a),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Bt(this))}static supported(a,s,l){return $.check(a,s,l)}static loadSprite(a,s){return Qt(a,s)}static setup(a,s={}){let l=null;return K(a)?l=Array.from(document.querySelectorAll(a)):Ke(a)?l=Array.from(a):q(a)&&(l=a.filter(T)),I(l)?null:l.map(h=>new Et(h,s))}}return Et.defaults=JSON.parse(JSON.stringify(mi)),Et}())}}]);